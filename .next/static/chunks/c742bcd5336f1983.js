(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t,n,i,r,l;var o,s,a,u,p,d,c,h,m,f,g,y,v,b,E,_,x,I,T,A,S,C,O,N,w,R,P,j,M,k,D,U,L,q,G,H,F,V,B,J,$,W,Y,K,z,X,Q,Z,ee,et,en,ei,er,el,eo,es,ea,eu,ep,ed,ec,eh,em,ef,eg,ey,ev,eb,eE,e_,ex,eI,eT,eA,eS,eC,eO,eN,ew,eR,eP,ej,eM,ek,eD,eU,eL,eq,eG,eH,eF,eV,eB,eJ,e$,eW,eY,eK,ez,eX,eQ,eZ,e0,e1,e2,e4,e5,e3,e6,e8,e7,e9,te,tt,tn=e.i(43476);let ti=["To ensure child rights by protecting and promoting children.","To increase access to basic health and hygiene for the target community.","To improve living standards by increasing participation in income generating activities.","To advocate, empower women, and build networks for community services.","To prepare for and execute emergency and recovery work efficiently.","To create conducive Agroecological based Livelihoods and mitigate climate risk.","To emphasize sustainable development goals with Nepal government policy."],tr=[{id:"m1",name:"Goma Devi Neupane",nepaliName:"गोमा देवी न्यौपाने",role:"CHAIRPERSON, RWUA",imageUrl:"https://images.unsplash.com/photo-1531123897727-8f129e16fd3c?auto=format&fit=crop&q=80&w=800",contactPerson:"Bishnu Prasad Chalise",phone:"9854035079",quote:(0,tn.jsxs)(tn.Fragment,{children:["ग्रामीण नारी उत्थान संघ हरिपुरले विगत लामो समय देखि ग्रामीण भेगका नागरिकहरुको ज्ञान एवं शिपसाग सम्बन्धित विविध किसिमका सशक्तिकरणको कार्यलाई अगाडि बढाउादै आएको छ । लोकतन्त्रको सम्बद्र्वन र सुशासनको अभिवृद्विका लागि सामाीजक तथा नागरिक समूह एवं संगठनहरुको महत्वपुर्ण भूमिका हुन्छ । प्रजातन्त्रको विकास सगै ",(0,tn.jsx)("span",{className:"bg-blue-700 px-1",children:"जनउत्तरदायी"})," व्यवस्थाको विकासमा बल पुग्ने हुादा यसका अति आवश्यक संयन्त्रहरु र अवलम्बन गरिएका प्रक्रियाहरु जब मजबुत र फलदायी हुदैनन तब सम्म नागरिक तथा सामाजिक संगठनहरुले प्रभाकारी र रचनात्मक भूमिका निर्वाह गर्न सक्दैनन् ।"]})},{id:"m2",name:"Saraswati Kumari",nepaliName:"सरस्वती कुमारी",role:"SECRETARY, RWUA",imageUrl:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&q=80&w=800",contactPerson:"Technical Team",phone:"98XXXXXXXX",quote:(0,tn.jsxs)(tn.Fragment,{children:["हाम्रो अभियान भनेको महिलाहरूलाई आर्थिक र सामाजिक रूपमा सक्षम बनाउनु हो। जबसम्म ",(0,tn.jsx)("span",{className:"bg-blue-700 px-1",children:"महिला नेतृत्व"})," समाजको हरेक तहमा पुग्दैन, तबसम्म वास्तविक विकास सम्भव छैन। हामीले स्थानीय स्रोत र साधनको अधिकतम परिचालन गर्दै समुदायमा सकारात्मक परिवर्तन ल्याउने प्रयास गरिरहेका छौं।"]})},{id:"m3",name:"Radha Devi",nepaliName:"राधा देवी",role:"TREASURER, RWUA",imageUrl:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80&w=800",contactPerson:"Finance Dept",phone:"98XXXXXXXX",quote:(0,tn.jsxs)(tn.Fragment,{children:["दिगो विकासका लागि ",(0,tn.jsx)("span",{className:"bg-blue-700 px-1",children:"पारदर्शिता र जवाफदेहिता"})," प्रमुख सर्त हुन्। ग्रामीण नारी उत्थान संघले हरेक कार्यक्रममा समुदायको सहभागिता र स्रोतको सही सदुपयोगलाई प्राथमिकता दिँदै आएको छ। हाम्रो लक्ष्य भनेको विपन्न वर्गको जीवनस्तरमा सुधार ल्याउनु हो।"]})}],tl=[{id:"1",name:"Leading the Future",location:"Haripur, Sarlahi",category:"Leadership",content:"Mobilizing rural women to take leadership roles in local cooperatives and community governance.",imageUrl:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?auto=format&fit=crop&q=80&w=800"},{id:"2",name:"Sustainable Harvests",location:"Musahar Settlement",category:"Agriculture",content:"Implementing agroecological techniques to build resilience against climate change and disaster risks.",imageUrl:"https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&q=80&w=800"},{id:"3",name:"Home-Based Education",location:"Sarlahi District",category:"Education",content:"Providing tailored educational support for children with disabilities directly in their homes.",imageUrl:"https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?auto=format&fit=crop&q=80&w=800"}],to=[{id:"n1",date:"२०८१ फागुन ३ गते",category:"Education",title:"विद्यालयको पहुँचमा पुग्न नसकेका अपाङ्ग बालबालिकालाई घरमै शिक्षा प्रदान गरिने",content:"Assisting children with disabilities who cannot attend regular schools through home-based learning initiatives."},{id:"n2",date:"२०८१ माघ ३० गते",category:"Training",title:"LCRC र स्थानीय सरोकारवालाहरु लाइ बाल भेला सञ्चालन तालिम",content:"Two-day training on conducting local level child assemblies for stakeholders and LCRC members."},{id:"n3",date:"२०७४ माघ २० गते",category:"Welfare",title:"४४२ घरधुरीलाई न्यानो कम्बल वितरण",content:"Distributed warm blankets to 442 households in marginalized Dalit and Musahar communities of Haripur."}],ts=()=>(0,tn.jsxs)("section",{className:"relative min-h-[95vh] flex items-center pt-32 lg:pt-0 bg-white overflow-hidden",children:[(0,tn.jsx)("div",{className:"absolute inset-0 pointer-events-none z-0 opacity-[0.03]",children:(0,tn.jsxs)("svg",{className:"w-full h-full text-deep-purple",viewBox:"0 0 1000 1000",preserveAspectRatio:"none",children:[(0,tn.jsx)("path",{d:"M0,500 C200,300 400,700 600,500 S800,300 1000,500",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"10 10"}),(0,tn.jsx)("path",{d:"M0,600 C300,800 600,400 900,600",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"5 5"}),(0,tn.jsx)("circle",{cx:"850",cy:"150",r:"100",fill:"none",stroke:"currentColor",strokeWidth:"1"})]})}),(0,tn.jsx)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24 relative z-10",children:(0,tn.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-16 lg:gap-24",children:[(0,tn.jsxs)("div",{className:"w-full lg:w-[60%]",children:[(0,tn.jsxs)("div",{className:"flex items-center gap-4 mb-10 animate-in slide-in-from-left duration-700",children:[(0,tn.jsx)("span",{className:"w-16 h-[2px] bg-terracotta"}),(0,tn.jsx)("span",{className:"text-terracotta font-black uppercase tracking-[0.6em] text-[10px]",children:"Madhesh Province // Est. 1998"})]}),(0,tn.jsxs)("h1",{className:"text-6xl md:text-8xl lg:text-[120px] font-black text-deep-purple leading-[0.85] mb-12 tracking-tighter animate-in fade-in slide-in-from-bottom duration-1000 delay-100",children:["Dignified ",(0,tn.jsx)("br",{}),(0,tn.jsx)("span",{className:"font-serif-impact italic text-terracotta font-medium",children:"Voices"}),", ",(0,tn.jsx)("br",{}),"United ",(0,tn.jsx)("span",{className:"text-vibrant-gold",children:"Power."})]}),(0,tn.jsxs)("div",{className:"max-w-xl mb-14 animate-in fade-in duration-1000 delay-300",children:[(0,tn.jsx)("p",{className:"text-stone-500 text-xl lg:text-3xl leading-snug font-black opacity-80 mb-8 tracking-tight",children:"Establishment of Quality and Equitable and Prosperous Society."}),(0,tn.jsxs)("div",{className:"p-8 bg-stone-50 border-l-[12px] border-vibrant-gold rounded-r-[40px] italic text-stone-600 font-bold text-lg lg:text-xl shadow-sm",children:['"',"To transform the community by mobilizing and empowering the target group, improving economic, social and healthy life.",'"']})]}),(0,tn.jsxs)("div",{className:"flex flex-wrap gap-8 animate-in fade-in duration-1000 delay-500",children:[(0,tn.jsx)("button",{className:"bg-deep-purple hover:bg-black text-vibrant-gold font-black py-6 px-14 rounded-2xl transition-all shadow-[0_30px_70px_-15px_rgba(76,29,149,0.35)] hover:scale-105 active:scale-95 text-[11px] uppercase tracking-[0.3em]",children:"Join the movement"}),(0,tn.jsxs)("button",{className:"flex items-center gap-6 text-deep-purple font-black text-[11px] uppercase tracking-[0.3em] group",children:[(0,tn.jsx)("span",{className:"border-b-2 border-deep-purple/10 group-hover:border-deep-purple transition-all pb-1",children:"Our Impact Film"}),(0,tn.jsx)("div",{className:"w-14 h-14 rounded-full border-2 border-stone-100 flex items-center justify-center group-hover:bg-terracotta group-hover:text-white group-hover:border-terracotta transition-all shadow-md",children:(0,tn.jsx)("svg",{className:"w-5 h-5 fill-current",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{d:"M8 5v14l11-7z"})})})]})]})]}),(0,tn.jsx)("div",{className:"w-full lg:w-[40%] relative",children:(0,tn.jsxs)("div",{className:"relative z-10 animate-in zoom-in duration-1000 delay-200",children:[(0,tn.jsxs)("div",{className:"relative aspect-[4/5] bg-stone-50 rounded-tr-[200px] rounded-bl-[200px] overflow-hidden shadow-[0_60px_120px_-30px_rgba(0,0,0,0.2)] border-8 border-white",children:[(0,tn.jsx)("img",{src:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?auto=format&fit=crop&q=80&w=1200",alt:"Rural Women Upliftment",className:"w-full h-full object-cover grayscale-[15%] group-hover:grayscale-0 transition-all duration-1000 scale-110 hover:scale-100"}),(0,tn.jsxs)("div",{className:"absolute bottom-10 left-10 right-10 p-10 bg-white/95 backdrop-blur-2xl rounded-[40px] shadow-2xl border border-white/20 transform hover:-translate-y-3 transition-transform duration-700",children:[(0,tn.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,tn.jsx)("div",{className:"w-10 h-10 rounded-full bg-vibrant-gold flex items-center justify-center text-stone-950 shadow-lg",children:(0,tn.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),(0,tn.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-deep-purple",children:"Social Resilience"})]}),(0,tn.jsx)("p",{className:"text-stone-800 font-black text-xl leading-tight tracking-tight",children:'"Leadership is the seed; community is the harvest."'})]})]}),(0,tn.jsxs)("div",{className:"absolute -top-10 -left-10 w-40 h-40 bg-white rounded-full shadow-[0_30px_60px_-10px_rgba(0,0,0,0.15)] flex items-center justify-center border border-stone-50 group cursor-default",children:[(0,tn.jsx)("div",{className:"relative w-full h-full animate-[spin_15s_linear_infinite] group-hover:pause flex items-center justify-center",children:(0,tn.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-32 h-32",children:[(0,tn.jsx)("path",{id:"badgePath",d:"M 50, 50 m -40, 0 a 40,40 0 1,1 80,0 a 40,40 0 1,1 -80,0",fill:"transparent"}),(0,tn.jsx)("text",{className:"text-[9px] font-black uppercase tracking-[0.3em] fill-deep-purple",children:(0,tn.jsx)("textPath",{xlinkHref:"#badgePath",children:"• 27 YEARS OF IMPACT • BRAVE • RESILIENT •"})})]})}),(0,tn.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,tn.jsx)("span",{className:"text-terracotta text-3xl font-black leading-none",children:"27"}),(0,tn.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest text-stone-300",children:"Years"})]})]}),(0,tn.jsx)("div",{className:"absolute -bottom-16 -right-16 w-80 h-80 bg-vibrant-gold opacity-[0.05] rounded-full blur-[100px] -z-10"})]})})]})})]});var ta=e.i(71645);let tu=[{id:1,url:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?auto=format&fit=crop&q=80&w=1200",title:"Life in Hands"},{id:2,url:"https://images.unsplash.com/photo-1509099836639-18ba1795216d?auto=format&fit=crop&q=80&w=1200",title:"Community Bonds"},{id:3,url:"https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?auto=format&fit=crop&q=80&w=1200",title:"Empowerment"},{id:4,url:"https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&q=80&w=1200",title:"Sustainable Growth"}],tp=()=>{let[e,t]=(0,ta.useState)([]),[n,i]=(0,ta.useState)(!1),r=(0,ta.useRef)(null),l=(0,ta.useRef)({x:0,y:0,cardId:-1}),o=(0,ta.useRef)({x:0,y:0}),s=(0,ta.useRef)({x:0,y:0}),a=(0,ta.useRef)(0);(0,ta.useEffect)(()=>{t(tu.map((e,t)=>({...e,x:0,y:0,rot:(t%2==0?1.5:-1.5)*t,scale:1,opacity:1,isThrown:!1,zIndex:tu.length-t})))},[]);let u=(t,n)=>{let r=e.reduce((e,t)=>e.zIndex>t.zIndex?e:t);if(n!==r.id||r.isThrown)return;let o="touches"in t?t.touches[0].clientX:t.clientX,u="touches"in t?t.touches[0].clientY:t.clientY;i(!0),l.current={x:o,y:u,cardId:n},s.current={x:o,y:u},a.current=Date.now()},p=e=>{if(-1===l.current.cardId)return;let n="touches"in e?e.touches[0].clientX:e.clientX,i="touches"in e?e.touches[0].clientY:e.clientY,r=Date.now(),u=r-a.current;u>0&&(o.current={x:(n-s.current.x)/u,y:(i-s.current.y)/u}),s.current={x:n,y:i},a.current=r;let p=n-l.current.x,d=i-l.current.y;t(e=>e.map(e=>e.id===l.current.cardId?{...e,x:p,y:d,rot:.1*p}:e))},d=()=>{let e=l.current.cardId;if(-1!==e){if(Math.sqrt(o.current.x**2+o.current.y**2)>.6){let n=800*o.current.x,i=800*o.current.y;t(t=>t.map(t=>t.id===e?{...t,isThrown:!0,x:n,y:i,rot:t.rot+50*o.current.x,scale:.8,opacity:0}:t)),setTimeout(()=>{t(t=>t.find(t=>t.id===e)?t.map(t=>t.id===e?{...t,isThrown:!1,x:0,y:0,rot:(Math.random()-.5)*8,scale:1,opacity:1,zIndex:1}:{...t,zIndex:t.zIndex+1}):t)},400)}else t(t=>t.map(t=>t.id===e?{...t,x:0,y:0,rot:0}:t));l.current.cardId=-1,i(!1)}};return(0,tn.jsx)("section",{className:"py-24 lg:py-36 bg-white overflow-hidden select-none",onMouseUp:d,onTouchEnd:d,children:(0,tn.jsx)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24",children:(0,tn.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-16 lg:gap-32",children:[(0,tn.jsxs)("div",{className:"w-full lg:w-1/2 relative flex flex-col items-center",children:[(0,tn.jsxs)("div",{ref:r,className:"relative w-full max-w-[460px] aspect-square flex items-center justify-center",onMouseMove:p,onTouchMove:p,style:{cursor:n?"grabbing":"grab"},children:[(0,tn.jsx)("div",{className:"absolute inset-0 bg-stone-100/40 rounded-full blur-3xl -z-10 scale-125"}),e.map(e=>(0,tn.jsxs)("div",{onMouseDown:t=>u(t,e.id),onTouchStart:t=>u(t,e.id),className:"absolute w-full h-full bg-white p-4 shadow-[0_30px_80px_-20px_rgba(0,0,0,0.12)] border border-stone-100 rounded-[32px] pointer-events-auto overflow-hidden",style:{transform:`translate(${e.x}px, ${e.y}px) rotate(${e.rot}deg) scale(${e.scale})`,zIndex:e.zIndex,opacity:e.opacity,transition:e.isThrown?"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)":n&&l.current.cardId===e.id?"none":"all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[(0,tn.jsx)("img",{src:e.url,alt:"Mission focus",className:"w-full h-full object-cover rounded-2xl grayscale-[15%] group-hover:grayscale-0 transition-all duration-700",draggable:!1}),(0,tn.jsx)("div",{className:"absolute bottom-10 left-10 right-10",children:(0,tn.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl px-6 py-2.5 rounded-full shadow-2xl border border-white/20 inline-flex items-center gap-3",children:[(0,tn.jsx)("div",{className:"w-2 h-2 rounded-full bg-vibrant-gold animate-pulse"}),(0,tn.jsxs)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-deep-purple",children:["Impact Area 0",e.id]})]})})]},e.id))]}),(0,tn.jsxs)("div",{className:"mt-16 flex items-center gap-6 group",children:[(0,tn.jsx)("div",{className:"w-12 h-[1px] bg-stone-200 group-hover:w-20 transition-all"}),(0,tn.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-stone-300",children:"Grab & Swipe card to cycle"}),(0,tn.jsx)("div",{className:"w-12 h-[1px] bg-stone-200 group-hover:w-20 transition-all"})]})]}),(0,tn.jsxs)("div",{className:"w-full lg:w-1/2",children:[(0,tn.jsxs)("h2",{className:"text-6xl lg:text-[84px] font-serif-impact text-deep-purple leading-[0.9] tracking-tighter mb-10",children:["A Dignified ",(0,tn.jsx)("br",{}),(0,tn.jsx)("span",{className:"text-terracotta italic",children:"Life for All."})]}),(0,tn.jsx)("div",{className:"mb-12 p-8 bg-stone-50 border-l-8 border-vibrant-gold rounded-r-3xl",children:(0,tn.jsxs)("p",{className:"text-stone-800 text-xl lg:text-2xl font-bold italic leading-relaxed",children:['"',"A dignified life will be built by improving the quality of education healthy life and income of the Community.",'"']})}),(0,tn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8",children:ti.map((e,t)=>(0,tn.jsxs)("div",{className:"group flex gap-5 items-start",children:[(0,tn.jsxs)("span",{className:"text-terracotta font-black text-xs shrink-0 mt-1 transition-transform group-hover:scale-125",children:["0",t+1]}),(0,tn.jsx)("p",{className:"text-stone-500 text-[15px] leading-relaxed font-semibold opacity-80 group-hover:opacity-100 transition-opacity",children:e})]},t))}),(0,tn.jsx)("div",{className:"mt-16",children:(0,tn.jsx)("button",{className:"bg-deep-purple text-vibrant-gold font-black py-5 px-12 rounded-2xl text-[10px] tracking-[0.3em] uppercase hover:bg-black transition-all shadow-2xl active:scale-95",children:"Explore Our Ecosystem"})})]})]})})})},td=[{id:1,title:"Quality Education",impact:"1,200+ Students",description:"Bridging systemic gaps for marginalized children through tailored home-based learning and resource centers.",color:"bg-deep-purple",textColor:"text-deep-purple",accent:"border-deep-purple/30",hoverBorder:"hover:border-deep-purple",glow:"group-hover:shadow-[0_40px_100px_rgba(76,29,149,0.2)]",offset:"lg:-translate-y-16"},{id:2,title:"Equitable Society",impact:"45+ Cooperatives",description:"Advocating for rights through social mobilization and strengthening women's leadership in community governance.",color:"bg-terracotta",textColor:"text-terracotta",accent:"border-terracotta/30",hoverBorder:"hover:border-terracotta",glow:"group-hover:shadow-[0_40px_100px_rgba(194,65,12,0.2)]",offset:"lg:translate-y-16"},{id:3,title:"Prosperous Livelihoods",impact:"5k+ Lives",description:"Harnessing agroecological techniques to build climate resilience and ensure sustainable economic independence.",color:"bg-vibrant-gold",textColor:"text-vibrant-gold",accent:"border-vibrant-gold/30",hoverBorder:"hover:border-vibrant-gold",glow:"group-hover:shadow-[0_40px_100px_rgba(217,119,6,0.2)]",offset:"lg:-translate-y-8"}],tc=()=>{let[e,t]=(0,ta.useState)(!1),n=(0,ta.useRef)(null);return(0,ta.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{e.isIntersecting&&t(!0)},{threshold:.2});return n.current&&e.observe(n.current),()=>e.disconnect()},[]),(0,tn.jsxs)("section",{ref:n,className:"py-40 bg-white relative overflow-hidden",children:[(0,tn.jsxs)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24 relative z-10",children:[(0,tn.jsxs)("div",{className:`mb-32 max-w-5xl mx-auto text-center transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[(0,tn.jsxs)("div",{className:"flex items-center justify-center gap-6 mb-10",children:[(0,tn.jsx)("div",{className:"h-[2px] w-16 bg-stone-100"}),(0,tn.jsx)("span",{className:"text-terracotta font-black uppercase tracking-[0.6em] text-[10px]",children:"Strategic Framework"}),(0,tn.jsx)("div",{className:"h-[2px] w-16 bg-stone-100"})]}),(0,tn.jsxs)("h2",{className:"text-6xl md:text-8xl lg:text-9xl font-serif-impact text-deep-purple leading-[0.9] tracking-tighter",children:["Pillars of ",(0,tn.jsx)("br",{}),(0,tn.jsx)("span",{className:"italic text-terracotta",children:"Transformation."})]})]}),(0,tn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-16 lg:gap-20 items-start",children:td.map((t,n)=>(0,tn.jsx)("div",{className:`group relative transition-all duration-1000 transform ${t.offset} ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-32"}`,style:{transitionDelay:`${200*n}ms`},children:(0,tn.jsxs)("div",{className:`relative bg-white p-16 lg:p-20 border-2 border-stone-50 ${t.accent} ${t.hoverBorder} rounded-tr-[160px] rounded-bl-[160px] shadow-[0_60px_120px_-30px_rgba(0,0,0,0.08)] ${t.glow} transition-all duration-700 h-full flex flex-col group-hover:-translate-y-4`,children:[(0,tn.jsxs)("div",{className:"flex-grow",children:[(0,tn.jsx)("div",{className:`w-16 h-16 rounded-[24px] ${t.color} mb-10 flex items-center justify-center text-white shadow-xl transform group-hover:rotate-12 transition-transform`,children:(0,tn.jsxs)("span",{className:"text-2xl font-black",children:["0",t.id]})}),(0,tn.jsx)("h3",{className:"text-4xl font-black text-deep-purple mb-8 leading-tight tracking-tight transition-colors duration-500 group-hover:text-black",children:t.title}),(0,tn.jsx)("p",{className:"text-stone-500 text-xl leading-relaxed font-bold mb-14 opacity-70 group-hover:opacity-100 transition-opacity",children:t.description})]}),(0,tn.jsxs)("div",{className:"pt-12 mt-auto border-t border-stone-100 flex items-center justify-between",children:[(0,tn.jsxs)("div",{className:"flex flex-col",children:[(0,tn.jsx)("span",{className:"text-[10px] font-black text-stone-300 uppercase tracking-widest mb-2",children:"Metrics"}),(0,tn.jsx)("span",{className:`text-lg font-black ${t.textColor} tracking-tight`,children:t.impact})]}),(0,tn.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-stone-50 flex items-center justify-center group-hover:bg-deep-purple group-hover:text-vibrant-gold transition-all duration-500 shadow-sm",children:(0,tn.jsx)("svg",{className:"w-6 h-6 transform group-hover:translate-x-2 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]})]})},t.id))})]}),(0,tn.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-[1px] bg-stone-100 -z-10"})]})},th=()=>{let[e,t]=(0,ta.useState)(0),[n,i]=(0,ta.useState)(!1),r=()=>{n||(i(!0),setTimeout(()=>{t(e=>(e+1)%tr.length),i(!1)},400))};(0,ta.useEffect)(()=>{let e=setInterval(r,8e3);return()=>clearInterval(e)},[]);let l=tr[e];return(0,tn.jsxs)("section",{className:"py-24 bg-deep-purple text-white overflow-hidden relative",children:[(0,tn.jsx)("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-white opacity-5 skew-x-12 translate-x-1/2"}),(0,tn.jsx)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24 relative z-10",children:(0,tn.jsxs)("div",{className:`flex flex-col lg:flex-row gap-16 items-center transition-all duration-500 ${n?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[(0,tn.jsx)("div",{className:"w-full lg:w-[40%] flex justify-center lg:justify-start",children:(0,tn.jsxs)("div",{className:"relative p-4 border border-white/20 rounded-2xl w-full max-w-sm aspect-[3/4]",children:[(0,tn.jsx)("div",{className:"absolute inset-2 border border-white/40 rounded-xl"}),(0,tn.jsx)("img",{src:l.imageUrl,alt:l.name,className:"w-full h-full object-cover rounded-lg shadow-2xl"}),(0,tn.jsxs)("div",{className:"absolute bottom-10 left-6 right-6 bg-white/10 backdrop-blur-lg p-6 rounded-xl border border-white/20 shadow-xl",children:[(0,tn.jsx)("h4",{className:"text-2xl font-bold font-nepali mb-1",children:l.nepaliName}),(0,tn.jsx)("p",{className:"text-vibrant-gold text-xs font-black uppercase tracking-widest",children:l.role})]})]})}),(0,tn.jsxs)("div",{className:"w-full lg:w-[60%] relative",children:[(0,tn.jsx)("div",{className:"text-vibrant-gold text-8xl mb-4 leading-none font-serif select-none opacity-80",children:"“"}),(0,tn.jsx)("div",{className:"text-xl lg:text-2xl font-nepali leading-[1.8] text-stone-200 mb-12 min-h-[160px]",children:l.quote}),(0,tn.jsxs)("div",{className:"flex gap-4 mt-12",children:[(0,tn.jsx)("button",{onClick:()=>{n||(i(!0),setTimeout(()=>{t(e=>(e-1+tr.length)%tr.length),i(!1)},400))},className:"w-12 h-12 rounded-full border border-white/20 flex items-center justify-center hover:bg-white/10 transition-all group","aria-label":"Previous member",children:(0,tn.jsx)("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),(0,tn.jsx)("button",{onClick:r,className:"w-12 h-12 rounded-full border border-white/20 flex items-center justify-center hover:bg-white/10 transition-all group","aria-label":"Next member",children:(0,tn.jsx)("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),(0,tn.jsx)("div",{className:"flex gap-2 mt-8",children:tr.map((n,i)=>(0,tn.jsx)("button",{onClick:()=>t(i),className:`h-1 rounded-full transition-all duration-300 ${e===i?"w-12 bg-vibrant-gold":"w-4 bg-white/20 hover:bg-white/40"}`},i))})]})]})})]})},tm=()=>{let[e,t]=(0,ta.useState)(!1),[n,i]=(0,ta.useState)(0),[r,l]=(0,ta.useState)(null),o=(0,ta.useRef)(null);return(0,ta.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{e.isIntersecting&&t(!0)},{threshold:.1});o.current&&e.observe(o.current);let n=()=>{if(!o.current)return;let e=o.current.getBoundingClientRect(),t=window.innerHeight,n=(t-e.top)/(t-0+e.height);i(n=Math.min(Math.max(n,0),1))};return window.addEventListener("scroll",n),()=>{e.disconnect(),window.removeEventListener("scroll",n)}},[]),(0,tn.jsxs)("section",{ref:o,className:"py-32 bg-white overflow-hidden selection:bg-deep-purple selection:text-white relative",children:[(0,tn.jsxs)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24",children:[(0,tn.jsx)("div",{className:"mb-24 flex flex-col items-center text-center",children:(0,tn.jsxs)("div",{className:`transition-all duration-1000 delay-100 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[(0,tn.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,tn.jsx)("div",{className:"w-8 h-[2px] bg-terracotta/40"}),(0,tn.jsx)("h4",{className:"text-terracotta font-black uppercase tracking-[0.4em] text-[10px]",children:"Voices of Impact"}),(0,tn.jsx)("div",{className:"w-8 h-[2px] bg-terracotta/40"})]}),(0,tn.jsxs)("h2",{className:"text-5xl lg:text-7xl font-serif-impact text-deep-purple leading-tight tracking-tighter",children:["Real people. ",(0,tn.jsx)("span",{className:"italic opacity-80 ml-2",children:"Real stories."})]})]})}),(0,tn.jsx)("div",{className:"flex flex-col items-stretch",children:(0,tn.jsxs)("div",{className:"flex-grow",children:[(0,tn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-10",children:tl.map((t,n)=>(0,tn.jsxs)("div",{className:`bg-white rounded-none overflow-hidden ring-1 ring-stone-100 shadow-[0_2px_10px_-3px_rgba(0,0,0,0.07),0_4px_6px_-2px_rgba(0,0,0,0.05)] hover:shadow-[0_40px_80px_-20px_rgba(0,0,0,0.1)] transition-all duration-500 group flex flex-col h-full transform ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-12"}`,style:{transitionDelay:`${(n+2)*200}ms`},children:[(0,tn.jsxs)("div",{className:"aspect-[4/3] overflow-hidden relative cursor-pointer",onClick:()=>l({url:t.imageUrl,name:t.name}),children:[(0,tn.jsx)("div",{className:"absolute inset-0 bg-deep-purple/10 group-hover:bg-deep-purple/40 transition-all duration-500 z-10 flex items-center justify-center",children:(0,tn.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center transform scale-0 group-hover:scale-100 rotate-45 group-hover:rotate-0 transition-all duration-500 shadow-2xl",children:(0,tn.jsx)("svg",{className:"w-6 h-6 text-deep-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})}),(0,tn.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 grayscale-[30%] group-hover:grayscale-0"}),(0,tn.jsx)("div",{className:"absolute top-4 left-4 z-20",children:(0,tn.jsx)("span",{className:"bg-white/90 backdrop-blur-sm text-[10px] font-black uppercase tracking-widest px-3 py-1 text-deep-purple border border-deep-purple/10",children:t.category})})]}),(0,tn.jsxs)("div",{className:"p-10 flex flex-col flex-grow",children:[(0,tn.jsx)("h3",{className:"text-2xl font-bold text-deep-purple mb-6 leading-[1.15] group-hover:text-terracotta transition-colors",children:t.name}),(0,tn.jsx)("p",{className:"text-stone-600 text-lg leading-relaxed mb-10 flex-grow font-medium opacity-90",children:t.content}),(0,tn.jsx)("div",{className:"pt-6 mt-auto border-t border-stone-100",children:(0,tn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tn.jsxs)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-stone-400",children:["IMPACT REPORT: ",t.location]}),(0,tn.jsx)("div",{className:"w-2 h-2 rounded-full bg-vibrant-gold scale-0 group-hover:scale-100 transition-transform"})]})})]})]},t.id))}),(0,tn.jsxs)("div",{className:`mt-24 flex items-center gap-12 transition-all duration-1000 delay-700 ${e?"opacity-100":"opacity-0"}`,children:[(0,tn.jsxs)("div",{className:"flex-grow h-[2px] bg-stone-100 relative overflow-hidden rounded-full",children:[(0,tn.jsx)("div",{className:"absolute inset-0 bg-deep-purple/5"}),(0,tn.jsx)("div",{className:"absolute inset-0 bg-vibrant-gold origin-left shadow-[0_0_15px_rgba(217,119,6,0.3)] transition-transform duration-150 ease-out",style:{transform:`scaleX(${n})`}})]}),(0,tn.jsxs)("button",{className:"relative group px-10 py-4 overflow-hidden border border-deep-purple/20 bg-stone-50/50 hover:bg-deep-purple transition-all duration-500 shrink-0",children:[(0,tn.jsx)("span",{className:"relative z-10 text-deep-purple group-hover:text-vibrant-gold font-black text-xs tracking-[0.3em] uppercase transition-colors",children:"More Stories"}),(0,tn.jsx)("div",{className:"absolute inset-0 bg-deep-purple translate-y-full group-hover:translate-y-0 transition-transform duration-500"})]})]})]})})]}),r&&(0,tn.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-8 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>l(null),children:(0,tn.jsxs)("div",{className:"relative max-w-5xl w-full aspect-video bg-white rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 duration-500",onClick:e=>e.stopPropagation(),children:[(0,tn.jsx)("img",{src:r.url,alt:r.name,className:"w-full h-full object-cover"}),(0,tn.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/80 to-transparent text-white",children:[(0,tn.jsx)("h4",{className:"text-3xl font-serif-impact italic",children:r.name}),(0,tn.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] mt-2 opacity-60",children:"Success Story Asset"})]}),(0,tn.jsx)("button",{onClick:()=>l(null),className:"absolute top-6 right-6 w-12 h-12 rounded-full bg-white/10 hover:bg-white text-white hover:text-deep-purple transition-all flex items-center justify-center backdrop-blur-md border border-white/20",children:(0,tn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,tn.jsx)("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-sage opacity-[0.03] rounded-full blur-3xl pointer-events-none"})]})},tf=()=>{let[e,t]=(0,ta.useState)(!1),n=(0,ta.useRef)(null);return(0,ta.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{e.isIntersecting&&t(!0)},{threshold:.1});return n.current&&e.observe(n.current),()=>e.disconnect()},[]),(0,tn.jsxs)("section",{ref:n,className:"py-32 bg-[#F9F8F6] relative overflow-hidden",children:[(0,tn.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-terracotta opacity-[0.02] rounded-full blur-[120px] -translate-y-1/2 translate-x-1/2"}),(0,tn.jsxs)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24 relative z-10",children:[(0,tn.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end mb-20 gap-8",children:[(0,tn.jsxs)("div",{className:`transition-all duration-1000 ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-10"}`,children:[(0,tn.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,tn.jsx)("div",{className:"w-8 h-[2px] bg-vibrant-gold"}),(0,tn.jsx)("h4",{className:"text-vibrant-gold font-black uppercase tracking-[0.4em] text-[10px]",children:"Latest Updates"})]}),(0,tn.jsxs)("h2",{className:"text-5xl lg:text-6xl font-serif-impact text-deep-purple leading-tight",children:["Impact ",(0,tn.jsx)("span",{className:"italic",children:"Highlights"}),"."]})]}),(0,tn.jsxs)("button",{className:`group flex items-center gap-4 text-deep-purple font-black text-xs uppercase tracking-[0.3em] transition-all duration-700 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[(0,tn.jsx)("span",{className:"border-b border-deep-purple/20 group-hover:border-deep-purple pb-1",children:"All Vacancy & Press"}),(0,tn.jsx)("div",{className:"w-10 h-10 rounded-full border border-deep-purple/10 flex items-center justify-center group-hover:bg-deep-purple group-hover:text-vibrant-gold transition-all",children:(0,tn.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})]}),(0,tn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:to.map((t,n)=>(0,tn.jsxs)("div",{className:`group relative bg-white ring-1 ring-stone-100 p-12 lg:p-14 flex flex-col h-full transition-all duration-700 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] hover:shadow-[0_40px_80px_-20px_rgba(76,29,149,0.12)] transform ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-20"}`,style:{transitionDelay:`${150*n}ms`,marginTop:`${1===n?"2rem":"0"}`},children:[(0,tn.jsx)("div",{className:"absolute top-0 left-0 w-0 h-1 bg-vibrant-gold group-hover:w-full transition-all duration-700 ease-in-out"}),(0,tn.jsxs)("div",{className:"flex justify-between items-start mb-10",children:[(0,tn.jsxs)("div",{className:"flex flex-col",children:[(0,tn.jsx)("span",{className:"text-[10px] font-black uppercase text-stone-300 tracking-[0.3em] mb-1",children:"Date"}),(0,tn.jsx)("span",{className:"text-sm font-bold text-stone-500",children:t.date})]}),(0,tn.jsx)("div",{className:"px-4 py-1.5 rounded-full border border-stone-100 bg-stone-50 text-deep-purple text-[9px] font-black uppercase tracking-widest group-hover:bg-deep-purple group-hover:text-vibrant-gold group-hover:border-deep-purple transition-all duration-500",children:t.category})]}),(0,tn.jsx)("h3",{className:"text-2xl lg:text-3xl font-bold text-deep-purple mb-8 leading-[1.3] font-nepali group-hover:text-terracotta transition-colors duration-500",children:t.title}),(0,tn.jsx)("p",{className:"text-stone-500 mb-12 leading-relaxed text-base flex-grow font-medium opacity-80 group-hover:opacity-100 transition-opacity",children:t.content}),(0,tn.jsx)("div",{className:"pt-8 mt-auto border-t border-stone-50",children:(0,tn.jsxs)("a",{href:"#",className:"inline-flex items-center gap-4 text-deep-purple font-black text-xs uppercase tracking-[0.3em] group/link",children:[(0,tn.jsxs)("span",{className:"relative",children:["Read Story",(0,tn.jsx)("span",{className:"absolute -bottom-1 left-0 w-0 h-[2px] bg-terracotta transition-all duration-500 group-hover/link:w-full"})]}),(0,tn.jsx)("div",{className:"w-8 h-8 rounded-lg bg-stone-50 flex items-center justify-center group-hover/link:bg-terracotta group-hover/link:text-vibrant-gold transition-all",children:(0,tn.jsx)("svg",{className:"w-4 h-4 transform transition-transform duration-500 group-hover/link:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})})]})}),(0,tn.jsx)("div",{className:"absolute bottom-0 right-0 w-12 h-12 overflow-hidden pointer-events-none",children:(0,tn.jsx)("div",{className:"absolute bottom-0 right-0 w-full h-full bg-vibrant-gold/5 transform rotate-45 translate-x-1/2 translate-y-1/2"})})]},t.id))})]})]})},tg=[{name:"UNDP",url:"https://logo.clearbit.com/undp.org",id:"1"},{name:"WORLD BANK",url:"https://logo.clearbit.com/worldbank.org",id:"2"},{name:"WFP",url:"https://logo.clearbit.com/wfp.org",id:"3"},{name:"NEPAL GOVT",url:"https://logo.clearbit.com/nepal.gov.np",id:"4"},{name:"RED CROSS",url:"https://logo.clearbit.com/redcross.org",id:"5"},{name:"WHO",url:"https://logo.clearbit.com/who.int",id:"6"}],ty=()=>{let[e,t]=(0,ta.useState)(null),[n,i]=(0,ta.useState)(0),[r,l]=(0,ta.useState)(!1),o=(0,ta.useRef)(null);return(0,ta.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{e.isIntersecting&&l(!0)},{threshold:.2});return o.current&&e.observe(o.current),()=>e.disconnect()},[]),(0,ta.useEffect)(()=>{if(!r)return;let e=0,t=Math.ceil(40.96),n=setInterval(()=>{(e+=t)>=5120?(i(5120),clearInterval(n)):i(e)},16);return()=>clearInterval(n)},[r,5120]),(0,tn.jsxs)("section",{ref:o,className:"py-24 bg-white border-t border-stone-50 overflow-hidden",children:[(0,tn.jsxs)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24 mb-24",children:[(0,tn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-16 lg:gap-24 items-center mb-24",children:[(0,tn.jsxs)("div",{className:"flex flex-col items-center md:items-start text-center md:text-left",children:[(0,tn.jsxs)("div",{className:"text-vibrant-gold text-7xl lg:text-8xl font-black tracking-tighter mb-4",children:[n.toLocaleString(),"+"]}),(0,tn.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tn.jsx)("div",{className:"w-6 h-[2px] bg-deep-purple"}),(0,tn.jsx)("span",{className:"text-deep-purple text-xs font-black uppercase tracking-[0.3em]",children:"Lives Empowered"})]})]}),(0,tn.jsxs)("div",{className:"flex flex-col items-center md:items-start text-center md:text-left border-y md:border-y-0 md:border-x border-stone-100 py-12 md:py-0 md:px-12 lg:px-24",children:[(0,tn.jsx)("div",{className:"text-terracotta text-6xl lg:text-7xl font-black tracking-tighter mb-4",children:"442"}),(0,tn.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tn.jsx)("div",{className:"w-6 h-[2px] bg-stone-200"}),(0,tn.jsx)("span",{className:"text-stone-400 text-xs font-black uppercase tracking-[0.3em]",children:"Blankets Provided"})]})]}),(0,tn.jsxs)("div",{className:"flex flex-col items-center md:items-start text-center md:text-left",children:[(0,tn.jsx)("div",{className:"text-deep-purple text-6xl lg:text-7xl font-black tracking-tighter mb-4",children:"SDG"}),(0,tn.jsxs)("div",{className:"flex items-center gap-3",children:[(0,tn.jsx)("div",{className:"w-6 h-[2px] bg-stone-200"}),(0,tn.jsx)("span",{className:"text-stone-400 text-xs font-black uppercase tracking-[0.3em]",children:"Policy Aligned"})]})]})]}),(0,tn.jsx)("div",{className:"flex flex-col items-center",children:(0,tn.jsxs)("div",{className:"flex items-center gap-6 mb-16",children:[(0,tn.jsx)("div",{className:"h-[1px] w-12 bg-stone-200"}),(0,tn.jsx)("span",{className:"text-stone-400 font-black uppercase tracking-[0.5em] text-[10px]",children:"Strategic Partners"}),(0,tn.jsx)("div",{className:"h-[1px] w-12 bg-stone-200"})]})})]}),(0,tn.jsx)("div",{className:"relative logo-mask",children:(0,tn.jsx)("div",{className:`animate-infinite-scroll flex gap-6 px-6 ${e?"[animation-play-state:paused]":""}`,children:[...tg,...tg,...tg].map((n,i)=>{let r=e===n.id;return(0,tn.jsxs)("div",{onClick:()=>{var e;return e=n.id,void t(t=>t===e?null:e)},className:`relative w-[280px] h-[140px] bg-white rounded-2xl border transition-all duration-500 cursor-pointer overflow-hidden shrink-0 flex items-center justify-center p-4 shadow-sm group
                  ${r?"border-vibrant-gold ring-4 ring-vibrant-gold/10 z-20 scale-110 shadow-xl":"border-stone-200/50 hover:border-vibrant-gold/30 hover:shadow-md z-10"}`,children:[(0,tn.jsx)("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-500 ${r?"opacity-[0.08]":"opacity-[0.04]"}`,style:{backgroundImage:"radial-gradient(#000 1.5px, transparent 1.5px)",backgroundSize:"10px 10px"}}),(0,tn.jsxs)("div",{className:"relative z-10 flex flex-col items-center transition-all duration-500 gap-3",children:[(0,tn.jsx)("img",{src:n.url,alt:n.name,className:`w-auto object-contain transition-all duration-700 
                      ${r?"max-h-20 grayscale-0 opacity-100":"max-h-10 grayscale opacity-30 group-hover:grayscale-0 group-hover:opacity-100"}`,onError:e=>e.currentTarget.style.display="none"}),(0,tn.jsx)("span",{className:`font-black text-[11px] uppercase tracking-[0.2em] transition-all duration-500
                    ${r?"text-deep-purple translate-y-2 opacity-100":"text-stone-300 opacity-60"}`,children:n.name})]}),!r&&(0,tn.jsx)("div",{className:"absolute top-4 right-4 text-vibrant-gold opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-x-2 -translate-y-2 group-hover:translate-x-0 group-hover:translate-y-0",children:(0,tn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M7 17L17 7M17 7H7M17 7V17"})})}),r&&(0,tn.jsx)("div",{className:"absolute top-3 right-3 animate-in fade-in zoom-in duration-300",children:(0,tn.jsx)("div",{className:"w-6 h-6 rounded-full bg-vibrant-gold/10 flex items-center justify-center",children:(0,tn.jsx)("svg",{className:"w-3 h-3 text-vibrant-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})}),(0,tn.jsx)("div",{className:`absolute top-0 left-0 w-full h-[3px] bg-vibrant-gold transition-transform duration-500 origin-left ${r?"scale-x-100":"scale-x-0"}`})]},`${n.id}-${i}`)})})})]})};var tv=e.i(47167);class tb{}function tE(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){let e=t[n];return null!=e?String(e):""}throw Error(`Key '${n}' not found in valueMap.`)})}function t_(e,t,n){for(let i=0;i<t.length-1;i++){let r=t[i];if(r.endsWith("[]")){let l=r.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw Error(`Value must be a list given an array path ${r}`);if(Array.isArray(e[l])){let r=e[l];if(Array.isArray(n))for(let e=0;e<r.length;e++)t_(r[e],t.slice(i+1),n[e]);else for(let e of r)t_(e,t.slice(i+1),n)}return}if(r.endsWith("[0]")){let l=r.slice(0,-3);l in e||(e[l]=[{}]),t_(e[l][0],t.slice(i+1),n);return}e[r]&&"object"==typeof e[r]||(e[r]={}),e=e[r]}let i=t[t.length-1],r=e[i];if(void 0!==r){if(!n||"object"==typeof n&&0===Object.keys(n).length||n===r)return;if("object"==typeof r&&"object"==typeof n&&null!==r&&null!==n)Object.assign(r,n);else throw Error(`Cannot set value for an existing key. Key: ${i}`)}else"_self"!==i||"object"!=typeof n||null===n||Array.isArray(n)?e[i]=n:Object.assign(e,n)}function tx(e,t,n){try{if(1===t.length&&"_self"===t[0])return e;for(let i=0;i<t.length;i++){if("object"!=typeof e||null===e)return n;let r=t[i];if(r.endsWith("[]")){let l=r.slice(0,-2);if(!(l in e))return n;{let r=e[l];if(!Array.isArray(r))return n;return r.map(e=>tx(e,t.slice(i+1),n))}}e=e[r]}return e}catch(e){if(e instanceof TypeError)return n;throw e}}function tI(e){if("string"!=typeof e)throw Error("fromImageBytes must be a string");return e}function tT(e){var t;let n,i,r,l,o={},s=tx(e,["name"]);null!=s&&t_(o,["name"],s);let a=tx(e,["metadata"]);null!=a&&t_(o,["metadata"],a);let u=tx(e,["done"]);null!=u&&t_(o,["done"],u);let p=tx(e,["error"]);null!=p&&t_(o,["error"],p);let d=tx(e,["response"]);return null!=d&&t_(o,["response"],(n={},null!=(i=tx(t=d,["sdkHttpResponse"]))&&t_(n,["sdkHttpResponse"],i),null!=(r=tx(t,["parent"]))&&t_(n,["parent"],r),null!=(l=tx(t,["documentName"]))&&t_(n,["documentName"],l),n)),o}(o=eu||(eu={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(s=ep||(ep={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",s.PYTHON="PYTHON",(a=ed||(ed={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",a.SILENT="SILENT",a.WHEN_IDLE="WHEN_IDLE",a.INTERRUPT="INTERRUPT",(u=ec||(ec={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",u.STRING="STRING",u.NUMBER="NUMBER",u.INTEGER="INTEGER",u.BOOLEAN="BOOLEAN",u.ARRAY="ARRAY",u.OBJECT="OBJECT",u.NULL="NULL",(p=eh||(eh={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",p.MODE_DYNAMIC="MODE_DYNAMIC",(d=em||(em={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",d.SIMPLE_SEARCH="SIMPLE_SEARCH",d.ELASTIC_SEARCH="ELASTIC_SEARCH",(c=ef||(ef={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",c.NO_AUTH="NO_AUTH",c.API_KEY_AUTH="API_KEY_AUTH",c.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",c.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",c.OAUTH="OAUTH",c.OIDC_AUTH="OIDC_AUTH",(h=eg||(eg={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",h.HTTP_IN_QUERY="HTTP_IN_QUERY",h.HTTP_IN_HEADER="HTTP_IN_HEADER",h.HTTP_IN_PATH="HTTP_IN_PATH",h.HTTP_IN_BODY="HTTP_IN_BODY",h.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(m=ey||(ey={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",m.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",m.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",m.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",m.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",m.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",m.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(f=ev||(ev={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",f.LOW="LOW",f.MEDIUM="MEDIUM",f.HIGH="HIGH",f.MINIMAL="MINIMAL",(g=eb||(eb={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",g.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",g.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",g.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",g.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",g.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",g.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",g.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",g.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",g.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",g.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(y=eE||(eE={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",y.SEVERITY="SEVERITY",y.PROBABILITY="PROBABILITY",(v=e_||(e_={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",v.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",v.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",v.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",v.BLOCK_NONE="BLOCK_NONE",v.OFF="OFF",(b=ex||(ex={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",b.STOP="STOP",b.MAX_TOKENS="MAX_TOKENS",b.SAFETY="SAFETY",b.RECITATION="RECITATION",b.LANGUAGE="LANGUAGE",b.OTHER="OTHER",b.BLOCKLIST="BLOCKLIST",b.PROHIBITED_CONTENT="PROHIBITED_CONTENT",b.SPII="SPII",b.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",b.IMAGE_SAFETY="IMAGE_SAFETY",b.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",b.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",b.NO_IMAGE="NO_IMAGE",b.IMAGE_RECITATION="IMAGE_RECITATION",b.IMAGE_OTHER="IMAGE_OTHER",(E=eI||(eI={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",E.NEGLIGIBLE="NEGLIGIBLE",E.LOW="LOW",E.MEDIUM="MEDIUM",E.HIGH="HIGH",(_=eT||(eT={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",_.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",_.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",_.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",_.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(x=eA||(eA={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",x.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",x.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",x.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",x.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(I=eS||(eS={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",I.SAFETY="SAFETY",I.OTHER="OTHER",I.BLOCKLIST="BLOCKLIST",I.PROHIBITED_CONTENT="PROHIBITED_CONTENT",I.IMAGE_SAFETY="IMAGE_SAFETY",I.MODEL_ARMOR="MODEL_ARMOR",I.JAILBREAK="JAILBREAK",(T=eC||(eC={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",T.ON_DEMAND="ON_DEMAND",T.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(A=eO||(eO={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",A.TEXT="TEXT",A.IMAGE="IMAGE",A.AUDIO="AUDIO",(S=eN||(eN={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",S.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",S.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",S.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(C=ew||(ew={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",C.TUNING_MODE_FULL="TUNING_MODE_FULL",C.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(O=eR||(eR={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",O.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",O.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",O.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",O.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",O.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",O.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(N=eP||(eP={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",N.JOB_STATE_QUEUED="JOB_STATE_QUEUED",N.JOB_STATE_PENDING="JOB_STATE_PENDING",N.JOB_STATE_RUNNING="JOB_STATE_RUNNING",N.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",N.JOB_STATE_FAILED="JOB_STATE_FAILED",N.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",N.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",N.JOB_STATE_PAUSED="JOB_STATE_PAUSED",N.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",N.JOB_STATE_UPDATING="JOB_STATE_UPDATING",N.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(w=ej||(ej={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",w.TUNING_TASK_I2V="TUNING_TASK_I2V",w.TUNING_TASK_T2V="TUNING_TASK_T2V",w.TUNING_TASK_R2V="TUNING_TASK_R2V",(R=eM||(eM={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",R.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",R.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",R.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",R.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH",(P=ek||(ek={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",P.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",P.BALANCED="BALANCED",P.PRIORITIZE_COST="PRIORITIZE_COST",(j=eD||(eD={})).UNSPECIFIED="UNSPECIFIED",j.BLOCKING="BLOCKING",j.NON_BLOCKING="NON_BLOCKING",(M=eU||(eU={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",M.MODE_DYNAMIC="MODE_DYNAMIC",(k=eL||(eL={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",k.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(D=eq||(eq={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",D.AUTO="AUTO",D.ANY="ANY",D.NONE="NONE",D.VALIDATED="VALIDATED",(U=eG||(eG={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",U.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",U.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",U.BLOCK_NONE="BLOCK_NONE",(L=eH||(eH={})).DONT_ALLOW="DONT_ALLOW",L.ALLOW_ADULT="ALLOW_ADULT",L.ALLOW_ALL="ALLOW_ALL",(q=eF||(eF={})).auto="auto",q.en="en",q.ja="ja",q.ko="ko",q.hi="hi",q.zh="zh",q.pt="pt",q.es="es",(G=eV||(eV={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",G.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",G.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",G.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",G.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(H=eB||(eB={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",H.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",H.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",H.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(F=eJ||(eJ={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",F.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",F.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",F.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(V=e$||(e$={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",V.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",V.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",V.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",V.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",V.EDIT_MODE_STYLE="EDIT_MODE_STYLE",V.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",V.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(B=eW||(eW={})).FOREGROUND="FOREGROUND",B.BACKGROUND="BACKGROUND",B.PROMPT="PROMPT",B.SEMANTIC="SEMANTIC",B.INTERACTIVE="INTERACTIVE",(J=eY||(eY={})).ASSET="ASSET",J.STYLE="STYLE",($=eK||(eK={})).INSERT="INSERT",$.REMOVE="REMOVE",$.REMOVE_STATIC="REMOVE_STATIC",$.OUTPAINT="OUTPAINT",(W=ez||(ez={})).OPTIMIZED="OPTIMIZED",W.LOSSLESS="LOSSLESS",(Y=eX||(eX={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",Y.PREFERENCE_TUNING="PREFERENCE_TUNING",(K=eQ||(eQ={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",K.STATE_PENDING="STATE_PENDING",K.STATE_ACTIVE="STATE_ACTIVE",K.STATE_FAILED="STATE_FAILED",(z=eZ||(eZ={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",z.PROCESSING="PROCESSING",z.ACTIVE="ACTIVE",z.FAILED="FAILED",(X=e0||(e0={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",X.UPLOADED="UPLOADED",X.GENERATED="GENERATED",(Q=e1||(e1={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",Q.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",Q.RESPONSE_REJECTED="RESPONSE_REJECTED",Q.NEED_MORE_INPUT="NEED_MORE_INPUT",(Z=e2||(e2={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",Z.TEXT="TEXT",Z.IMAGE="IMAGE",Z.VIDEO="VIDEO",Z.AUDIO="AUDIO",Z.DOCUMENT="DOCUMENT",(ee=e4||(e4={})).VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",ee.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",ee.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS",(et=e5||(e5={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",et.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",et.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(en=e3||(e3={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",en.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",en.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(ei=e6||(e6={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",ei.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",ei.NO_INTERRUPTION="NO_INTERRUPTION",(er=e8||(e8={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",er.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",er.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(el=e7||(e7={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",el.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",el.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",el.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",el.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",el.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",el.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",el.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",el.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",el.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",el.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",el.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",el.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(eo=e9||(e9={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",eo.QUALITY="QUALITY",eo.DIVERSITY="DIVERSITY",eo.VOCALIZATION="VOCALIZATION",(es=te||(te={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",es.PLAY="PLAY",es.PAUSE="PAUSE",es.STOP="STOP",es.RESET_CONTEXT="RESET_CONTEXT";class tA{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class tS{get text(){var e,t,n,i,r,l,o,s;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let a="",u=!1,p=[];for(let e of null!=(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?s:[]){for(let[t,n]of Object.entries(e))"text"!==t&&"thought"!==t&&"thoughtSignature"!==t&&(null!==n||void 0!==n)&&p.push(t);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;u=!0,a+=e.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?a:void 0}get data(){var e,t,n,i,r,l,o,s;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let a="",u=[];for(let e of null!=(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?s:[]){for(let[t,n]of Object.entries(e))"inlineData"!==t&&(null!==n||void 0!==n)&&u.push(t);e.inlineData&&"string"==typeof e.inlineData.data&&(a+=atob(e.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}get functionCalls(){var e,t,n,i,r,l,o,s;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let a=null==(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?void 0:s.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);if((null==a?void 0:a.length)!==0)return a}get executableCode(){var e,t,n,i,r,l,o,s,a;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let u=null==(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?void 0:s.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return null==(a=null==u?void 0:u[0])?void 0:a.code}get codeExecutionResult(){var e,t,n,i,r,l,o,s,a;if((null==(i=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let u=null==(s=null==(o=null==(l=null==(r=this.candidates)?void 0:r[0])?void 0:l.content)?void 0:o.parts)?void 0:s.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return null==(a=null==u?void 0:u[0])?void 0:a.output}}class tC{}class tO{}class tN{}class tw{}class tR{}class tP{}class tj{}class tM{}class tk{}class tD{}class tU{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let n,i=new tU;if(t){let t,i,r,l,o,s;t={},null!=(i=tx(e,["name"]))&&t_(t,["name"],i),null!=(r=tx(e,["metadata"]))&&t_(t,["metadata"],r),null!=(l=tx(e,["done"]))&&t_(t,["done"],l),null!=(o=tx(e,["error"]))&&t_(t,["error"],o),null!=(s=tx(e,["response"]))&&t_(t,["response"],function(e){let t={},n=tx(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=tx(e,["_self"]))&&t_(n,["video"],(r={},null!=(l=tx(t=i,["gcsUri"]))&&t_(r,["uri"],l),null!=(o=tx(t,["bytesBase64Encoded"]))&&t_(r,["videoBytes"],tI(o)),null!=(s=tx(t,["mimeType"]))&&t_(r,["mimeType"],s),r)),n})),t_(t,["generatedVideos"],e)}let i=tx(e,["raiMediaFilteredCount"]);null!=i&&t_(t,["raiMediaFilteredCount"],i);let r=tx(e,["raiMediaFilteredReasons"]);return null!=r&&t_(t,["raiMediaFilteredReasons"],r),t}(s)),n=t}else{let t,i,r,l,o,s;t={},null!=(i=tx(e,["name"]))&&t_(t,["name"],i),null!=(r=tx(e,["metadata"]))&&t_(t,["metadata"],r),null!=(l=tx(e,["done"]))&&t_(t,["done"],l),null!=(o=tx(e,["error"]))&&t_(t,["error"],o),null!=(s=tx(e,["response","generateVideoResponse"]))&&t_(t,["response"],function(e){let t={},n=tx(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=tx(e,["video"]))&&t_(n,["video"],(r={},null!=(l=tx(t=i,["uri"]))&&t_(r,["uri"],l),null!=(o=tx(t,["encodedVideo"]))&&t_(r,["videoBytes"],tI(o)),null!=(s=tx(t,["encoding"]))&&t_(r,["mimeType"],s),r)),n})),t_(t,["generatedVideos"],e)}let i=tx(e,["raiMediaFilteredCount"]);null!=i&&t_(t,["raiMediaFilteredCount"],i);let r=tx(e,["raiMediaFilteredReasons"]);return null!=r&&t_(t,["raiMediaFilteredReasons"],r),t}(s)),n=t}return Object.assign(i,n),i}}class tL{}class tq{}class tG{}class tH{}class tF{}class tV{}class tB{}class tJ{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){var n;let i,r,l,o,s,a,u,p,d,c,h=new tJ;return Object.assign(h,(s={},null!=(a=tx(e,["name"]))&&t_(s,["name"],a),null!=(u=tx(e,["metadata"]))&&t_(s,["metadata"],u),null!=(p=tx(e,["done"]))&&t_(s,["done"],p),null!=(d=tx(e,["error"]))&&t_(s,["error"],d),null!=(c=tx(e,["response"]))&&t_(s,["response"],(i={},null!=(r=tx(n=c,["sdkHttpResponse"]))&&t_(i,["sdkHttpResponse"],r),null!=(l=tx(n,["parent"]))&&t_(i,["parent"],l),null!=(o=tx(n,["documentName"]))&&t_(i,["documentName"],o),i)),s)),h}}class t${}class tW{}class tY{}class tK{}class tz{get text(){var e,t,n;let i="",r=!1,l=[];for(let o of null!=(n=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?n:[]){for(let[e,t]of Object.entries(o))"text"!==e&&"thought"!==e&&null!==t&&l.push(e);if("string"==typeof o.text){if("boolean"==typeof o.thought&&o.thought)continue;r=!0,i+=o.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?i:void 0}get data(){var e,t,n;let i="",r=[];for(let l of null!=(n=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?n:[]){for(let[e,t]of Object.entries(l))"inlineData"!==e&&null!==t&&r.push(e);l.inlineData&&"string"==typeof l.inlineData.data&&(i+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class tX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tQ{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let n=new tQ;return Object.assign(n,tT(e)),n}}function tZ(e,t){if(!t||"string"!=typeof t)throw Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw Error("invalid model parameter");if(e.isVertexAI())if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;else{if(!(t.indexOf("/")>=0))return`publishers/google/models/${t}`;let e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function t0(e,t){let n=tZ(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function t1(e){return Array.isArray(e)?e.map(e=>t2(e)):[t2(e)]}function t2(e){if("object"==typeof e&&null!==e)return e;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function t4(e){let t=t2(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function t5(e){let t=t2(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function t3(e){if(null==e)throw Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw Error(`Unsupported part type: ${typeof e}`)}function t6(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>t3(e)):[t3(e)]}function t8(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function t7(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function t9(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function ne(e){if(null==e)throw Error("ContentUnion is required");return t8(e)?e:{role:"user",parts:t6(e)}}function nt(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{let t=ne(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){let e=ne(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>ne(e)):[ne(t)]}function nn(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("contents are required");if(!Array.isArray(e)){if(t7(e)||t9(e))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ne(e)]}let t=[],n=[],i=t8(e[0]);for(let r of e){let e=t8(r);if(e!=i)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(r);else if(t7(r)||t9(r))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else n.push(r)}return i||t.push({role:"user",parts:t6(n)}),t}function ni(e){let t={},n=["items"],i=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw Error("type and anyOf cannot be both populated.");let l=e.anyOf;for(let[o,s]of(null!=l&&2==l.length&&("null"===l[0].type?(t.nullable=!0,e=l[1]):"null"===l[1].type&&(t.nullable=!0,e=l[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(ec).includes(n[0].toUpperCase())?n[0].toUpperCase():ec.TYPE_UNSPECIFIED;else for(let e of(t.anyOf=[],n))t.anyOf.push({type:Object.values(ec).includes(e.toUpperCase())?e.toUpperCase():ec.TYPE_UNSPECIFIED})}(e.type,t),Object.entries(e)))if(null!=s)if("type"==o){if("null"===s)throw Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;t.type=Object.values(ec).includes(s.toUpperCase())?s.toUpperCase():ec.TYPE_UNSPECIFIED}else if(n.includes(o))t[o]=ni(s);else if(i.includes(o)){let e=[];for(let n of s){if("null"==n.type){t.nullable=!0;continue}e.push(ni(n))}t[o]=e}else if(r.includes(o)){let e={};for(let[t,n]of Object.entries(s))e[t]=ni(n);t[o]=e}else{if("additionalProperties"===o)continue;t[o]=s}return t}function nr(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw Error(`Unsupported speechConfig type: ${typeof e}`)}function nl(e){if("multiSpeakerVoiceConfig"in e)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function no(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ni(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ni(t.response));return e}function ns(e){if(null==e)throw Error("tools is required");if(!Array.isArray(e))throw Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function na(e,t){if("string"!=typeof t)throw Error("name must be a string");return function(e,t,n,i=1){let r=!t.startsWith(`${n}/`)&&t.split("/").length===i;if(e.isVertexAI())if(t.startsWith("projects/"))return t;else if(t.startsWith("locations/"))return`projects/${e.getProject()}/${t}`;else if(t.startsWith(`${n}/`))return`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`;else if(r)return`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`;else return t;return r?`${n}/${t}`:t}(e,t,"cachedContents")}function nu(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function np(e){var t;let n;if(null!=e&&"object"==typeof e&&"name"in e&&(n=e.name),null==e||"object"!=typeof e||!("uri"in e)||void 0!==(n=e.uri)){if(null==e||"object"!=typeof e||!("video"in e)||void 0!==(n=null==(t=e.video)?void 0:t.uri)){if("string"==typeof e&&(n=e),void 0===n)throw Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}}function nd(e,t){return e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels"}function nc(e){for(let i of["models","tunedModels","publisherModels"]){var t,n;if(t=e,n=i,null!==t&&"object"==typeof t&&n in t)return e[i]}return[]}function nh(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||1!==i)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||1!==r)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function nm(e){if("object"!=typeof e||null===e)return{};let t=e.inlinedResponses;if("object"!=typeof t||null===t)return e;let n=t.inlinedResponses;if(!Array.isArray(n)||0===n.length)return e;let i=!1;for(let e of n){if("object"!=typeof e||null===e)continue;let t=e.response;if("object"==typeof t&&null!==t&&void 0!==t.embedding){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),e}function nf(e,t){if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw Error(`Invalid batch job name: ${t}.`)}function ng(e){if("BATCH_STATE_UNSPECIFIED"===e)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===e)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===e)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===e)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===e)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===e)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===e)return"JOB_STATE_EXPIRED";else return e}function ny(e){let t={},n=tx(e,["name"]);null!=n&&t_(t,["name"],n);let i=tx(e,["metadata","displayName"]);null!=i&&t_(t,["displayName"],i);let r=tx(e,["metadata","state"]);null!=r&&t_(t,["state"],ng(r));let l=tx(e,["metadata","createTime"]);null!=l&&t_(t,["createTime"],l);let o=tx(e,["metadata","endTime"]);null!=o&&t_(t,["endTime"],o);let s=tx(e,["metadata","updateTime"]);null!=s&&t_(t,["updateTime"],s);let a=tx(e,["metadata","model"]);null!=a&&t_(t,["model"],a);let u=tx(e,["metadata","output"]);return null!=u&&t_(t,["dest"],function(e){let t={},n=tx(e,["responsesFile"]);null!=n&&t_(t,["fileName"],n);let i=tx(e,["inlinedResponses","inlinedResponses"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r;return n={},null!=(i=tx(t=e,["response"]))&&t_(n,["response"],function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["content"]);null!=n&&t_(t,["content"],n);let i=tx(e,["citationMetadata"]);null!=i&&t_(t,["citationMetadata"],function(e){let t={},n=tx(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["citations"],e)}return t}(i));let r=tx(e,["tokenCount"]);null!=r&&t_(t,["tokenCount"],r);let l=tx(e,["finishReason"]);null!=l&&t_(t,["finishReason"],l);let o=tx(e,["avgLogprobs"]);null!=o&&t_(t,["avgLogprobs"],o);let s=tx(e,["groundingMetadata"]);null!=s&&t_(t,["groundingMetadata"],s);let a=tx(e,["index"]);null!=a&&t_(t,["index"],a);let u=tx(e,["logprobsResult"]);null!=u&&t_(t,["logprobsResult"],u);let p=tx(e,["safetyRatings"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["safetyRatings"],e)}let d=tx(e,["urlContextMetadata"]);return null!=d&&t_(t,["urlContextMetadata"],d),t})(e))),t_(t,["candidates"],e)}let r=tx(e,["modelVersion"]);null!=r&&t_(t,["modelVersion"],r);let l=tx(e,["promptFeedback"]);null!=l&&t_(t,["promptFeedback"],l);let o=tx(e,["responseId"]);null!=o&&t_(t,["responseId"],o);let s=tx(e,["usageMetadata"]);return null!=s&&t_(t,["usageMetadata"],s),t}(i)),null!=(r=tx(t,["error"]))&&t_(n,["error"],r),n})),t_(t,["inlinedResponses"],e)}let r=tx(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["inlinedEmbedContentResponses"],e)}return t}(nm(u))),t}function nv(e){var t,n;let i,r,l,o,s,a,u,p,d={},c=tx(e,["name"]);null!=c&&t_(d,["name"],c);let h=tx(e,["displayName"]);null!=h&&t_(d,["displayName"],h);let m=tx(e,["state"]);null!=m&&t_(d,["state"],ng(m));let f=tx(e,["error"]);null!=f&&t_(d,["error"],f);let g=tx(e,["createTime"]);null!=g&&t_(d,["createTime"],g);let y=tx(e,["startTime"]);null!=y&&t_(d,["startTime"],y);let v=tx(e,["endTime"]);null!=v&&t_(d,["endTime"],v);let b=tx(e,["updateTime"]);null!=b&&t_(d,["updateTime"],b);let E=tx(e,["model"]);null!=E&&t_(d,["model"],E);let _=tx(e,["inputConfig"]);null!=_&&t_(d,["src"],(i={},null!=(r=tx(n=_,["instancesFormat"]))&&t_(i,["format"],r),null!=(l=tx(n,["gcsSource","uris"]))&&t_(i,["gcsUri"],l),null!=(o=tx(n,["bigquerySource","inputUri"]))&&t_(i,["bigqueryUri"],o),i));let x=tx(e,["outputConfig"]);null!=x&&t_(d,["dest"],(t=nm(x),s={},null!=(a=tx(t,["predictionsFormat"]))&&t_(s,["format"],a),null!=(u=tx(t,["gcsDestination","outputUriPrefix"]))&&t_(s,["gcsUri"],u),null!=(p=tx(t,["bigqueryDestination","outputUri"]))&&t_(s,["bigqueryUri"],p),s));let I=tx(e,["completionStats"]);return null!=I&&t_(d,["completionStats"],I),d}function nb(e){let t={},n=tx(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,p,d,c,h;return n={},null!=(i=tx(t=e,["mediaResolution"]))&&t_(n,["mediaResolution"],i),null!=(r=tx(t,["codeExecutionResult"]))&&t_(n,["codeExecutionResult"],r),null!=(l=tx(t,["executableCode"]))&&t_(n,["executableCode"],l),null!=(o=tx(t,["fileData"]))&&t_(n,["fileData"],function(e){let t={};if(void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=tx(e,["fileUri"]);null!=n&&t_(t,["fileUri"],n);let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(o)),null!=(s=tx(t,["functionCall"]))&&t_(n,["functionCall"],function(e){let t={},n=tx(e,["id"]);null!=n&&t_(t,["id"],n);let i=tx(e,["args"]);null!=i&&t_(t,["args"],i);let r=tx(e,["name"]);if(null!=r&&t_(t,["name"],r),void 0!==tx(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==tx(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=tx(t,["functionResponse"]))&&t_(n,["functionResponse"],a),null!=(u=tx(t,["inlineData"]))&&t_(n,["inlineData"],function(e){let t={},n=tx(e,["data"]);if(null!=n&&t_(t,["data"],n),void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(u)),null!=(p=tx(t,["text"]))&&t_(n,["text"],p),null!=(d=tx(t,["thought"]))&&t_(n,["thought"],d),null!=(c=tx(t,["thoughtSignature"]))&&t_(n,["thoughtSignature"],c),null!=(h=tx(t,["videoMetadata"]))&&t_(n,["videoMetadata"],h),n})),t_(t,["parts"],e)}let i=tx(e,["role"]);return null!=i&&t_(t,["role"],i),t}function nE(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["src"]);null!=r&&t_(n,["batch","inputConfig"],function(e,t){let n={};if(void 0!==tx(t,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==tx(t,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==tx(t,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let i=tx(t,["fileName"]);null!=i&&t_(n,["fileName"],i);let r=tx(t,["inlinedRequests"]);if(null!=r){let t=r;Array.isArray(t)&&(t=t.map(t=>(function(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["request","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let e=nn(r);Array.isArray(e)&&(e=e.map(e=>nb(e))),t_(n,["request","contents"],e)}let l=tx(t,["metadata"]);null!=l&&t_(n,["metadata"],l);let o=tx(t,["config"]);return null!=o&&t_(n,["request","generationConfig"],function(e,t,n){var i;let r,l,o,s={},a=tx(t,["systemInstruction"]);void 0!==n&&null!=a&&t_(n,["systemInstruction"],nb(ne(a)));let u=tx(t,["temperature"]);null!=u&&t_(s,["temperature"],u);let p=tx(t,["topP"]);null!=p&&t_(s,["topP"],p);let d=tx(t,["topK"]);null!=d&&t_(s,["topK"],d);let c=tx(t,["candidateCount"]);null!=c&&t_(s,["candidateCount"],c);let h=tx(t,["maxOutputTokens"]);null!=h&&t_(s,["maxOutputTokens"],h);let m=tx(t,["stopSequences"]);null!=m&&t_(s,["stopSequences"],m);let f=tx(t,["responseLogprobs"]);null!=f&&t_(s,["responseLogprobs"],f);let g=tx(t,["logprobs"]);null!=g&&t_(s,["logprobs"],g);let y=tx(t,["presencePenalty"]);null!=y&&t_(s,["presencePenalty"],y);let v=tx(t,["frequencyPenalty"]);null!=v&&t_(s,["frequencyPenalty"],v);let b=tx(t,["seed"]);null!=b&&t_(s,["seed"],b);let E=tx(t,["responseMimeType"]);null!=E&&t_(s,["responseMimeType"],E);let _=tx(t,["responseSchema"]);null!=_&&t_(s,["responseSchema"],ni(_));let x=tx(t,["responseJsonSchema"]);if(null!=x&&t_(s,["responseJsonSchema"],x),void 0!==tx(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==tx(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let I=tx(t,["safetySettings"]);if(void 0!==n&&null!=I){let e=I;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["category"]);if(null!=n&&t_(t,["category"],n),void 0!==tx(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let i=tx(e,["threshold"]);return null!=i&&t_(t,["threshold"],i),t})(e))),t_(n,["safetySettings"],e)}let T=tx(t,["tools"]);if(void 0!==n&&null!=T){let e=ns(T);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["functionDeclarations"],e)}if(void 0!==tx(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=tx(e,["googleSearchRetrieval"]);null!=i&&t_(t,["googleSearchRetrieval"],i);let r=tx(e,["computerUse"]);null!=r&&t_(t,["computerUse"],r);let l=tx(e,["fileSearch"]);null!=l&&t_(t,["fileSearch"],l);let o=tx(e,["codeExecution"]);if(null!=o&&t_(t,["codeExecution"],o),void 0!==tx(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=tx(e,["googleMaps"]);null!=s&&t_(t,["googleMaps"],function(e){let t={};if(void 0!==tx(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=tx(e,["enableWidget"]);return null!=n&&t_(t,["enableWidget"],n),t}(s));let a=tx(e,["googleSearch"]);null!=a&&t_(t,["googleSearch"],function(e){let t={};if(void 0!==tx(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==tx(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=tx(e,["timeRangeFilter"]);return null!=n&&t_(t,["timeRangeFilter"],n),t}(a));let u=tx(e,["urlContext"]);return null!=u&&t_(t,["urlContext"],u),t})(no(e)))),t_(n,["tools"],e)}let A=tx(t,["toolConfig"]);if(void 0!==n&&null!=A&&t_(n,["toolConfig"],(r={},null!=(l=tx(i=A,["functionCallingConfig"]))&&t_(r,["functionCallingConfig"],function(e){let t={},n=tx(e,["mode"]);null!=n&&t_(t,["mode"],n);let i=tx(e,["allowedFunctionNames"]);if(null!=i&&t_(t,["allowedFunctionNames"],i),void 0!==tx(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(l)),null!=(o=tx(i,["retrievalConfig"]))&&t_(r,["retrievalConfig"],o),r)),void 0!==tx(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let S=tx(t,["cachedContent"]);void 0!==n&&null!=S&&t_(n,["cachedContent"],na(e,S));let C=tx(t,["responseModalities"]);null!=C&&t_(s,["responseModalities"],C);let O=tx(t,["mediaResolution"]);null!=O&&t_(s,["mediaResolution"],O);let N=tx(t,["speechConfig"]);if(null!=N&&t_(s,["speechConfig"],nr(N)),void 0!==tx(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let w=tx(t,["thinkingConfig"]);null!=w&&t_(s,["thinkingConfig"],w);let R=tx(t,["imageConfig"]);null!=R&&t_(s,["imageConfig"],function(e){let t={},n=tx(e,["aspectRatio"]);null!=n&&t_(t,["aspectRatio"],n);let i=tx(e,["imageSize"]);if(null!=i&&t_(t,["imageSize"],i),void 0!==tx(e,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==tx(e,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(R));let P=tx(t,["enableEnhancedCivicAnswers"]);return null!=P&&t_(s,["enableEnhancedCivicAnswers"],P),s}(e,o,tx(n,["request"],{}))),n})(e,t))),t_(n,["requests","requests"],t)}return n}(e,nh(e,r)));let l=tx(t,["config"]);return null!=l&&function(e,t){let n=tx(e,["displayName"]);if(void 0!==t&&null!=n&&t_(t,["batch","displayName"],n),void 0!==tx(e,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(l,n),n}(ea=tt||(tt={})).PAGED_ITEM_BATCH_JOBS="batchJobs",ea.PAGED_ITEM_MODELS="models",ea.PAGED_ITEM_TUNING_JOBS="tuningJobs",ea.PAGED_ITEM_FILES="files",ea.PAGED_ITEM_CACHED_CONTENTS="cachedContents",ea.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",ea.PAGED_ITEM_DOCUMENTS="documents";class n_{constructor(e,t,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,i)}init(e,t,n){var i,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};(l=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}}).config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=null!=(r=null==(i=l.config)?void 0:i.pageSize)?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return(null==(e=this.params.config)?void 0:e.pageToken)!==void 0}}class nx extends tb{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new n_(tt.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){let t=nE(this.apiClient,e),n=tE("{model}:batchGenerateContent",t._url),i=t.batch.inputConfig.requests,r=i.requests,l=[];for(let e of r){let t=Object.assign({},e);if(t.systemInstruction){let e=t.systemInstruction;delete t.systemInstruction;let n=t.request;n.systemInstruction=e,t.request=n}l.push(t)}return i.requests=l,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){let n=t?Object.assign({},t):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),void 0===n.dest){let t=this.getGcsUri(e),r=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest=`${t.slice(0,-6)}/dest`:n.dest=`${t}_dest_${i}`;else if(r)n.dest=`${r}_dest_${i}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI()){let i,r,a,u,p,d,c=(l=this.apiClient,i={},null!=(r=tx(e,["model"]))&&t_(i,["model"],tZ(l,r)),null!=(a=tx(e,["src"]))&&t_(i,["inputConfig"],function(e){let t={},n=tx(e,["format"]);null!=n&&t_(t,["instancesFormat"],n);let i=tx(e,["gcsUri"]);null!=i&&t_(t,["gcsSource","uris"],i);let r=tx(e,["bigqueryUri"]);if(null!=r&&t_(t,["bigquerySource","inputUri"],r),void 0!==tx(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==tx(e,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(nh(l,a))),null!=(u=tx(e,["config"]))&&(p=tx(u,["displayName"]),void 0!==i&&null!=p&&t_(i,["displayName"],p),d=tx(u,["dest"]),void 0!==i&&null!=d&&t_(i,["outputConfig"],function(e){let t={},n=tx(e,["format"]);null!=n&&t_(t,["predictionsFormat"],n);let i=tx(e,["gcsUri"]);null!=i&&t_(t,["gcsDestination","outputUriPrefix"],i);let r=tx(e,["bigqueryUri"]);if(null!=r&&t_(t,["bigqueryDestination","outputUri"],r),void 0!==tx(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==tx(e,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==tx(e,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw Error(`Unsupported destination: ${e}`)}(d)))),i);return o=tE("batchPredictionJobs",c._url),s=c._query,delete c._url,delete c._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>nv(e))}{let t=nE(this.apiClient,e);return o=tE("{model}:batchGenerateContent",t._url),s=t._query,delete t._url,delete t._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>ny(e))}}async createEmbeddingsInternal(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let a,u,p,d,c,h,m,f,g=(i=this.apiClient,d={},null!=(c=tx(e,["model"]))&&t_(d,["_url","model"],tZ(i,c)),null!=(h=tx(e,["src"]))&&t_(d,["batch","inputConfig"],(r=i,a={},null!=(u=tx(l=h,["fileName"]))&&t_(a,["file_name"],u),null!=(p=tx(l,["inlinedRequests"]))&&t_(a,["requests"],function(e,t){let n={},i=tx(t,["contents"]);if(null!=i){let t=nt(e,i);Array.isArray(t)&&(t=t.map(e=>e)),t_(n,["requests[]","request","content"],t)}let r=tx(t,["config"]);return null!=r&&(t_(n,["_self"],function(e,t){let n=tx(e,["taskType"]);void 0!==t&&null!=n&&t_(t,["requests[]","taskType"],n);let i=tx(e,["title"]);void 0!==t&&null!=i&&t_(t,["requests[]","title"],i);let r=tx(e,["outputDimensionality"]);if(void 0!==t&&null!=r&&t_(t,["requests[]","outputDimensionality"],r),void 0!==tx(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==tx(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(r,n)),!function(e,t){for(let[n,i]of Object.entries(t)){let t=n.split("."),r=i.split("."),l=new Set,o=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){o=e;break}if(-1!==o&&r.length>o)for(let e=o;e<r.length;e++){let t=r[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||l.add(t)}!function e(t,n,i,r,l){if(r>=n.length||"object"!=typeof t||null===t)return;let o=n[r];if(o.endsWith("[]")){let s=o.slice(0,-2);if(s in t&&Array.isArray(t[s]))for(let o of t[s])e(o,n,i,r+1,l)}else if("*"===o){if("object"==typeof t&&null!==t&&!Array.isArray(t)){let e=Object.keys(t).filter(e=>!e.startsWith("_")&&!l.has(e)),n={};for(let i of e)n[i]=t[i];for(let[e,l]of Object.entries(n)){let n=[];for(let t of i.slice(r))"*"===t?n.push(e):n.push(t);t_(t,n,l)}for(let n of e)delete t[n]}}else o in t&&e(t[o],n,i,r+1,l)}(e,t,r,0,l)}}(n,{"requests[].*":"requests[].request.*"})),n}(r,p)),a)),null!=(m=tx(e,["config"]))&&(f=tx(m,["displayName"]),void 0!==d&&null!=f&&t_(d,["batch","displayName"],f)),d);return o=tE("{model}:asyncBatchEmbedContent",g._url),s=g._query,delete g._url,delete g._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>ny(e))}}async get(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],nf(l,r)),i);return s=tE("batchPredictionJobs/{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>nv(e))}{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],nf(o,n)),t);return s=tE("batches/{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>ny(e))}}async cancel(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],nf(l,r)),i);s=tE("batchPredictionJobs/{name}:cancel",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}else{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],nf(o,n)),t);s=tE("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal})}}async listInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s,a,u,p=(i={},null!=(r=tx(e,["config"]))&&(s=tx(r,["pageSize"]),void 0!==i&&null!=s&&t_(i,["_query","pageSize"],s),a=tx(r,["pageToken"]),void 0!==i&&null!=a&&t_(i,["_query","pageToken"],a),u=tx(r,["filter"]),void 0!==i&&null!=u&&t_(i,["_query","filter"],u)),i);return l=tE("batchPredictionJobs",p._url),o=p._query,delete p._url,delete p._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["batchPredictionJobs"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>nv(e))),t_(t,["batchJobs"],e)}return t}(e),n=new tK;return Object.assign(n,t),n})}{let t,n,s=(t={},null!=(n=tx(e,["config"]))&&function(e,t){let n=tx(e,["pageSize"]);void 0!==t&&null!=n&&t_(t,["_query","pageSize"],n);let i=tx(e,["pageToken"]);if(void 0!==t&&null!=i&&t_(t,["_query","pageToken"],i),void 0!==tx(e,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(n,t),t);return l=tE("batches",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["operations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>ny(e))),t_(t,["batchJobs"],e)}return t}(e),n=new tK;return Object.assign(n,t),n})}}async delete(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],nf(l,r)),i);return s=tE("batchPredictionJobs/{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l;return t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),null!=(i=tx(e,["name"]))&&t_(t,["name"],i),null!=(r=tx(e,["done"]))&&t_(t,["done"],r),null!=(l=tx(e,["error"]))&&t_(t,["error"],l),t})}{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],nf(o,n)),t);return s=tE("batches/{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l;return t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),null!=(i=tx(e,["name"]))&&t_(t,["name"],i),null!=(r=tx(e,["done"]))&&t_(t,["done"],r),null!=(l=tx(e,["error"]))&&t_(t,["error"],l),t})}}}function nI(e){let t={},n=tx(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,p,d,c,h;return n={},null!=(i=tx(t=e,["mediaResolution"]))&&t_(n,["mediaResolution"],i),null!=(r=tx(t,["codeExecutionResult"]))&&t_(n,["codeExecutionResult"],r),null!=(l=tx(t,["executableCode"]))&&t_(n,["executableCode"],l),null!=(o=tx(t,["fileData"]))&&t_(n,["fileData"],function(e){let t={};if(void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=tx(e,["fileUri"]);null!=n&&t_(t,["fileUri"],n);let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(o)),null!=(s=tx(t,["functionCall"]))&&t_(n,["functionCall"],function(e){let t={},n=tx(e,["id"]);null!=n&&t_(t,["id"],n);let i=tx(e,["args"]);null!=i&&t_(t,["args"],i);let r=tx(e,["name"]);if(null!=r&&t_(t,["name"],r),void 0!==tx(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==tx(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=tx(t,["functionResponse"]))&&t_(n,["functionResponse"],a),null!=(u=tx(t,["inlineData"]))&&t_(n,["inlineData"],function(e){let t={},n=tx(e,["data"]);if(null!=n&&t_(t,["data"],n),void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(u)),null!=(p=tx(t,["text"]))&&t_(n,["text"],p),null!=(d=tx(t,["thought"]))&&t_(n,["thought"],d),null!=(c=tx(t,["thoughtSignature"]))&&t_(n,["thoughtSignature"],c),null!=(h=tx(t,["videoMetadata"]))&&t_(n,["videoMetadata"],h),n})),t_(t,["parts"],e)}let i=tx(e,["role"]);return null!=i&&t_(t,["role"],i),t}class nT extends tb{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new n_(tt.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u=(l=this.apiClient,i={},null!=(r=tx(e,["model"]))&&t_(i,["model"],t0(l,r)),null!=(o=tx(e,["config"]))&&function(e,t){let n=tx(e,["ttl"]);void 0!==t&&null!=n&&t_(t,["ttl"],n);let i=tx(e,["expireTime"]);void 0!==t&&null!=i&&t_(t,["expireTime"],i);let r=tx(e,["displayName"]);void 0!==t&&null!=r&&t_(t,["displayName"],r);let l=tx(e,["contents"]);if(void 0!==t&&null!=l){let e=nn(l);Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["contents"],e)}let o=tx(e,["systemInstruction"]);void 0!==t&&null!=o&&t_(t,["systemInstruction"],ne(o));let s=tx(e,["tools"]);if(void 0!==t&&null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==tx(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=tx(e,["description"]);null!=n&&t_(t,["description"],n);let i=tx(e,["name"]);null!=i&&t_(t,["name"],i);let r=tx(e,["parameters"]);null!=r&&t_(t,["parameters"],r);let l=tx(e,["parametersJsonSchema"]);null!=l&&t_(t,["parametersJsonSchema"],l);let o=tx(e,["response"]);null!=o&&t_(t,["response"],o);let s=tx(e,["responseJsonSchema"]);return null!=s&&t_(t,["responseJsonSchema"],s),t})(e))),t_(t,["functionDeclarations"],e)}let i=tx(e,["retrieval"]);null!=i&&t_(t,["retrieval"],i);let r=tx(e,["googleSearchRetrieval"]);null!=r&&t_(t,["googleSearchRetrieval"],r);let l=tx(e,["computerUse"]);if(null!=l&&t_(t,["computerUse"],l),void 0!==tx(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let o=tx(e,["codeExecution"]);null!=o&&t_(t,["codeExecution"],o);let s=tx(e,["enterpriseWebSearch"]);null!=s&&t_(t,["enterpriseWebSearch"],s);let a=tx(e,["googleMaps"]);null!=a&&t_(t,["googleMaps"],a);let u=tx(e,["googleSearch"]);null!=u&&t_(t,["googleSearch"],u);let p=tx(e,["urlContext"]);return null!=p&&t_(t,["urlContext"],p),t})(e))),t_(t,["tools"],e)}let a=tx(e,["toolConfig"]);void 0!==t&&null!=a&&t_(t,["toolConfig"],a);let u=tx(e,["kmsKeyName"]);void 0!==t&&null!=u&&t_(t,["encryption_spec","kmsKeyName"],u)}(o,i),i);return s=tE("cachedContents",u._url),a=u._query,delete u._url,delete u._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,n,l,u=(o=this.apiClient,t={},null!=(n=tx(e,["model"]))&&t_(t,["model"],t0(o,n)),null!=(l=tx(e,["config"]))&&function(e,t){var n;let i,r,l,o=tx(e,["ttl"]);void 0!==t&&null!=o&&t_(t,["ttl"],o);let s=tx(e,["expireTime"]);void 0!==t&&null!=s&&t_(t,["expireTime"],s);let a=tx(e,["displayName"]);void 0!==t&&null!=a&&t_(t,["displayName"],a);let u=tx(e,["contents"]);if(void 0!==t&&null!=u){let e=nn(u);Array.isArray(e)&&(e=e.map(e=>nI(e))),t_(t,["contents"],e)}let p=tx(e,["systemInstruction"]);void 0!==t&&null!=p&&t_(t,["systemInstruction"],nI(ne(p)));let d=tx(e,["tools"]);if(void 0!==t&&null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["functionDeclarations"],e)}if(void 0!==tx(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=tx(e,["googleSearchRetrieval"]);null!=i&&t_(t,["googleSearchRetrieval"],i);let r=tx(e,["computerUse"]);null!=r&&t_(t,["computerUse"],r);let l=tx(e,["fileSearch"]);null!=l&&t_(t,["fileSearch"],l);let o=tx(e,["codeExecution"]);if(null!=o&&t_(t,["codeExecution"],o),void 0!==tx(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=tx(e,["googleMaps"]);null!=s&&t_(t,["googleMaps"],function(e){let t={};if(void 0!==tx(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=tx(e,["enableWidget"]);return null!=n&&t_(t,["enableWidget"],n),t}(s));let a=tx(e,["googleSearch"]);null!=a&&t_(t,["googleSearch"],function(e){let t={};if(void 0!==tx(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==tx(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=tx(e,["timeRangeFilter"]);return null!=n&&t_(t,["timeRangeFilter"],n),t}(a));let u=tx(e,["urlContext"]);return null!=u&&t_(t,["urlContext"],u),t})(e))),t_(t,["tools"],e)}let c=tx(e,["toolConfig"]);if(void 0!==t&&null!=c&&t_(t,["toolConfig"],(i={},null!=(r=tx(n=c,["functionCallingConfig"]))&&t_(i,["functionCallingConfig"],function(e){let t={},n=tx(e,["mode"]);null!=n&&t_(t,["mode"],n);let i=tx(e,["allowedFunctionNames"]);if(null!=i&&t_(t,["allowedFunctionNames"],i),void 0!==tx(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(r)),null!=(l=tx(n,["retrievalConfig"]))&&t_(i,["retrievalConfig"],l),i)),void 0!==tx(e,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(l,t),t);return s=tE("cachedContents",u._url),a=u._query,delete u._url,delete u._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async get(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],na(l,r)),i);return s=tE("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],na(o,n)),t);return s=tE("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],na(l,r)),i);return s=tE("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tG;return Object.assign(r,i),r})}{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],na(o,n)),t);return s=tE("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tG;return Object.assign(r,i),r})}}async update(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,p,d=(l=this.apiClient,i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],na(l,r)),null!=(o=tx(e,["config"]))&&(u=tx(o,["ttl"]),void 0!==i&&null!=u&&t_(i,["ttl"],u),p=tx(o,["expireTime"]),void 0!==i&&null!=p&&t_(i,["expireTime"],p)),i);return s=tE("{name}",d._url),a=d._query,delete d._url,delete d._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,n,l,u,p,d=(o=this.apiClient,t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],na(o,n)),null!=(l=tx(e,["config"]))&&(u=tx(l,["ttl"]),void 0!==t&&null!=u&&t_(t,["ttl"],u),p=tx(l,["expireTime"]),void 0!==t&&null!=p&&t_(t,["expireTime"],p)),t);return s=tE("{name}",d._url),a=d._query,delete d._url,delete d._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async listInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s,a,u=(i={},null!=(r=tx(e,["config"]))&&(s=tx(r,["pageSize"]),void 0!==i&&null!=s&&t_(i,["_query","pageSize"],s),a=tx(r,["pageToken"]),void 0!==i&&null!=a&&t_(i,["_query","pageToken"],a)),i);return l=tE("cachedContents",u._url),o=u._query,delete u._url,delete u._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["cachedContents"],e)}return t}(e),n=new tH;return Object.assign(n,t),n})}{let t,n,s,a,u=(t={},null!=(n=tx(e,["config"]))&&(s=tx(n,["pageSize"]),void 0!==t&&null!=s&&t_(t,["_query","pageSize"],s),a=tx(n,["pageToken"]),void 0!==t&&null!=a&&t_(t,["_query","pageToken"],a)),t);return l=tE("cachedContents",u._url),o=u._query,delete u._url,delete u._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["cachedContents"],e)}return t}(e),n=new tH;return Object.assign(n,t),n})}}}function nA(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function nS(e){return this instanceof nS?(this.v=e,this):new nS(e)}function nC(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),l=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),i[Symbol.asyncIterator]=function(){return this},i;function o(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,i){l.push([e,t,n,i])>1||s(e,t)})},t&&(i[e]=t(i[e])))}function s(e,t){try{var n;(n=r[e](t)).value instanceof nS?Promise.resolve(n.value.v).then(a,u):p(l[0][2],n)}catch(e){p(l[0][3],e)}}function a(e){s("next",e)}function u(e){s("throw",e)}function p(e,t){e(t),l.shift(),l.length&&s(l[0][0],l[0][1])}}function nO(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,r){var l,o,s;l=i,o=r,s=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){l({value:e,done:s})},o)})}}}function nN(e){if(void 0===e.parts||0===e.parts.length)return!1;for(let t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function nw(e){if(void 0===e||0===e.length)return[];let t=[],n=e.length,i=0;for(;i<n;)if("user"===e[i].role)t.push(e[i]),i++;else{let r=[],l=!0;for(;i<n&&"model"===e[i].role;)r.push(e[i]),l&&!nN(e[i])&&(l=!1),i++;l?t.push(...r):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class nR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new nP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nP{constructor(e,t,n,i={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length){for(let t of e)if("user"!==t.role&&"model"!==t.role)throw Error(`Role must be user or model, but got ${t.role}.`)}}(r)}async sendMessage(e){var t;await this.sendPromise;let n=ne(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!=(t=e.config)?t:this.config});return this.sendPromise=(async()=>{var e,t,r;let l=await i,o=null==(t=null==(e=l.candidates)?void 0:e[0])?void 0:t.content,s=l.automaticFunctionCallingHistory,a=this.getHistory(!0).length,u=[];null!=s&&(u=null!=(r=s.slice(a))?r:[]),this.recordHistory(n,o?[o]:[],u)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;let n=ne(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!=(t=e.config)?t:this.config});this.sendPromise=i.then(()=>void 0).catch(()=>void 0);let r=await i;return this.processStreamResponse(r,n)}getHistory(e=!1){return structuredClone(e?nw(this.history):this.history)}processStreamResponse(e,t){return nC(this,arguments,function*(){let n=[];try{for(var i,r,l,o,s,a,u,p=!0,d=nO(e);!(i=(u=yield nS(d.next())).done);p=!0){if(o=u.value,p=!1,function(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;let n=null==(t=e.candidates[0])?void 0:t.content;return void 0!==n&&nN(n)}(o)){let e=null==(a=null==(s=o.candidates)?void 0:s[0])?void 0:a.content;void 0!==e&&n.push(e)}yield yield nS(o)}}catch(e){r={error:e}}finally{try{!p&&!i&&(l=d.return)&&(yield nS(l.call(d)))}finally{if(r)throw r.error}}this.recordHistory(t,n)})}recordHistory(e,t,n){let i=[];t.length>0&&t.every(e=>void 0!==e.role)?i=t:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...nw(n)):this.history.push(e),this.history.push(...i)}}class nj extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nj.prototype)}}class nM extends tb{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new n_(tt.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=tx(e,["config"]))&&(s=tx(o,["pageSize"]),void 0!==l&&null!=s&&t_(l,["_query","pageSize"],s),a=tx(o,["pageToken"]),void 0!==l&&null!=a&&t_(l,["_query","pageToken"],a)),l);return i=tE("files",u._url),r=u._query,delete u._url,delete u._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["files"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["files"],e)}return t}(e),n=new t$;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=tx(e,["file"]))&&t_(l,["file"],o),l);return i=tE("upload/v1beta/files",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tW;return Object.assign(r,i),r})}}async get(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=tx(e,["name"]))&&t_(l,["_url","file"],np(o)),l);return i=tE("files/{file}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=tx(e,["name"]))&&t_(l,["_url","file"],np(o)),l);return i=tE("files/{file}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tY;return Object.assign(r,i),r})}}}function nk(e){let t={},n=tx(e,["data"]);if(null!=n&&t_(t,["data"],n),void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}function nD(e){let t={},n=tx(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,p,d,c,h;return n={},null!=(i=tx(t=e,["mediaResolution"]))&&t_(n,["mediaResolution"],i),null!=(r=tx(t,["codeExecutionResult"]))&&t_(n,["codeExecutionResult"],r),null!=(l=tx(t,["executableCode"]))&&t_(n,["executableCode"],l),null!=(o=tx(t,["fileData"]))&&t_(n,["fileData"],function(e){let t={};if(void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=tx(e,["fileUri"]);null!=n&&t_(t,["fileUri"],n);let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(o)),null!=(s=tx(t,["functionCall"]))&&t_(n,["functionCall"],function(e){let t={},n=tx(e,["id"]);null!=n&&t_(t,["id"],n);let i=tx(e,["args"]);null!=i&&t_(t,["args"],i);let r=tx(e,["name"]);if(null!=r&&t_(t,["name"],r),void 0!==tx(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==tx(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=tx(t,["functionResponse"]))&&t_(n,["functionResponse"],a),null!=(u=tx(t,["inlineData"]))&&t_(n,["inlineData"],function(e){let t={},n=tx(e,["data"]);if(null!=n&&t_(t,["data"],n),void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(u)),null!=(p=tx(t,["text"]))&&t_(n,["text"],p),null!=(d=tx(t,["thought"]))&&t_(n,["thought"],d),null!=(c=tx(t,["thoughtSignature"]))&&t_(n,["thoughtSignature"],c),null!=(h=tx(t,["videoMetadata"]))&&t_(n,["videoMetadata"],h),n})),t_(t,["parts"],e)}let i=tx(e,["role"]);return null!=i&&t_(t,["role"],i),t}function nU(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let e=nn(r);Array.isArray(e)&&(e=e.map(e=>nD(e))),t_(n,["contents"],e)}let l=tx(t,["config"]);return null!=l&&t_(n,["generationConfig"],function(e,t,n){var i;let r,l,o,s={},a=tx(t,["systemInstruction"]);void 0!==n&&null!=a&&t_(n,["systemInstruction"],nD(ne(a)));let u=tx(t,["temperature"]);null!=u&&t_(s,["temperature"],u);let p=tx(t,["topP"]);null!=p&&t_(s,["topP"],p);let d=tx(t,["topK"]);null!=d&&t_(s,["topK"],d);let c=tx(t,["candidateCount"]);null!=c&&t_(s,["candidateCount"],c);let h=tx(t,["maxOutputTokens"]);null!=h&&t_(s,["maxOutputTokens"],h);let m=tx(t,["stopSequences"]);null!=m&&t_(s,["stopSequences"],m);let f=tx(t,["responseLogprobs"]);null!=f&&t_(s,["responseLogprobs"],f);let g=tx(t,["logprobs"]);null!=g&&t_(s,["logprobs"],g);let y=tx(t,["presencePenalty"]);null!=y&&t_(s,["presencePenalty"],y);let v=tx(t,["frequencyPenalty"]);null!=v&&t_(s,["frequencyPenalty"],v);let b=tx(t,["seed"]);null!=b&&t_(s,["seed"],b);let E=tx(t,["responseMimeType"]);null!=E&&t_(s,["responseMimeType"],E);let _=tx(t,["responseSchema"]);null!=_&&t_(s,["responseSchema"],ni(_));let x=tx(t,["responseJsonSchema"]);if(null!=x&&t_(s,["responseJsonSchema"],x),void 0!==tx(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==tx(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let I=tx(t,["safetySettings"]);if(void 0!==n&&null!=I){let e=I;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["category"]);if(null!=n&&t_(t,["category"],n),void 0!==tx(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let i=tx(e,["threshold"]);return null!=i&&t_(t,["threshold"],i),t})(e))),t_(n,["safetySettings"],e)}let T=tx(t,["tools"]);if(void 0!==n&&null!=T){let e=ns(T);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["functionDeclarations"],e)}if(void 0!==tx(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=tx(e,["googleSearchRetrieval"]);null!=i&&t_(t,["googleSearchRetrieval"],i);let r=tx(e,["computerUse"]);null!=r&&t_(t,["computerUse"],r);let l=tx(e,["fileSearch"]);null!=l&&t_(t,["fileSearch"],l);let o=tx(e,["codeExecution"]);if(null!=o&&t_(t,["codeExecution"],o),void 0!==tx(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=tx(e,["googleMaps"]);null!=s&&t_(t,["googleMaps"],function(e){let t={};if(void 0!==tx(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=tx(e,["enableWidget"]);return null!=n&&t_(t,["enableWidget"],n),t}(s));let a=tx(e,["googleSearch"]);null!=a&&t_(t,["googleSearch"],function(e){let t={};if(void 0!==tx(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==tx(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=tx(e,["timeRangeFilter"]);return null!=n&&t_(t,["timeRangeFilter"],n),t}(a));let u=tx(e,["urlContext"]);return null!=u&&t_(t,["urlContext"],u),t})(no(e)))),t_(n,["tools"],e)}let A=tx(t,["toolConfig"]);if(void 0!==n&&null!=A&&t_(n,["toolConfig"],(r={},null!=(l=tx(i=A,["functionCallingConfig"]))&&t_(r,["functionCallingConfig"],function(e){let t={},n=tx(e,["mode"]);null!=n&&t_(t,["mode"],n);let i=tx(e,["allowedFunctionNames"]);if(null!=i&&t_(t,["allowedFunctionNames"],i),void 0!==tx(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(l)),null!=(o=tx(i,["retrievalConfig"]))&&t_(r,["retrievalConfig"],o),r)),void 0!==tx(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let S=tx(t,["cachedContent"]);void 0!==n&&null!=S&&t_(n,["cachedContent"],na(e,S));let C=tx(t,["responseModalities"]);null!=C&&t_(s,["responseModalities"],C);let O=tx(t,["mediaResolution"]);null!=O&&t_(s,["mediaResolution"],O);let N=tx(t,["speechConfig"]);if(null!=N&&t_(s,["speechConfig"],nr(N)),void 0!==tx(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let w=tx(t,["thinkingConfig"]);null!=w&&t_(s,["thinkingConfig"],w);let R=tx(t,["imageConfig"]);null!=R&&t_(s,["imageConfig"],function(e){let t={},n=tx(e,["aspectRatio"]);null!=n&&t_(t,["aspectRatio"],n);let i=tx(e,["imageSize"]);if(null!=i&&t_(t,["imageSize"],i),void 0!==tx(e,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==tx(e,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(R));let P=tx(t,["enableEnhancedCivicAnswers"]);return null!=P&&t_(s,["enableEnhancedCivicAnswers"],P),s}(e,l,n)),n}function nL(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let e=nn(r);Array.isArray(e)&&(e=e.map(e=>e)),t_(n,["contents"],e)}let l=tx(t,["config"]);return null!=l&&t_(n,["generationConfig"],function(e,t,n){var i;let r,l,o,s,a,u={},p=tx(t,["systemInstruction"]);void 0!==n&&null!=p&&t_(n,["systemInstruction"],ne(p));let d=tx(t,["temperature"]);null!=d&&t_(u,["temperature"],d);let c=tx(t,["topP"]);null!=c&&t_(u,["topP"],c);let h=tx(t,["topK"]);null!=h&&t_(u,["topK"],h);let m=tx(t,["candidateCount"]);null!=m&&t_(u,["candidateCount"],m);let f=tx(t,["maxOutputTokens"]);null!=f&&t_(u,["maxOutputTokens"],f);let g=tx(t,["stopSequences"]);null!=g&&t_(u,["stopSequences"],g);let y=tx(t,["responseLogprobs"]);null!=y&&t_(u,["responseLogprobs"],y);let v=tx(t,["logprobs"]);null!=v&&t_(u,["logprobs"],v);let b=tx(t,["presencePenalty"]);null!=b&&t_(u,["presencePenalty"],b);let E=tx(t,["frequencyPenalty"]);null!=E&&t_(u,["frequencyPenalty"],E);let _=tx(t,["seed"]);null!=_&&t_(u,["seed"],_);let x=tx(t,["responseMimeType"]);null!=x&&t_(u,["responseMimeType"],x);let I=tx(t,["responseSchema"]);null!=I&&t_(u,["responseSchema"],ni(I));let T=tx(t,["responseJsonSchema"]);null!=T&&t_(u,["responseJsonSchema"],T);let A=tx(t,["routingConfig"]);null!=A&&t_(u,["routingConfig"],A);let S=tx(t,["modelSelectionConfig"]);null!=S&&t_(u,["modelConfig"],S);let C=tx(t,["safetySettings"]);if(void 0!==n&&null!=C){let e=C;Array.isArray(e)&&(e=e.map(e=>e)),t_(n,["safetySettings"],e)}let O=tx(t,["tools"]);if(void 0!==n&&null!=O){let e=ns(O);Array.isArray(e)&&(e=e.map(e=>nK(no(e)))),t_(n,["tools"],e)}let N=tx(t,["toolConfig"]);void 0!==n&&null!=N&&t_(n,["toolConfig"],N);let w=tx(t,["labels"]);void 0!==n&&null!=w&&t_(n,["labels"],w);let R=tx(t,["cachedContent"]);void 0!==n&&null!=R&&t_(n,["cachedContent"],na(e,R));let P=tx(t,["responseModalities"]);null!=P&&t_(u,["responseModalities"],P);let j=tx(t,["mediaResolution"]);null!=j&&t_(u,["mediaResolution"],j);let M=tx(t,["speechConfig"]);null!=M&&t_(u,["speechConfig"],nr(M));let k=tx(t,["audioTimestamp"]);null!=k&&t_(u,["audioTimestamp"],k);let D=tx(t,["thinkingConfig"]);null!=D&&t_(u,["thinkingConfig"],D);let U=tx(t,["imageConfig"]);if(null!=U&&t_(u,["imageConfig"],(r={},null!=(l=tx(i=U,["aspectRatio"]))&&t_(r,["aspectRatio"],l),null!=(o=tx(i,["imageSize"]))&&t_(r,["imageSize"],o),null!=(s=tx(i,["outputMimeType"]))&&t_(r,["imageOutputOptions","mimeType"],s),null!=(a=tx(i,["outputCompressionQuality"]))&&t_(r,["imageOutputOptions","compressionQuality"],a),r)),void 0!==tx(t,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return u}(e,l,n)),n}function nq(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["content"]);null!=n&&t_(t,["content"],n);let i=tx(e,["citationMetadata"]);null!=i&&t_(t,["citationMetadata"],function(e){let t={},n=tx(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["citations"],e)}return t}(i));let r=tx(e,["tokenCount"]);null!=r&&t_(t,["tokenCount"],r);let l=tx(e,["finishReason"]);null!=l&&t_(t,["finishReason"],l);let o=tx(e,["avgLogprobs"]);null!=o&&t_(t,["avgLogprobs"],o);let s=tx(e,["groundingMetadata"]);null!=s&&t_(t,["groundingMetadata"],s);let a=tx(e,["index"]);null!=a&&t_(t,["index"],a);let u=tx(e,["logprobsResult"]);null!=u&&t_(t,["logprobsResult"],u);let p=tx(e,["safetyRatings"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["safetyRatings"],e)}let d=tx(e,["urlContextMetadata"]);return null!=d&&t_(t,["urlContextMetadata"],d),t})(e))),t_(t,["candidates"],e)}let r=tx(e,["modelVersion"]);null!=r&&t_(t,["modelVersion"],r);let l=tx(e,["promptFeedback"]);null!=l&&t_(t,["promptFeedback"],l);let o=tx(e,["responseId"]);null!=o&&t_(t,["responseId"],o);let s=tx(e,["usageMetadata"]);return null!=s&&t_(t,["usageMetadata"],s),t}function nG(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["candidates"],e)}let r=tx(e,["createTime"]);null!=r&&t_(t,["createTime"],r);let l=tx(e,["modelVersion"]);null!=l&&t_(t,["modelVersion"],l);let o=tx(e,["promptFeedback"]);null!=o&&t_(t,["promptFeedback"],o);let s=tx(e,["responseId"]);null!=s&&t_(t,["responseId"],s);let a=tx(e,["usageMetadata"]);return null!=a&&t_(t,["usageMetadata"],a),t}function nH(e){let t={},n=tx(e,["_self"]);null!=n&&t_(t,["image"],nF(n));let i=tx(e,["raiFilteredReason"]);null!=i&&t_(t,["raiFilteredReason"],i);let r=tx(e,["_self"]);null!=r&&t_(t,["safetyAttributes"],nY(r));let l=tx(e,["prompt"]);return null!=l&&t_(t,["enhancedPrompt"],l),t}function nF(e){let t={},n=tx(e,["gcsUri"]);null!=n&&t_(t,["gcsUri"],n);let i=tx(e,["bytesBase64Encoded"]);null!=i&&t_(t,["imageBytes"],tI(i));let r=tx(e,["mimeType"]);return null!=r&&t_(t,["mimeType"],r),t}function nV(e){let t={};if(void 0!==tx(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let n=tx(e,["imageBytes"]);null!=n&&t_(t,["bytesBase64Encoded"],tI(n));let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}function nB(e){let t={},n=tx(e,["gcsUri"]);null!=n&&t_(t,["gcsUri"],n);let i=tx(e,["imageBytes"]);null!=i&&t_(t,["bytesBase64Encoded"],tI(i));let r=tx(e,["mimeType"]);return null!=r&&t_(t,["mimeType"],r),t}function nJ(e){var t;let n,i,r,l,o={},s=tx(e,["name"]);null!=s&&t_(o,["name"],s);let a=tx(e,["displayName"]);null!=a&&t_(o,["displayName"],a);let u=tx(e,["description"]);null!=u&&t_(o,["description"],u);let p=tx(e,["version"]);null!=p&&t_(o,["version"],p);let d=tx(e,["_self"]);null!=d&&t_(o,["tunedModelInfo"],(n={},null!=(i=tx(t=d,["baseModel"]))&&t_(n,["baseModel"],i),null!=(r=tx(t,["createTime"]))&&t_(n,["createTime"],r),null!=(l=tx(t,["updateTime"]))&&t_(n,["updateTime"],l),n));let c=tx(e,["inputTokenLimit"]);null!=c&&t_(o,["inputTokenLimit"],c);let h=tx(e,["outputTokenLimit"]);null!=h&&t_(o,["outputTokenLimit"],h);let m=tx(e,["supportedGenerationMethods"]);null!=m&&t_(o,["supportedActions"],m);let f=tx(e,["temperature"]);null!=f&&t_(o,["temperature"],f);let g=tx(e,["maxTemperature"]);null!=g&&t_(o,["maxTemperature"],g);let y=tx(e,["topP"]);null!=y&&t_(o,["topP"],y);let v=tx(e,["topK"]);null!=v&&t_(o,["topK"],v);let b=tx(e,["thinking"]);return null!=b&&t_(o,["thinking"],b),o}function n$(e){var t;let n,i,r,l,o={},s=tx(e,["name"]);null!=s&&t_(o,["name"],s);let a=tx(e,["displayName"]);null!=a&&t_(o,["displayName"],a);let u=tx(e,["description"]);null!=u&&t_(o,["description"],u);let p=tx(e,["versionId"]);null!=p&&t_(o,["version"],p);let d=tx(e,["deployedModels"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>{let t,n,i;return t={},null!=(n=tx(e,["endpoint"]))&&t_(t,["name"],n),null!=(i=tx(e,["deployedModelId"]))&&t_(t,["deployedModelId"],i),t})),t_(o,["endpoints"],e)}let c=tx(e,["labels"]);null!=c&&t_(o,["labels"],c);let h=tx(e,["_self"]);null!=h&&t_(o,["tunedModelInfo"],(n={},null!=(i=tx(t=h,["labels","google-vertex-llm-tuning-base-model-id"]))&&t_(n,["baseModel"],i),null!=(r=tx(t,["createTime"]))&&t_(n,["createTime"],r),null!=(l=tx(t,["updateTime"]))&&t_(n,["updateTime"],l),n));let m=tx(e,["defaultCheckpointId"]);null!=m&&t_(o,["defaultCheckpointId"],m);let f=tx(e,["checkpoints"]);if(null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>e)),t_(o,["checkpoints"],e)}return o}function nW(e){let t={},n=tx(e,["safetyAttributes","categories"]);null!=n&&t_(t,["categories"],n);let i=tx(e,["safetyAttributes","scores"]);null!=i&&t_(t,["scores"],i);let r=tx(e,["contentType"]);return null!=r&&t_(t,["contentType"],r),t}function nY(e){let t={},n=tx(e,["safetyAttributes","categories"]);null!=n&&t_(t,["categories"],n);let i=tx(e,["safetyAttributes","scores"]);null!=i&&t_(t,["scores"],i);let r=tx(e,["contentType"]);return null!=r&&t_(t,["contentType"],r),t}function nK(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==tx(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=tx(e,["description"]);null!=n&&t_(t,["description"],n);let i=tx(e,["name"]);null!=i&&t_(t,["name"],i);let r=tx(e,["parameters"]);null!=r&&t_(t,["parameters"],r);let l=tx(e,["parametersJsonSchema"]);null!=l&&t_(t,["parametersJsonSchema"],l);let o=tx(e,["response"]);null!=o&&t_(t,["response"],o);let s=tx(e,["responseJsonSchema"]);return null!=s&&t_(t,["responseJsonSchema"],s),t})(e))),t_(t,["functionDeclarations"],e)}let i=tx(e,["retrieval"]);null!=i&&t_(t,["retrieval"],i);let r=tx(e,["googleSearchRetrieval"]);null!=r&&t_(t,["googleSearchRetrieval"],r);let l=tx(e,["computerUse"]);if(null!=l&&t_(t,["computerUse"],l),void 0!==tx(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let o=tx(e,["codeExecution"]);null!=o&&t_(t,["codeExecution"],o);let s=tx(e,["enterpriseWebSearch"]);null!=s&&t_(t,["enterpriseWebSearch"],s);let a=tx(e,["googleMaps"]);null!=a&&t_(t,["googleMaps"],a);let u=tx(e,["googleSearch"]);null!=u&&t_(t,["googleSearch"],u);let p=tx(e,["urlContext"]);return null!=p&&t_(t,["urlContext"],p),t}function nz(e){let t={},n=tx(e,["uri"]);null!=n&&t_(t,["uri"],n);let i=tx(e,["videoBytes"]);null!=i&&t_(t,["encodedVideo"],tI(i));let r=tx(e,["mimeType"]);return null!=r&&t_(t,["encoding"],r),t}function nX(e){let t={},n=tx(e,["uri"]);null!=n&&t_(t,["gcsUri"],n);let i=tx(e,["videoBytes"]);null!=i&&t_(t,["bytesBase64Encoded"],tI(i));let r=tx(e,["mimeType"]);return null!=r&&t_(t,["mimeType"],r),t}function nQ(e,t){let n=tx(e,["mimeType"]);void 0!==t&&null!=n&&t_(t,["mimeType"],n);let i=tx(e,["displayName"]);void 0!==t&&null!=i&&t_(t,["displayName"],i);let r=tx(e,["customMetadata"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["customMetadata"],e)}let l=tx(e,["chunkingConfig"]);return void 0!==t&&null!=l&&t_(t,["chunkingConfig"],l),{}}let nZ="x-goog-api-client";class n0{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=null!=(t=this.clientOptions.apiVersion)?t:"v1beta1",i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=null!=(n=this.clientOptions.apiVersion)?n:"v1beta",i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return null!=(e=this.clientOptions.vertexai)&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw Error("HTTP options are not correctly set.");let t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=new URL(this.getBaseUrl());return e.protocol="http:"==e.protocol?"ws":"wss",e.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw Error("HTTP options are not correctly set.")}constructUrl(e,t,n){let i=[this.getRequestUrlInternal(t)];return n&&i.push(this.getBaseResourcePath()),""!==e&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);if(e.queryParams)for(let[t,n]of Object.entries(e.queryParams))i.searchParams.append(t,String(n));let r={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,i.toString(),e.abortSignal),this.unaryApiCall(i,r,e.httpMethod)}patchHttpOptions(e,t){let n=JSON.parse(JSON.stringify(e));for(let[e,i]of Object.entries(t))"object"==typeof i?n[e]=Object.assign(Object.assign({},n[e]),i):void 0!==i&&(n[e]=i);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);i.searchParams.has("alt")&&"sse"===i.searchParams.get("alt")||i.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,i.toString(),e.abortSignal),this.streamApiCall(i,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,i){if(t&&t.timeout||i){let n=new AbortController,r=n.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){let e=setTimeout(()=>n.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}i&&i.addEventListener("abort",()=>{n.abort()}),e.signal=r}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{let t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(e){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}e.body=JSON.stringify(function e(t,n){let i=Object.assign({},t);for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let r=n[t],l=i[t];r&&"object"==typeof r&&!Array.isArray(r)&&l&&"object"==typeof l&&!Array.isArray(l)?i[t]=e(l,r):(l&&r&&typeof l!=typeof r&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${t}". Original type: ${typeof l}, New type: ${typeof r}. Overwriting.`),i[t]=r)}return i}(n,t))}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await n1(e),new tA(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await n1(e),this.processStreamResponse(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}processStreamResponse(e){return nC(this,arguments,function*(){var t;let n=null==(t=null==e?void 0:e.body)?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!n)throw Error("Response body is empty");try{let t="",r="data:",l=["\n\n","\r\r","\r\n\r\n"];for(;;){let{done:o,value:s}=yield nS(n.read());if(o){if(t.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let a=i.decode(s,{stream:!0});try{let e=JSON.parse(a);if("error"in e){let t=JSON.parse(JSON.stringify(e.error)),n=t.status,i=t.code,r=`got status: ${n}. ${JSON.stringify(e)}`;if(i>=400&&i<600)throw new nj({message:r,status:i})}}catch(e){if("ApiError"===e.name)throw e}t+=a;let u=-1,p=0;for(;;){for(let e of(u=-1,p=0,l)){let n=t.indexOf(e);-1!==n&&(-1===u||n<u)&&(u=n,p=e.length)}if(-1===u)break;let n=t.substring(0,u);t=t.substring(u+p);let i=n.trim();if(i.startsWith(r)){let t=i.substring(r.length).trim();try{let n=new Response(t,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield nS(new tA(n))}catch(e){throw Error(`exception parsing stream chunk ${t}. ${e}`)}}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw Error(`exception ${e} sending request`)})}getDefaultHeaders(){let e={},t="google-genai-sdk/1.34.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[nZ]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){let n=new Headers;if(e&&e.headers){for(let[t,i]of Object.entries(e.headers))n.append(t,i);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"==typeof e&&(n=null!=(t=(n=e.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?t:""),n}async uploadFile(e,t){var n;let i={};null!=t&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let r=this.clientOptions.uploader,l=await r.stat(e);i.sizeBytes=String(l.size);let o=null!=(n=null==t?void 0:t.mimeType)?n:l.type;if(void 0===o||""===o)throw Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=o;let s={file:i},a=this.getFileName(e),u=tE("upload/v1beta/files",s._url),p=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,a,s,null==t?void 0:t.httpOptions);return r.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,n){var i;let r=this.clientOptions.uploader,l=await r.stat(t),o=String(l.size),s=null!=(i=null==n?void 0:n.mimeType)?i:l.type;if(void 0===s||""===s)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let a=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(t),p={};null!=n&&nQ(n,p);let d=await this.fetchUploadUrl(a,o,s,u,p,null==n?void 0:n.httpOptions);return r.uploadToFileSearchStore(t,d,this)}async downloadFile(e){let t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,i,r,l){var o;let s={};s=l||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};let a=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!a||!(null==a?void 0:a.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=null==(o=null==a?void 0:a.headers)?void 0:o["x-goog-upload-url"];if(void 0===u)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function n1(e){var t;if(void 0===e)throw Error("response is undefined");if(!e.ok){let n=e.status,i=JSON.stringify((null==(t=e.headers.get("content-type"))?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}});if(n>=400&&n<600)throw new nj({message:i,status:n});throw Error(i)}}function n2(e){for(let n of e){var t;if(null!==(t=n)&&"object"==typeof t&&t instanceof n5||"object"==typeof n&&"inputSchema"in n)return!0}return!1}function n4(e){var t;let n=null!=(t=e[nZ])?t:"";e[nZ]=(n+" mcp_used/unknown").trimStart()}class n5{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n5(e,t)}async initialize(){var e,t,n,i;if(this.mcpTools.length>0)return;let r={},l=[];for(let u of this.mcpClients)try{for(var o,s=!0,a=(t=void 0,nO(function(e){return nC(this,arguments,function*(e,t=100){let n,i=0;for(;i<t;){let t=yield nS(e.listTools({cursor:n}));for(let e of t.tools)yield yield nS(e),i++;if(!t.nextCursor)break;n=t.nextCursor}})}(u)));!(e=(o=await a.next()).done);s=!0){i=o.value,s=!1,l.push(i);let e=i.name;if(r[e])throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);r[e]=u}}catch(e){t={error:e}}finally{try{!s&&!e&&(n=a.return)&&await n.call(a)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),function(e,t={}){let n=[],i=new Set;for(let r of e){let e=r.name;if(i.has(e))throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);i.add(e);let l=function(e,t={}){let n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(n.responseJsonSchema=e.outputSchema),t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}(r,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let e,i=this.functionNameToMcpClient[n.name];this.config.timeout&&(e={timeout:this.config.timeout});let r=await i.callTool({name:n.name,arguments:n.args},void 0,e);t.push({functionResponse:{name:n.name,response:r.isError?{error:r}:r}})}return t}}async function n3(e,t,n){let i=new tX;Object.assign(i,n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data)),t(i)}class n6{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;let i;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),o=function(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),a=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${s}`,u=()=>{},p=new Promise(e=>{u=e}),d=e.callbacks,c=this.apiClient,h={onopen:function(){u({})},onmessage:e=>{n3(c,d.onmessage,e)},onerror:null!=(t=null==d?void 0:d.onerror)?t:function(e){},onclose:null!=(n=null==d?void 0:d.onclose)?n:function(e){}},m=this.webSocketFactory.create(a,(i={},o.forEach((e,t)=>{i[t]=e}),i),h);m.connect(),await p;let f=tZ(this.apiClient,e.model);return m.send(JSON.stringify({setup:{model:f}})),new n8(m,this.apiClient)}}class n8{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let t=function(e){let t={},n=tx(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){let t,n;e.musicGenerationConfig||(e.musicGenerationConfig={});let i=(t={},null!=(n=tx(e,["musicGenerationConfig"]))&&t_(t,["musicGenerationConfig"],n),t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){this.conn.send(JSON.stringify({playbackControl:e}))}play(){this.sendPlaybackControl(te.PLAY)}pause(){this.sendPlaybackControl(te.PAUSE)}stop(){this.sendPlaybackControl(te.STOP)}resetContext(){this.sendPlaybackControl(te.RESET_CONTEXT)}close(){this.conn.close()}}async function n7(e,t,n){let i=new tz,r=JSON.parse(n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data);if(e.isVertexAI()){let e,t,n,l,o,s,a,u,p;Object.assign(i,(e={},null!=(t=tx(r,["setupComplete"]))&&t_(e,["setupComplete"],t),null!=(n=tx(r,["serverContent"]))&&t_(e,["serverContent"],n),null!=(l=tx(r,["toolCall"]))&&t_(e,["toolCall"],l),null!=(o=tx(r,["toolCallCancellation"]))&&t_(e,["toolCallCancellation"],o),null!=(s=tx(r,["usageMetadata"]))&&t_(e,["usageMetadata"],function(e){let t={},n=tx(e,["promptTokenCount"]);null!=n&&t_(t,["promptTokenCount"],n);let i=tx(e,["cachedContentTokenCount"]);null!=i&&t_(t,["cachedContentTokenCount"],i);let r=tx(e,["candidatesTokenCount"]);null!=r&&t_(t,["responseTokenCount"],r);let l=tx(e,["toolUsePromptTokenCount"]);null!=l&&t_(t,["toolUsePromptTokenCount"],l);let o=tx(e,["thoughtsTokenCount"]);null!=o&&t_(t,["thoughtsTokenCount"],o);let s=tx(e,["totalTokenCount"]);null!=s&&t_(t,["totalTokenCount"],s);let a=tx(e,["promptTokensDetails"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["promptTokensDetails"],e)}let u=tx(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["cacheTokensDetails"],e)}let p=tx(e,["candidatesTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["responseTokensDetails"],e)}let d=tx(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["toolUsePromptTokensDetails"],e)}let c=tx(e,["trafficType"]);return null!=c&&t_(t,["trafficType"],c),t}(s)),null!=(a=tx(r,["goAway"]))&&t_(e,["goAway"],a),null!=(u=tx(r,["sessionResumptionUpdate"]))&&t_(e,["sessionResumptionUpdate"],u),null!=(p=tx(r,["voiceActivityDetectionSignal"]))&&t_(e,["voiceActivityDetectionSignal"],p),e))}else Object.assign(i,r);t(i)}class n9{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new n6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,i,r,l,o,s,a;let u,p;if(e.config&&e.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),h=this.apiClient.getHeaders();e.config&&e.config.tools&&n2(e.config.tools)&&n4(h);let m=function(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}(h);if(this.apiClient.isVertexAI())u=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{let e=this.apiClient.getApiKey(),t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==c&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${t}?${n}=${e}`}let f=()=>{},g=new Promise(e=>{f=e}),y=e.callbacks,v=this.apiClient,b={onopen:function(){var e;null==(e=null==y?void 0:y.onopen)||e.call(y),f({})},onmessage:e=>{n7(v,y.onmessage,e)},onerror:null!=(t=null==y?void 0:y.onerror)?t:function(e){},onclose:null!=(n=null==y?void 0:y.onclose)?n:function(e){}},E=this.webSocketFactory.create(u,(p={},m.forEach((e,t)=>{p[t]=e}),p),b);E.connect(),await g;let _=tZ(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){let e=this.apiClient.getProject(),t=this.apiClient.getLocation();_=`projects/${e}/locations/${t}/`+_}let x={};this.apiClient.isVertexAI()&&(null==(i=e.config)?void 0:i.responseModalities)===void 0&&(void 0===e.config?e.config={responseModalities:[eO.AUDIO]}:e.config.responseModalities=[eO.AUDIO]),(null==(r=e.config)?void 0:r.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let I=null!=(o=null==(l=e.config)?void 0:l.tools)?o:[],T=[];for(let e of I)this.isCallableTool(e)?T.push(await e.tool()):T.push(e);T.length>0&&(e.config.tools=T);let A={model:_,config:e.config,callbacks:e.callbacks};if(this.apiClient.isVertexAI()){let e,t,n;s=this.apiClient,e={},null!=(t=tx(A,["model"]))&&t_(e,["setup","model"],tZ(s,t)),null!=(n=tx(A,["config"]))&&t_(e,["config"],function(e,t){let n=tx(e,["generationConfig"]);void 0!==t&&null!=n&&t_(t,["setup","generationConfig"],function(e){let t={},n=tx(e,["modelSelectionConfig"]);null!=n&&t_(t,["modelConfig"],n);let i=tx(e,["responseJsonSchema"]);null!=i&&t_(t,["responseJsonSchema"],i);let r=tx(e,["audioTimestamp"]);null!=r&&t_(t,["audioTimestamp"],r);let l=tx(e,["candidateCount"]);null!=l&&t_(t,["candidateCount"],l);let o=tx(e,["enableAffectiveDialog"]);null!=o&&t_(t,["enableAffectiveDialog"],o);let s=tx(e,["frequencyPenalty"]);null!=s&&t_(t,["frequencyPenalty"],s);let a=tx(e,["logprobs"]);null!=a&&t_(t,["logprobs"],a);let u=tx(e,["maxOutputTokens"]);null!=u&&t_(t,["maxOutputTokens"],u);let p=tx(e,["mediaResolution"]);null!=p&&t_(t,["mediaResolution"],p);let d=tx(e,["presencePenalty"]);null!=d&&t_(t,["presencePenalty"],d);let c=tx(e,["responseLogprobs"]);null!=c&&t_(t,["responseLogprobs"],c);let h=tx(e,["responseMimeType"]);null!=h&&t_(t,["responseMimeType"],h);let m=tx(e,["responseModalities"]);null!=m&&t_(t,["responseModalities"],m);let f=tx(e,["responseSchema"]);null!=f&&t_(t,["responseSchema"],f);let g=tx(e,["routingConfig"]);null!=g&&t_(t,["routingConfig"],g);let y=tx(e,["seed"]);null!=y&&t_(t,["seed"],y);let v=tx(e,["speechConfig"]);null!=v&&t_(t,["speechConfig"],v);let b=tx(e,["stopSequences"]);null!=b&&t_(t,["stopSequences"],b);let E=tx(e,["temperature"]);null!=E&&t_(t,["temperature"],E);let _=tx(e,["thinkingConfig"]);null!=_&&t_(t,["thinkingConfig"],_);let x=tx(e,["topK"]);null!=x&&t_(t,["topK"],x);let I=tx(e,["topP"]);if(null!=I&&t_(t,["topP"],I),void 0!==tx(e,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));let i=tx(e,["responseModalities"]);void 0!==t&&null!=i&&t_(t,["setup","generationConfig","responseModalities"],i);let r=tx(e,["temperature"]);void 0!==t&&null!=r&&t_(t,["setup","generationConfig","temperature"],r);let l=tx(e,["topP"]);void 0!==t&&null!=l&&t_(t,["setup","generationConfig","topP"],l);let o=tx(e,["topK"]);void 0!==t&&null!=o&&t_(t,["setup","generationConfig","topK"],o);let s=tx(e,["maxOutputTokens"]);void 0!==t&&null!=s&&t_(t,["setup","generationConfig","maxOutputTokens"],s);let a=tx(e,["mediaResolution"]);void 0!==t&&null!=a&&t_(t,["setup","generationConfig","mediaResolution"],a);let u=tx(e,["seed"]);void 0!==t&&null!=u&&t_(t,["setup","generationConfig","seed"],u);let p=tx(e,["speechConfig"]);void 0!==t&&null!=p&&t_(t,["setup","generationConfig","speechConfig"],nl(p));let d=tx(e,["thinkingConfig"]);void 0!==t&&null!=d&&t_(t,["setup","generationConfig","thinkingConfig"],d);let c=tx(e,["enableAffectiveDialog"]);void 0!==t&&null!=c&&t_(t,["setup","generationConfig","enableAffectiveDialog"],c);let h=tx(e,["systemInstruction"]);void 0!==t&&null!=h&&t_(t,["setup","systemInstruction"],ne(h));let m=tx(e,["tools"]);if(void 0!==t&&null!=m){let e=ns(m);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==tx(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=tx(e,["description"]);null!=n&&t_(t,["description"],n);let i=tx(e,["name"]);null!=i&&t_(t,["name"],i);let r=tx(e,["parameters"]);null!=r&&t_(t,["parameters"],r);let l=tx(e,["parametersJsonSchema"]);null!=l&&t_(t,["parametersJsonSchema"],l);let o=tx(e,["response"]);null!=o&&t_(t,["response"],o);let s=tx(e,["responseJsonSchema"]);return null!=s&&t_(t,["responseJsonSchema"],s),t})(e))),t_(t,["functionDeclarations"],e)}let i=tx(e,["retrieval"]);null!=i&&t_(t,["retrieval"],i);let r=tx(e,["googleSearchRetrieval"]);null!=r&&t_(t,["googleSearchRetrieval"],r);let l=tx(e,["computerUse"]);if(null!=l&&t_(t,["computerUse"],l),void 0!==tx(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let o=tx(e,["codeExecution"]);null!=o&&t_(t,["codeExecution"],o);let s=tx(e,["enterpriseWebSearch"]);null!=s&&t_(t,["enterpriseWebSearch"],s);let a=tx(e,["googleMaps"]);null!=a&&t_(t,["googleMaps"],a);let u=tx(e,["googleSearch"]);null!=u&&t_(t,["googleSearch"],u);let p=tx(e,["urlContext"]);return null!=p&&t_(t,["urlContext"],p),t})(no(e)))),t_(t,["setup","tools"],e)}let f=tx(e,["sessionResumption"]);void 0!==t&&null!=f&&t_(t,["setup","sessionResumption"],f);let g=tx(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&t_(t,["setup","inputAudioTranscription"],g);let y=tx(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&t_(t,["setup","outputAudioTranscription"],y);let v=tx(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&t_(t,["setup","realtimeInputConfig"],v);let b=tx(e,["contextWindowCompression"]);void 0!==t&&null!=b&&t_(t,["setup","contextWindowCompression"],b);let E=tx(e,["proactivity"]);void 0!==t&&null!=E&&t_(t,["setup","proactivity"],E);let _=tx(e,["explicitVadSignal"]);return void 0!==t&&null!=_&&t_(t,["setup","explicitVadSignal"],_),{}}(n,e)),x=e}else{let e,t,n;a=this.apiClient,e={},null!=(t=tx(A,["model"]))&&t_(e,["setup","model"],tZ(a,t)),null!=(n=tx(A,["config"]))&&t_(e,["config"],function(e,t){let n=tx(e,["generationConfig"]);void 0!==t&&null!=n&&t_(t,["setup","generationConfig"],n);let i=tx(e,["responseModalities"]);void 0!==t&&null!=i&&t_(t,["setup","generationConfig","responseModalities"],i);let r=tx(e,["temperature"]);void 0!==t&&null!=r&&t_(t,["setup","generationConfig","temperature"],r);let l=tx(e,["topP"]);void 0!==t&&null!=l&&t_(t,["setup","generationConfig","topP"],l);let o=tx(e,["topK"]);void 0!==t&&null!=o&&t_(t,["setup","generationConfig","topK"],o);let s=tx(e,["maxOutputTokens"]);void 0!==t&&null!=s&&t_(t,["setup","generationConfig","maxOutputTokens"],s);let a=tx(e,["mediaResolution"]);void 0!==t&&null!=a&&t_(t,["setup","generationConfig","mediaResolution"],a);let u=tx(e,["seed"]);void 0!==t&&null!=u&&t_(t,["setup","generationConfig","seed"],u);let p=tx(e,["speechConfig"]);void 0!==t&&null!=p&&t_(t,["setup","generationConfig","speechConfig"],nl(p));let d=tx(e,["thinkingConfig"]);void 0!==t&&null!=d&&t_(t,["setup","generationConfig","thinkingConfig"],d);let c=tx(e,["enableAffectiveDialog"]);void 0!==t&&null!=c&&t_(t,["setup","generationConfig","enableAffectiveDialog"],c);let h=tx(e,["systemInstruction"]);void 0!==t&&null!=h&&t_(t,["setup","systemInstruction"],function(e){let t={},n=tx(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,p,d,c,h;return n={},null!=(i=tx(t=e,["mediaResolution"]))&&t_(n,["mediaResolution"],i),null!=(r=tx(t,["codeExecutionResult"]))&&t_(n,["codeExecutionResult"],r),null!=(l=tx(t,["executableCode"]))&&t_(n,["executableCode"],l),null!=(o=tx(t,["fileData"]))&&t_(n,["fileData"],function(e){let t={};if(void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=tx(e,["fileUri"]);null!=n&&t_(t,["fileUri"],n);let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(o)),null!=(s=tx(t,["functionCall"]))&&t_(n,["functionCall"],function(e){let t={},n=tx(e,["id"]);null!=n&&t_(t,["id"],n);let i=tx(e,["args"]);null!=i&&t_(t,["args"],i);let r=tx(e,["name"]);if(null!=r&&t_(t,["name"],r),void 0!==tx(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==tx(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=tx(t,["functionResponse"]))&&t_(n,["functionResponse"],a),null!=(u=tx(t,["inlineData"]))&&t_(n,["inlineData"],nk(u)),null!=(p=tx(t,["text"]))&&t_(n,["text"],p),null!=(d=tx(t,["thought"]))&&t_(n,["thought"],d),null!=(c=tx(t,["thoughtSignature"]))&&t_(n,["thoughtSignature"],c),null!=(h=tx(t,["videoMetadata"]))&&t_(n,["videoMetadata"],h),n})),t_(t,["parts"],e)}let i=tx(e,["role"]);return null!=i&&t_(t,["role"],i),t}(ne(h)));let m=tx(e,["tools"]);if(void 0!==t&&null!=m){let e=ns(m);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["functionDeclarations"],e)}if(void 0!==tx(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=tx(e,["googleSearchRetrieval"]);null!=i&&t_(t,["googleSearchRetrieval"],i);let r=tx(e,["computerUse"]);null!=r&&t_(t,["computerUse"],r);let l=tx(e,["fileSearch"]);null!=l&&t_(t,["fileSearch"],l);let o=tx(e,["codeExecution"]);if(null!=o&&t_(t,["codeExecution"],o),void 0!==tx(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=tx(e,["googleMaps"]);null!=s&&t_(t,["googleMaps"],function(e){let t={};if(void 0!==tx(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=tx(e,["enableWidget"]);return null!=n&&t_(t,["enableWidget"],n),t}(s));let a=tx(e,["googleSearch"]);null!=a&&t_(t,["googleSearch"],function(e){let t={};if(void 0!==tx(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==tx(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=tx(e,["timeRangeFilter"]);return null!=n&&t_(t,["timeRangeFilter"],n),t}(a));let u=tx(e,["urlContext"]);return null!=u&&t_(t,["urlContext"],u),t})(no(e)))),t_(t,["setup","tools"],e)}let f=tx(e,["sessionResumption"]);void 0!==t&&null!=f&&t_(t,["setup","sessionResumption"],function(e){let t={},n=tx(e,["handle"]);if(null!=n&&t_(t,["handle"],n),void 0!==tx(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(f));let g=tx(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&t_(t,["setup","inputAudioTranscription"],g);let y=tx(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&t_(t,["setup","outputAudioTranscription"],y);let v=tx(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&t_(t,["setup","realtimeInputConfig"],v);let b=tx(e,["contextWindowCompression"]);void 0!==t&&null!=b&&t_(t,["setup","contextWindowCompression"],b);let E=tx(e,["proactivity"]);if(void 0!==t&&null!=E&&t_(t,["setup","proactivity"],E),void 0!==tx(e,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(n,e)),x=e}return delete x.config,E.send(JSON.stringify(x)),new it(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}let ie={turnComplete:!0};class it{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let n=[];try{n=nn(t.turns),e.isVertexAI()||(n=n.map(e=>nD(e)))}catch(e){throw Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses||0===(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses]).length)throw Error("functionResponses is required.");for(let t of n){if("object"!=typeof t||null===t||!("name"in t)||!("response"in t))throw Error(`Could not parse function response, type '${typeof t}'.`);if(!e.isVertexAI()&&!("id"in t))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},ie),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:function(e){let t={},n=tx(e,["media"]);if(null!=n){let e=t1(n);Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["mediaChunks"],e)}let i=tx(e,["audio"]);null!=i&&t_(t,["audio"],t5(i));let r=tx(e,["audioStreamEnd"]);null!=r&&t_(t,["audioStreamEnd"],r);let l=tx(e,["video"]);null!=l&&t_(t,["video"],t4(l));let o=tx(e,["text"]);null!=o&&t_(t,["text"],o);let s=tx(e,["activityStart"]);null!=s&&t_(t,["activityStart"],s);let a=tx(e,["activityEnd"]);return null!=a&&t_(t,["activityEnd"],a),t}(e)}:{realtimeInput:function(e){let t={},n=tx(e,["media"]);if(null!=n){let e=t1(n);Array.isArray(e)&&(e=e.map(e=>nk(e))),t_(t,["mediaChunks"],e)}let i=tx(e,["audio"]);null!=i&&t_(t,["audio"],nk(t5(i)));let r=tx(e,["audioStreamEnd"]);null!=r&&t_(t,["audioStreamEnd"],r);let l=tx(e,["video"]);null!=l&&t_(t,["video"],nk(t4(l)));let o=tx(e,["text"]);null!=o&&t_(t,["text"],o);let s=tx(e,["activityStart"]);null!=s&&t_(t,["activityStart"],s);let a=tx(e,["activityEnd"]);return null!=a&&t_(t,["activityEnd"],a),t}(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function ii(e){var t,n,i;if(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.disable)return!0;let r=!1;for(let t of null!=(n=null==e?void 0:e.tools)?n:[])if(ir(t)){r=!0;break}if(!r)return!0;let l=null==(i=null==e?void 0:e.automaticFunctionCalling)?void 0:i.maximumRemoteCalls;return(!(!l||!(l<0)&&Number.isInteger(l))||0==l)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0)}function ir(e){return"callTool"in e&&"function"==typeof e.callTool}function il(e){var t;let n=[];return(null==(t=null==e?void 0:e.config)?void 0:t.tools)&&e.config.tools.forEach((e,t)=>{ir(e)||e.functionDeclarations&&e.functionDeclarations.length>0&&n.push(t)}),n}function io(e){var t;return!(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.ignoreCallHistory)}class is extends tb{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,i,r,l,o,s,a;let u,p,d=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!(null!=(a=null==(s=null==(o=e.config)?void 0:o.tools)?void 0:s.some(e=>ir(e)))&&a)||ii(e.config))return await this.generateContentInternal(d);let c=il(e);if(c.length>0){let e=c.map(e=>`tools[${e}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let h=nn(d.contents),m=null!=(i=null==(n=null==(t=d.config)?void 0:t.automaticFunctionCalling)?void 0:n.maximumRemoteCalls)?i:10,f=0;for(;f<m&&(u=await this.generateContentInternal(d)).functionCalls&&0!==u.functionCalls.length;){let t=u.candidates[0].content,n=[];for(let t of null!=(l=null==(r=e.config)?void 0:r.tools)?l:[])if(ir(t)){let e=await t.callTool(u.functionCalls);n.push(...e)}f++,p={role:"user",parts:n},d.contents=nn(d.contents),d.contents.push(t),d.contents.push(p),io(d.config)&&(h.push(t),h.push(p))}return io(d.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async e=>{var t,n,i,r,l;if(this.maybeMoveToResponseJsonSchem(e),ii(e.config)){let t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}let o=il(e);if(o.length>0){let e=o.map(e=>`tools[${e}]`).join(", ");throw Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let s=null==(i=null==(n=null==(t=null==e?void 0:e.config)?void 0:t.toolConfig)?void 0:n.functionCallingConfig)?void 0:i.streamFunctionCallArguments,a=null==(l=null==(r=null==e?void 0:e.config)?void 0:r.automaticFunctionCalling)?void 0:l.disable;if(s&&!a)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n,i=[];if(null==e?void 0:e.generatedImages)for(let r of e.generatedImages)r&&(null==r?void 0:r.safetyAttributes)&&(null==(t=null==r?void 0:r.safetyAttributes)?void 0:t.contentType)==="Positive Prompt"?n=null==r?void 0:r.safetyAttributes:i.push(r);return n?{generatedImages:i,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:i,sdkHttpResponse:e.sdkHttpResponse}}),this.list=async e=>{var t;let n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase)if(null==(t=n.config)?void 0:t.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else n.config.filter="labels.tune-type:*";return new n_(tt.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{let t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));let n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,i,r,l,o;if((e.prompt||e.image||e.video)&&e.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(t=e.video)?void 0:t.uri)&&(null==(n=e.video)?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null==(r=null==(i=e.source)?void 0:i.video)?void 0:r.uri)&&(null==(o=null==(l=e.source)?void 0:l.video)?void 0:o.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&!e.config.responseJsonSchema&&Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema)}async processParamsMaybeAddMcpUsage(e){var t,n,i;let r=null==(t=e.config)?void 0:t.tools;if(!r)return e;let l=await Promise.all(r.map(async e=>ir(e)?await e.tool():e)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(o.config.tools=l,e.config&&e.config.tools&&n2(e.config.tools)){let t=Object.assign({},null!=(i=null==(n=e.config.httpOptions)?void 0:n.headers)?i:{});0===Object.keys(t).length&&(t=this.apiClient.getDefaultHeaders()),n4(t),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:t})}return o}async initAfcToolsMap(e){var t,n,i;let r=new Map;for(let l of null!=(n=null==(t=e.config)?void 0:t.tools)?n:[])if(ir(l))for(let e of null!=(i=(await l.tool()).functionDeclarations)?i:[]){if(!e.name)throw Error("Function declaration name is required.");if(r.has(e.name))throw Error(`Duplicate tool declaration name: ${e.name}`);r.set(e.name,l)}return r}async processAfcStream(e){var t,n,i;let r=null!=(i=null==(n=null==(t=e.config)?void 0:t.automaticFunctionCalling)?void 0:n.maximumRemoteCalls)?i:10,l=!1,o=0;return function(e,t,n){return nC(this,arguments,function*(){for(;o<r;){l&&(o++,l=!1);let f=yield nS(e.processParamsMaybeAddMcpUsage(n)),g=yield nS(e.generateContentStreamInternal(f)),y=[],v=[];try{for(var i,s,a,u,p,d,c,h=!0,m=(s=void 0,nO(g));!(i=(c=yield nS(m.next())).done);h=!0)if(u=c.value,h=!1,yield yield nS(u),u.candidates&&(null==(p=u.candidates[0])?void 0:p.content)){for(let e of(v.push(u.candidates[0].content),null!=(d=u.candidates[0].content.parts)?d:[]))if(o<r&&e.functionCall){if(!e.functionCall.name)throw Error("Function call name was not returned by the model.");if(t.has(e.functionCall.name)){let n=yield nS(t.get(e.functionCall.name).callTool([e.functionCall]));y.push(...n)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${e.functionCall.name}`)}}}catch(e){s={error:e}}finally{try{!h&&!i&&(a=m.return)&&(yield nS(a.call(m)))}finally{if(s)throw s.error}}if(y.length>0){l=!0;let e=new tS;e.candidates=[{content:{role:"user",parts:y}}],yield yield nS(e);let t=[];t.push(...v),t.push({role:"user",parts:y});let i=nn(n.contents).concat(t);n.contents=i}else break}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=nL(this.apiClient,e);return l=tE("{model}:generateContent",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=nG(e),n=new tS;return Object.assign(n,t),n})}{let t=nU(this.apiClient,e);return l=tE("{model}:generateContent",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=nq(e),n=new tS;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=nL(this.apiClient,e);return l=tE("{model}:streamGenerateContent?alt=sse",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.requestStream({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(function(e){return nC(this,arguments,function*(){var t,n,i,r;try{for(var l,o=!0,s=nO(e);!(t=(l=yield nS(s.next())).done);o=!0){r=l.value,o=!1;let e=nG((yield nS(r.json())));e.sdkHttpResponse={headers:r.headers};let t=new tS;Object.assign(t,e),yield yield nS(t)}}catch(e){n={error:e}}finally{try{!o&&!t&&(i=s.return)&&(yield nS(i.call(s)))}finally{if(n)throw n.error}}})})}{let t=nU(this.apiClient,e);return l=tE("{model}:streamGenerateContent?alt=sse",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.requestStream({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(function(e){return nC(this,arguments,function*(){var t,n,i,r;try{for(var l,o=!0,s=nO(e);!(t=(l=yield nS(s.next())).done);o=!0){r=l.value,o=!1;let e=nq((yield nS(r.json())));e.sdkHttpResponse={headers:r.headers};let t=new tS;Object.assign(t,e),yield yield nS(t)}}catch(e){n={error:e}}finally{try{!o&&!t&&(i=s.return)&&(yield nS(i.call(s)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=function(e,t){let n,i,r,l,o,s={},a=tx(t,["model"]);null!=a&&t_(s,["_url","model"],tZ(e,a));let u=tx(t,["contents"]);if(null!=u){let t=nt(e,u);Array.isArray(t)&&(t=t.map(e=>e)),t_(s,["instances[]","content"],t)}let p=tx(t,["config"]);return null!=p&&(n=tx(p,["taskType"]),void 0!==s&&null!=n&&t_(s,["instances[]","task_type"],n),i=tx(p,["title"]),void 0!==s&&null!=i&&t_(s,["instances[]","title"],i),r=tx(p,["outputDimensionality"]),void 0!==s&&null!=r&&t_(s,["parameters","outputDimensionality"],r),l=tx(p,["mimeType"]),void 0!==s&&null!=l&&t_(s,["instances[]","mimeType"],l),o=tx(p,["autoTruncate"]),void 0!==s&&null!=o&&t_(s,["parameters","autoTruncate"],o)),s}(this.apiClient,e);return l=tE("{model}:predict",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["predictions[]","embeddings"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=tx(e,["values"]))&&t_(n,["values"],i),null!=(r=tx(e,["statistics"]))&&t_(n,["statistics"],(l={},null!=(o=tx(t=r,["truncated"]))&&t_(l,["truncated"],o),null!=(s=tx(t,["token_count"]))&&t_(l,["tokenCount"],s),l)),n})),t_(t,["embeddings"],e)}let r=tx(e,["metadata"]);return null!=r&&t_(t,["metadata"],r),t}(e),n=new tC;return Object.assign(n,t),n})}{let t=function(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let t=nt(e,r);Array.isArray(t)&&(t=t.map(e=>e)),t_(n,["requests[]","content"],t)}let l=tx(t,["config"]);null!=l&&function(e,t){let n=tx(e,["taskType"]);void 0!==t&&null!=n&&t_(t,["requests[]","taskType"],n);let i=tx(e,["title"]);void 0!==t&&null!=i&&t_(t,["requests[]","title"],i);let r=tx(e,["outputDimensionality"]);if(void 0!==t&&null!=r&&t_(t,["requests[]","outputDimensionality"],r),void 0!==tx(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==tx(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(l,n);let o=tx(t,["model"]);return void 0!==o&&t_(n,["requests[]","model"],tZ(e,o)),n}(this.apiClient,e);return l=tE("{model}:batchEmbedContents",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["embeddings"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["embeddings"],e)}let r=tx(e,["metadata"]);return null!=r&&t_(t,["metadata"],r),t}(e),n=new tC;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,p,d,c,h,m,f,g,y,v,b,E,_,x,I,T,A,S,C=(l=this.apiClient,i={},null!=(r=tx(e,["model"]))&&t_(i,["_url","model"],tZ(l,r)),null!=(o=tx(e,["prompt"]))&&t_(i,["instances[0]","prompt"],o),null!=(u=tx(e,["config"]))&&(p=tx(u,["outputGcsUri"]),void 0!==i&&null!=p&&t_(i,["parameters","storageUri"],p),d=tx(u,["negativePrompt"]),void 0!==i&&null!=d&&t_(i,["parameters","negativePrompt"],d),c=tx(u,["numberOfImages"]),void 0!==i&&null!=c&&t_(i,["parameters","sampleCount"],c),h=tx(u,["aspectRatio"]),void 0!==i&&null!=h&&t_(i,["parameters","aspectRatio"],h),m=tx(u,["guidanceScale"]),void 0!==i&&null!=m&&t_(i,["parameters","guidanceScale"],m),f=tx(u,["seed"]),void 0!==i&&null!=f&&t_(i,["parameters","seed"],f),g=tx(u,["safetyFilterLevel"]),void 0!==i&&null!=g&&t_(i,["parameters","safetySetting"],g),y=tx(u,["personGeneration"]),void 0!==i&&null!=y&&t_(i,["parameters","personGeneration"],y),v=tx(u,["includeSafetyAttributes"]),void 0!==i&&null!=v&&t_(i,["parameters","includeSafetyAttributes"],v),b=tx(u,["includeRaiReason"]),void 0!==i&&null!=b&&t_(i,["parameters","includeRaiReason"],b),E=tx(u,["language"]),void 0!==i&&null!=E&&t_(i,["parameters","language"],E),_=tx(u,["outputMimeType"]),void 0!==i&&null!=_&&t_(i,["parameters","outputOptions","mimeType"],_),x=tx(u,["outputCompressionQuality"]),void 0!==i&&null!=x&&t_(i,["parameters","outputOptions","compressionQuality"],x),I=tx(u,["addWatermark"]),void 0!==i&&null!=I&&t_(i,["parameters","addWatermark"],I),T=tx(u,["labels"]),void 0!==i&&null!=T&&t_(i,["labels"],T),A=tx(u,["imageSize"]),void 0!==i&&null!=A&&t_(i,["parameters","sampleImageSize"],A),S=tx(u,["enhancePrompt"]),void 0!==i&&null!=S&&t_(i,["parameters","enhancePrompt"],S)),i);return s=tE("{model}:predict",C._url),a=C._query,delete C._url,delete C._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(C),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>nH(e))),t_(t,["generatedImages"],e)}let r=tx(e,["positivePromptSafetyAttributes"]);return null!=r&&t_(t,["positivePromptSafetyAttributes"],nY(r)),t}(e),n=new tO;return Object.assign(n,t),n})}{let t,n,l,u,p=(o=this.apiClient,t={},null!=(n=tx(e,["model"]))&&t_(t,["_url","model"],tZ(o,n)),null!=(l=tx(e,["prompt"]))&&t_(t,["instances[0]","prompt"],l),null!=(u=tx(e,["config"]))&&function(e,t){if(void 0!==tx(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==tx(e,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let n=tx(e,["numberOfImages"]);void 0!==t&&null!=n&&t_(t,["parameters","sampleCount"],n);let i=tx(e,["aspectRatio"]);void 0!==t&&null!=i&&t_(t,["parameters","aspectRatio"],i);let r=tx(e,["guidanceScale"]);if(void 0!==t&&null!=r&&t_(t,["parameters","guidanceScale"],r),void 0!==tx(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let l=tx(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&t_(t,["parameters","safetySetting"],l);let o=tx(e,["personGeneration"]);void 0!==t&&null!=o&&t_(t,["parameters","personGeneration"],o);let s=tx(e,["includeSafetyAttributes"]);void 0!==t&&null!=s&&t_(t,["parameters","includeSafetyAttributes"],s);let a=tx(e,["includeRaiReason"]);void 0!==t&&null!=a&&t_(t,["parameters","includeRaiReason"],a);let u=tx(e,["language"]);void 0!==t&&null!=u&&t_(t,["parameters","language"],u);let p=tx(e,["outputMimeType"]);void 0!==t&&null!=p&&t_(t,["parameters","outputOptions","mimeType"],p);let d=tx(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&t_(t,["parameters","outputOptions","compressionQuality"],d),void 0!==tx(e,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==tx(e,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let c=tx(e,["imageSize"]);if(void 0!==t&&null!=c&&t_(t,["parameters","sampleImageSize"],c),void 0!==tx(e,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(u,t),t);return s=tE("{model}:predict",p._url),a=p._query,delete p._url,delete p._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(p),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{var t,n;let i,r,l,o,s,a,u;return i={},null!=(r=tx(t=e,["_self"]))&&t_(i,["image"],(l={},null!=(o=tx(n=r,["bytesBase64Encoded"]))&&t_(l,["imageBytes"],tI(o)),null!=(s=tx(n,["mimeType"]))&&t_(l,["mimeType"],s),l)),null!=(a=tx(t,["raiFilteredReason"]))&&t_(i,["raiFilteredReason"],a),null!=(u=tx(t,["_self"]))&&t_(i,["safetyAttributes"],nW(u)),i})),t_(t,["generatedImages"],e)}let r=tx(e,["positivePromptSafetyAttributes"]);return null!=r&&t_(t,["positivePromptSafetyAttributes"],nW(r)),t}(e),n=new tO;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n,i,r,l,o,s,a,u,p,d,c,h,m,f,g,y,v,b={},E=tx(t,["model"]);null!=E&&t_(b,["_url","model"],tZ(e,E));let _=tx(t,["prompt"]);null!=_&&t_(b,["instances[0]","prompt"],_);let x=tx(t,["referenceImages"]);if(null!=x){let e=x;Array.isArray(e)&&(e=e.map(e=>(function(e){let t,n,i,r,l,o,s,a={},u=tx(e,["referenceImage"]);null!=u&&t_(a,["referenceImage"],nB(u));let p=tx(e,["referenceId"]);null!=p&&t_(a,["referenceId"],p);let d=tx(e,["referenceType"]);null!=d&&t_(a,["referenceType"],d);let c=tx(e,["maskImageConfig"]);null!=c&&t_(a,["maskImageConfig"],(t={},null!=(n=tx(c,["maskMode"]))&&t_(t,["maskMode"],n),null!=(i=tx(c,["segmentationClasses"]))&&t_(t,["maskClasses"],i),null!=(r=tx(c,["maskDilation"]))&&t_(t,["dilation"],r),t));let h=tx(e,["controlImageConfig"]);null!=h&&t_(a,["controlImageConfig"],(l={},null!=(o=tx(h,["controlType"]))&&t_(l,["controlType"],o),null!=(s=tx(h,["enableControlImageComputation"]))&&t_(l,["computeControl"],s),l));let m=tx(e,["styleImageConfig"]);null!=m&&t_(a,["styleImageConfig"],m);let f=tx(e,["subjectImageConfig"]);return null!=f&&t_(a,["subjectImageConfig"],f),a})(e))),t_(b,["instances[0]","referenceImages"],e)}let I=tx(t,["config"]);return null!=I&&(n=tx(I,["outputGcsUri"]),void 0!==b&&null!=n&&t_(b,["parameters","storageUri"],n),i=tx(I,["negativePrompt"]),void 0!==b&&null!=i&&t_(b,["parameters","negativePrompt"],i),r=tx(I,["numberOfImages"]),void 0!==b&&null!=r&&t_(b,["parameters","sampleCount"],r),l=tx(I,["aspectRatio"]),void 0!==b&&null!=l&&t_(b,["parameters","aspectRatio"],l),o=tx(I,["guidanceScale"]),void 0!==b&&null!=o&&t_(b,["parameters","guidanceScale"],o),s=tx(I,["seed"]),void 0!==b&&null!=s&&t_(b,["parameters","seed"],s),a=tx(I,["safetyFilterLevel"]),void 0!==b&&null!=a&&t_(b,["parameters","safetySetting"],a),u=tx(I,["personGeneration"]),void 0!==b&&null!=u&&t_(b,["parameters","personGeneration"],u),p=tx(I,["includeSafetyAttributes"]),void 0!==b&&null!=p&&t_(b,["parameters","includeSafetyAttributes"],p),d=tx(I,["includeRaiReason"]),void 0!==b&&null!=d&&t_(b,["parameters","includeRaiReason"],d),c=tx(I,["language"]),void 0!==b&&null!=c&&t_(b,["parameters","language"],c),h=tx(I,["outputMimeType"]),void 0!==b&&null!=h&&t_(b,["parameters","outputOptions","mimeType"],h),m=tx(I,["outputCompressionQuality"]),void 0!==b&&null!=m&&t_(b,["parameters","outputOptions","compressionQuality"],m),f=tx(I,["addWatermark"]),void 0!==b&&null!=f&&t_(b,["parameters","addWatermark"],f),g=tx(I,["labels"]),void 0!==b&&null!=g&&t_(b,["labels"],g),y=tx(I,["editMode"]),void 0!==b&&null!=y&&t_(b,["parameters","editMode"],y),v=tx(I,["baseSteps"]),void 0!==b&&null!=v&&t_(b,["parameters","editConfig","baseSteps"],v)),b}(this.apiClient,e);return i=tE("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>nH(e))),t_(t,["generatedImages"],e)}return t}(e),n=new tN;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n,i;let r="",l={};if(this.apiClient.isVertexAI()){let o,s,a,u,p,d,c,h,m,f,g,y,v,b,E,_,x=(i=this.apiClient,o={},null!=(s=tx(e,["model"]))&&t_(o,["_url","model"],tZ(i,s)),null!=(a=tx(e,["image"]))&&t_(o,["instances[0]","image"],nB(a)),null!=(u=tx(e,["upscaleFactor"]))&&t_(o,["parameters","upscaleConfig","upscaleFactor"],u),null!=(p=tx(e,["config"]))&&(d=tx(p,["outputGcsUri"]),void 0!==o&&null!=d&&t_(o,["parameters","storageUri"],d),c=tx(p,["safetyFilterLevel"]),void 0!==o&&null!=c&&t_(o,["parameters","safetySetting"],c),h=tx(p,["personGeneration"]),void 0!==o&&null!=h&&t_(o,["parameters","personGeneration"],h),m=tx(p,["includeRaiReason"]),void 0!==o&&null!=m&&t_(o,["parameters","includeRaiReason"],m),f=tx(p,["outputMimeType"]),void 0!==o&&null!=f&&t_(o,["parameters","outputOptions","mimeType"],f),g=tx(p,["outputCompressionQuality"]),void 0!==o&&null!=g&&t_(o,["parameters","outputOptions","compressionQuality"],g),y=tx(p,["enhanceInputImage"]),void 0!==o&&null!=y&&t_(o,["parameters","upscaleConfig","enhanceInputImage"],y),v=tx(p,["imagePreservationFactor"]),void 0!==o&&null!=v&&t_(o,["parameters","upscaleConfig","imagePreservationFactor"],v),b=tx(p,["labels"]),void 0!==o&&null!=b&&t_(o,["labels"],b),E=tx(p,["numberOfImages"]),void 0!==o&&null!=E&&t_(o,["parameters","sampleCount"],E),_=tx(p,["mode"]),void 0!==o&&null!=_&&t_(o,["parameters","mode"],_)),o);return r=tE("{model}:predict",x._url),l=x._query,delete x._url,delete x._query,this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(x),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>nH(e))),t_(t,["generatedImages"],e)}return t}(e),n=new tw;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n,i;let r="",l={};if(this.apiClient.isVertexAI()){let o,s,a,u,p,d,c,h,m,f,g,y,v,b,E,_=(i=this.apiClient,o={},null!=(s=tx(e,["model"]))&&t_(o,["_url","model"],tZ(i,s)),null!=(a=tx(e,["source"]))&&function(e,t){let n=tx(e,["prompt"]);void 0!==t&&null!=n&&t_(t,["instances[0]","prompt"],n);let i=tx(e,["personImage"]);void 0!==t&&null!=i&&t_(t,["instances[0]","personImage","image"],nB(i));let r=tx(e,["productImages"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{let t,n;return t={},null!=(n=tx(e,["productImage"]))&&t_(t,["image"],nB(n)),t})),t_(t,["instances[0]","productImages"],e)}}(a,o),null!=(u=tx(e,["config"]))&&(p=tx(u,["numberOfImages"]),void 0!==o&&null!=p&&t_(o,["parameters","sampleCount"],p),d=tx(u,["baseSteps"]),void 0!==o&&null!=d&&t_(o,["parameters","baseSteps"],d),c=tx(u,["outputGcsUri"]),void 0!==o&&null!=c&&t_(o,["parameters","storageUri"],c),h=tx(u,["seed"]),void 0!==o&&null!=h&&t_(o,["parameters","seed"],h),m=tx(u,["safetyFilterLevel"]),void 0!==o&&null!=m&&t_(o,["parameters","safetySetting"],m),f=tx(u,["personGeneration"]),void 0!==o&&null!=f&&t_(o,["parameters","personGeneration"],f),g=tx(u,["addWatermark"]),void 0!==o&&null!=g&&t_(o,["parameters","addWatermark"],g),y=tx(u,["outputMimeType"]),void 0!==o&&null!=y&&t_(o,["parameters","outputOptions","mimeType"],y),v=tx(u,["outputCompressionQuality"]),void 0!==o&&null!=v&&t_(o,["parameters","outputOptions","compressionQuality"],v),b=tx(u,["enhancePrompt"]),void 0!==o&&null!=b&&t_(o,["parameters","enhancePrompt"],b),E=tx(u,["labels"]),void 0!==o&&null!=E&&t_(o,["labels"],E)),o);return r=tE("{model}:predict",_._url),l=_._query,delete _._url,delete _._query,this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(_),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=tx(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>nH(e))),t_(t,["generatedImages"],e)}return t}(e),n=new tR;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI()){let a,u,p,d,c,h,m,f,g,y,v,b,E,_,x,I=(i=this.apiClient,h={},null!=(m=tx(e,["model"]))&&t_(h,["_url","model"],tZ(i,m)),null!=(f=tx(e,["source"]))&&(r=f,l=h,p=tx(r,["prompt"]),void 0!==l&&null!=p&&t_(l,["instances[0]","prompt"],p),d=tx(r,["image"]),void 0!==l&&null!=d&&t_(l,["instances[0]","image"],nB(d)),c=tx(r,["scribbleImage"]),void 0!==l&&null!=c&&t_(l,["instances[0]","scribble"],(a={},null!=(u=tx(c,["image"]))&&t_(a,["image"],nB(u)),a))),null!=(g=tx(e,["config"]))&&(y=tx(g,["mode"]),void 0!==h&&null!=y&&t_(h,["parameters","mode"],y),v=tx(g,["maxPredictions"]),void 0!==h&&null!=v&&t_(h,["parameters","maxPredictions"],v),b=tx(g,["confidenceThreshold"]),void 0!==h&&null!=b&&t_(h,["parameters","confidenceThreshold"],b),E=tx(g,["maskDilation"]),void 0!==h&&null!=E&&t_(h,["parameters","maskDilation"],E),_=tx(g,["binaryColorThreshold"]),void 0!==h&&null!=_&&t_(h,["parameters","binaryColorThreshold"],_),x=tx(g,["labels"]),void 0!==h&&null!=x&&t_(h,["labels"],x)),h);return o=tE("{model}:predict",I._url),s=I._query,delete I._url,delete I._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(I),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=tx(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["_self"]);null!=n&&t_(t,["mask"],nF(n));let i=tx(e,["labels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["labels"],e)}return t})(e))),t_(t,["generatedMasks"],e)}return t}(e),n=new tP;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["model"]))&&t_(i,["_url","name"],tZ(l,r)),i);return s=tE("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>n$(e))}{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["model"]))&&t_(t,["_url","name"],tZ(o,n)),t);return s=tE("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>nJ(e))}}async listInternal(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,p,d,c=(l=this.apiClient,i={},null!=(r=tx(e,["config"]))&&(o=tx(r,["pageSize"]),void 0!==i&&null!=o&&t_(i,["_query","pageSize"],o),u=tx(r,["pageToken"]),void 0!==i&&null!=u&&t_(i,["_query","pageToken"],u),p=tx(r,["filter"]),void 0!==i&&null!=p&&t_(i,["_query","filter"],p),d=tx(r,["queryBase"]),void 0!==i&&null!=d&&t_(i,["_url","models_url"],nd(l,d))),i);return s=tE("{models_url}",c._url),a=c._query,delete c._url,delete c._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["_self"]);if(null!=r){let e=nc(r);Array.isArray(e)&&(e=e.map(e=>n$(e))),t_(t,["models"],e)}return t}(e),n=new tj;return Object.assign(n,t),n})}{let t,n,l,u,p,d,c=(o=this.apiClient,t={},null!=(n=tx(e,["config"]))&&(l=tx(n,["pageSize"]),void 0!==t&&null!=l&&t_(t,["_query","pageSize"],l),u=tx(n,["pageToken"]),void 0!==t&&null!=u&&t_(t,["_query","pageToken"],u),p=tx(n,["filter"]),void 0!==t&&null!=p&&t_(t,["_query","filter"],p),d=tx(n,["queryBase"]),void 0!==t&&null!=d&&t_(t,["_url","models_url"],nd(o,d))),t);return s=tE("{models_url}",c._url),a=c._query,delete c._url,delete c._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["_self"]);if(null!=r){let e=nc(r);Array.isArray(e)&&(e=e.map(e=>nJ(e))),t_(t,["models"],e)}return t}(e),n=new tj;return Object.assign(n,t),n})}}async update(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o,u,p,d,c=(l=this.apiClient,i={},null!=(r=tx(e,["model"]))&&t_(i,["_url","model"],tZ(l,r)),null!=(o=tx(e,["config"]))&&(u=tx(o,["displayName"]),void 0!==i&&null!=u&&t_(i,["displayName"],u),p=tx(o,["description"]),void 0!==i&&null!=p&&t_(i,["description"],p),d=tx(o,["defaultCheckpointId"]),void 0!==i&&null!=d&&t_(i,["defaultCheckpointId"],d)),i);return s=tE("{model}",c._url),a=c._query,delete c._url,delete c._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>n$(e))}{let t,n,l,u,p,d,c=(o=this.apiClient,t={},null!=(n=tx(e,["model"]))&&t_(t,["_url","name"],tZ(o,n)),null!=(l=tx(e,["config"]))&&(u=tx(l,["displayName"]),void 0!==t&&null!=u&&t_(t,["displayName"],u),p=tx(l,["description"]),void 0!==t&&null!=p&&t_(t,["description"],p),d=tx(l,["defaultCheckpointId"]),void 0!==t&&null!=d&&t_(t,["defaultCheckpointId"],d)),t);return s=tE("{name}",c._url),a=c._query,delete c._url,delete c._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>nJ(e))}}async delete(e){var t,n,i,r,l,o;let s="",a={};if(this.apiClient.isVertexAI()){let i,r,o=(l=this.apiClient,i={},null!=(r=tx(e,["model"]))&&t_(i,["_url","name"],tZ(l,r)),i);return s=tE("{name}",o._url),a=o._query,delete o._url,delete o._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tM;return Object.assign(r,i),r})}{let t,n,l=(o=this.apiClient,t={},null!=(n=tx(e,["model"]))&&t_(t,["_url","name"],tZ(o,n)),t);return s=tE("{name}",l._url),a=l._query,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tM;return Object.assign(r,i),r})}}async countTokens(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i=function(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let e=nn(r);Array.isArray(e)&&(e=e.map(e=>e)),t_(n,["contents"],e)}let l=tx(t,["config"]);return null!=l&&function(e,t){let n=tx(e,["systemInstruction"]);void 0!==t&&null!=n&&t_(t,["systemInstruction"],ne(n));let i=tx(e,["tools"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>nK(e))),t_(t,["tools"],e)}let r=tx(e,["generationConfig"]);void 0!==t&&null!=r&&t_(t,["generationConfig"],function(e){let t={},n=tx(e,["modelSelectionConfig"]);null!=n&&t_(t,["modelConfig"],n);let i=tx(e,["responseJsonSchema"]);null!=i&&t_(t,["responseJsonSchema"],i);let r=tx(e,["audioTimestamp"]);null!=r&&t_(t,["audioTimestamp"],r);let l=tx(e,["candidateCount"]);null!=l&&t_(t,["candidateCount"],l);let o=tx(e,["enableAffectiveDialog"]);null!=o&&t_(t,["enableAffectiveDialog"],o);let s=tx(e,["frequencyPenalty"]);null!=s&&t_(t,["frequencyPenalty"],s);let a=tx(e,["logprobs"]);null!=a&&t_(t,["logprobs"],a);let u=tx(e,["maxOutputTokens"]);null!=u&&t_(t,["maxOutputTokens"],u);let p=tx(e,["mediaResolution"]);null!=p&&t_(t,["mediaResolution"],p);let d=tx(e,["presencePenalty"]);null!=d&&t_(t,["presencePenalty"],d);let c=tx(e,["responseLogprobs"]);null!=c&&t_(t,["responseLogprobs"],c);let h=tx(e,["responseMimeType"]);null!=h&&t_(t,["responseMimeType"],h);let m=tx(e,["responseModalities"]);null!=m&&t_(t,["responseModalities"],m);let f=tx(e,["responseSchema"]);null!=f&&t_(t,["responseSchema"],f);let g=tx(e,["routingConfig"]);null!=g&&t_(t,["routingConfig"],g);let y=tx(e,["seed"]);null!=y&&t_(t,["seed"],y);let v=tx(e,["speechConfig"]);null!=v&&t_(t,["speechConfig"],v);let b=tx(e,["stopSequences"]);null!=b&&t_(t,["stopSequences"],b);let E=tx(e,["temperature"]);null!=E&&t_(t,["temperature"],E);let _=tx(e,["thinkingConfig"]);null!=_&&t_(t,["thinkingConfig"],_);let x=tx(e,["topK"]);null!=x&&t_(t,["topK"],x);let I=tx(e,["topP"]);if(null!=I&&t_(t,["topP"],I),void 0!==tx(e,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(r))}(l,n),n}(this.apiClient,e);return l=tE("{model}:countTokens",i._url),o=i._query,delete i._url,delete i._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),null!=(i=tx(e,["totalTokens"]))&&t_(t,["totalTokens"],i),t),l=new tk;return Object.assign(l,r),l})}{let t=function(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let e=nn(r);Array.isArray(e)&&(e=e.map(e=>nD(e))),t_(n,["contents"],e)}let l=tx(t,["config"]);return null!=l&&function(e){if(void 0!==tx(e,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==tx(e,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==tx(e,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(l),n}(this.apiClient,e);return l=tE("{model}:countTokens",t._url),o=t._query,delete t._url,delete t._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),null!=(i=tx(e,["totalTokens"]))&&t_(t,["totalTokens"],i),null!=(r=tx(e,["cachedContentTokenCount"]))&&t_(t,["cachedContentTokenCount"],r),t),o=new tk;return Object.assign(o,l),o})}}async computeTokens(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},i=tx(t,["model"]);null!=i&&t_(n,["_url","model"],tZ(e,i));let r=tx(t,["contents"]);if(null!=r){let e=nn(r);Array.isArray(e)&&(e=e.map(e=>e)),t_(n,["contents"],e)}return n}(this.apiClient,e);return i=tE("{model}:computeTokens",l._url),r=l._query,delete l._url,delete l._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["tokensInfo"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["tokensInfo"],e)}return t}(e),n=new tD;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,i,r,l,o,s,a,u,p;let d="",c={};if(this.apiClient.isVertexAI()){let i,r,o,u,p,h,m,f,g,y,v=(l=this.apiClient,u={},null!=(p=tx(e,["model"]))&&t_(u,["_url","model"],tZ(l,p)),null!=(h=tx(e,["prompt"]))&&t_(u,["instances[0]","prompt"],h),null!=(m=tx(e,["image"]))&&t_(u,["instances[0]","image"],nB(m)),null!=(f=tx(e,["video"]))&&t_(u,["instances[0]","video"],nX(f)),null!=(g=tx(e,["source"]))&&(s=g,a=u,i=tx(s,["prompt"]),void 0!==a&&null!=i&&t_(a,["instances[0]","prompt"],i),r=tx(s,["image"]),void 0!==a&&null!=r&&t_(a,["instances[0]","image"],nB(r)),o=tx(s,["video"]),void 0!==a&&null!=o&&t_(a,["instances[0]","video"],nX(o))),null!=(y=tx(e,["config"]))&&function(e,t){var n;let i,r,l,o=tx(e,["numberOfVideos"]);void 0!==t&&null!=o&&t_(t,["parameters","sampleCount"],o);let s=tx(e,["outputGcsUri"]);void 0!==t&&null!=s&&t_(t,["parameters","storageUri"],s);let a=tx(e,["fps"]);void 0!==t&&null!=a&&t_(t,["parameters","fps"],a);let u=tx(e,["durationSeconds"]);void 0!==t&&null!=u&&t_(t,["parameters","durationSeconds"],u);let p=tx(e,["seed"]);void 0!==t&&null!=p&&t_(t,["parameters","seed"],p);let d=tx(e,["aspectRatio"]);void 0!==t&&null!=d&&t_(t,["parameters","aspectRatio"],d);let c=tx(e,["resolution"]);void 0!==t&&null!=c&&t_(t,["parameters","resolution"],c);let h=tx(e,["personGeneration"]);void 0!==t&&null!=h&&t_(t,["parameters","personGeneration"],h);let m=tx(e,["pubsubTopic"]);void 0!==t&&null!=m&&t_(t,["parameters","pubsubTopic"],m);let f=tx(e,["negativePrompt"]);void 0!==t&&null!=f&&t_(t,["parameters","negativePrompt"],f);let g=tx(e,["enhancePrompt"]);void 0!==t&&null!=g&&t_(t,["parameters","enhancePrompt"],g);let y=tx(e,["generateAudio"]);void 0!==t&&null!=y&&t_(t,["parameters","generateAudio"],y);let v=tx(e,["lastFrame"]);void 0!==t&&null!=v&&t_(t,["instances[0]","lastFrame"],nB(v));let b=tx(e,["referenceImages"]);if(void 0!==t&&null!=b){let e=b;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r;return n={},null!=(i=tx(t=e,["image"]))&&t_(n,["image"],nB(i)),null!=(r=tx(t,["referenceType"]))&&t_(n,["referenceType"],r),n})),t_(t,["instances[0]","referenceImages"],e)}let E=tx(e,["mask"]);void 0!==t&&null!=E&&t_(t,["instances[0]","mask"],(i={},null!=(r=tx(n=E,["image"]))&&t_(i,["_self"],nB(r)),null!=(l=tx(n,["maskMode"]))&&t_(i,["maskMode"],l),i));let _=tx(e,["compressionQuality"]);void 0!==t&&null!=_&&t_(t,["parameters","compressionQuality"],_)}(y,u),u);return d=tE("{model}:predictLongRunning",v._url),c=v._query,delete v._url,delete v._query,this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(v),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i,r,l,o,s=(t={},null!=(n=tx(e,["name"]))&&t_(t,["name"],n),null!=(i=tx(e,["metadata"]))&&t_(t,["metadata"],i),null!=(r=tx(e,["done"]))&&t_(t,["done"],r),null!=(l=tx(e,["error"]))&&t_(t,["error"],l),null!=(o=tx(e,["response"]))&&t_(t,["response"],function(e){let t={},n=tx(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=tx(e,["_self"]))&&t_(n,["video"],(r={},null!=(l=tx(t=i,["gcsUri"]))&&t_(r,["uri"],l),null!=(o=tx(t,["bytesBase64Encoded"]))&&t_(r,["videoBytes"],tI(o)),null!=(s=tx(t,["mimeType"]))&&t_(r,["mimeType"],s),r)),n})),t_(t,["generatedVideos"],e)}let i=tx(e,["raiMediaFilteredCount"]);null!=i&&t_(t,["raiMediaFilteredCount"],i);let r=tx(e,["raiMediaFilteredReasons"]);return null!=r&&t_(t,["raiMediaFilteredReasons"],r),t}(o)),t),a=new tU;return Object.assign(a,s),a})}{let t,n,l,s,a,h,m,f,g,y,v=(o=this.apiClient,s={},null!=(a=tx(e,["model"]))&&t_(s,["_url","model"],tZ(o,a)),null!=(h=tx(e,["prompt"]))&&t_(s,["instances[0]","prompt"],h),null!=(m=tx(e,["image"]))&&t_(s,["instances[0]","image"],nV(m)),null!=(f=tx(e,["video"]))&&t_(s,["instances[0]","video"],nz(f)),null!=(g=tx(e,["source"]))&&(u=g,p=s,t=tx(u,["prompt"]),void 0!==p&&null!=t&&t_(p,["instances[0]","prompt"],t),n=tx(u,["image"]),void 0!==p&&null!=n&&t_(p,["instances[0]","image"],nV(n)),l=tx(u,["video"]),void 0!==p&&null!=l&&t_(p,["instances[0]","video"],nz(l))),null!=(y=tx(e,["config"]))&&function(e,t){let n=tx(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&t_(t,["parameters","sampleCount"],n),void 0!==tx(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==tx(e,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let i=tx(e,["durationSeconds"]);if(void 0!==t&&null!=i&&t_(t,["parameters","durationSeconds"],i),void 0!==tx(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let r=tx(e,["aspectRatio"]);void 0!==t&&null!=r&&t_(t,["parameters","aspectRatio"],r);let l=tx(e,["resolution"]);void 0!==t&&null!=l&&t_(t,["parameters","resolution"],l);let o=tx(e,["personGeneration"]);if(void 0!==t&&null!=o&&t_(t,["parameters","personGeneration"],o),void 0!==tx(e,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let s=tx(e,["negativePrompt"]);void 0!==t&&null!=s&&t_(t,["parameters","negativePrompt"],s);let a=tx(e,["enhancePrompt"]);if(void 0!==t&&null!=a&&t_(t,["parameters","enhancePrompt"],a),void 0!==tx(e,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let u=tx(e,["lastFrame"]);void 0!==t&&null!=u&&t_(t,["instances[0]","lastFrame"],nV(u));let p=tx(e,["referenceImages"]);if(void 0!==t&&null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r;return n={},null!=(i=tx(t=e,["image"]))&&t_(n,["image"],nV(i)),null!=(r=tx(t,["referenceType"]))&&t_(n,["referenceType"],r),n})),t_(t,["instances[0]","referenceImages"],e)}if(void 0!==tx(e,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==tx(e,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(y,s),s);return d=tE("{model}:predictLongRunning",v._url),c=v._query,delete v._url,delete v._query,this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(v),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i,r,l,o,s=(t={},null!=(n=tx(e,["name"]))&&t_(t,["name"],n),null!=(i=tx(e,["metadata"]))&&t_(t,["metadata"],i),null!=(r=tx(e,["done"]))&&t_(t,["done"],r),null!=(l=tx(e,["error"]))&&t_(t,["error"],l),null!=(o=tx(e,["response","generateVideoResponse"]))&&t_(t,["response"],function(e){let t={},n=tx(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s;return n={},null!=(i=tx(e,["video"]))&&t_(n,["video"],(r={},null!=(l=tx(t=i,["uri"]))&&t_(r,["uri"],l),null!=(o=tx(t,["encodedVideo"]))&&t_(r,["videoBytes"],tI(o)),null!=(s=tx(t,["encoding"]))&&t_(r,["mimeType"],s),r)),n})),t_(t,["generatedVideos"],e)}let i=tx(e,["raiMediaFilteredCount"]);null!=i&&t_(t,["raiMediaFilteredCount"],i);let r=tx(e,["raiMediaFilteredReasons"]);return null!=r&&t_(t,["raiMediaFilteredReasons"],r),t}(o)),t),a=new tU;return Object.assign(a,s),a})}}}class ia extends tb{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let e,i=t.name.split("/operations/")[0];n&&"httpOptions"in n&&(e=n.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:e}});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{let e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){let t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let e,i=t.name.split("/operations/")[0];n&&"httpOptions"in n&&(e=n.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:e}});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{let e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s=(i={},null!=(r=tx(e,["operationName"]))&&t_(i,["_url","operationName"],r),i);return l=tE("{operationName}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json())}{let t,n,s=(t={},null!=(n=tx(e,["operationName"]))&&t_(t,["_url","operationName"],n),t);return l=tE("{operationName}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json())}}async fetchPredictVideosOperationInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l,o,s,a=(l={},null!=(o=tx(e,["operationName"]))&&t_(l,["operationName"],o),null!=(s=tx(e,["resourceName"]))&&t_(l,["_url","resourceName"],s),l);return i=tE("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json())}throw Error("This method is only supported by the Vertex AI.")}}class iu extends tb{constructor(e){super(),this.apiClient=e}async create(e){var t,n,i,r,l;let o="",s={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a,u,p,d,c,h,m,f,g,y,v=(i=this.apiClient,d={},null!=(c=tx(e,["config"]))&&t_(d,["config"],(h=tx(c,["expireTime"]),void 0!==d&&null!=h&&t_(d,["expireTime"],h),m=tx(c,["newSessionExpireTime"]),void 0!==d&&null!=m&&t_(d,["newSessionExpireTime"],m),f=tx(c,["uses"]),void 0!==d&&null!=f&&t_(d,["uses"],f),g=tx(c,["liveConnectConstraints"]),void 0!==d&&null!=g&&t_(d,["bidiGenerateContentSetup"],(r=i,a={},null!=(u=tx(l=g,["model"]))&&t_(a,["setup","model"],tZ(r,u)),null!=(p=tx(l,["config"]))&&t_(a,["config"],function(e,t){let n=tx(e,["generationConfig"]);void 0!==t&&null!=n&&t_(t,["setup","generationConfig"],n);let i=tx(e,["responseModalities"]);void 0!==t&&null!=i&&t_(t,["setup","generationConfig","responseModalities"],i);let r=tx(e,["temperature"]);void 0!==t&&null!=r&&t_(t,["setup","generationConfig","temperature"],r);let l=tx(e,["topP"]);void 0!==t&&null!=l&&t_(t,["setup","generationConfig","topP"],l);let o=tx(e,["topK"]);void 0!==t&&null!=o&&t_(t,["setup","generationConfig","topK"],o);let s=tx(e,["maxOutputTokens"]);void 0!==t&&null!=s&&t_(t,["setup","generationConfig","maxOutputTokens"],s);let a=tx(e,["mediaResolution"]);void 0!==t&&null!=a&&t_(t,["setup","generationConfig","mediaResolution"],a);let u=tx(e,["seed"]);void 0!==t&&null!=u&&t_(t,["setup","generationConfig","seed"],u);let p=tx(e,["speechConfig"]);void 0!==t&&null!=p&&t_(t,["setup","generationConfig","speechConfig"],nl(p));let d=tx(e,["thinkingConfig"]);void 0!==t&&null!=d&&t_(t,["setup","generationConfig","thinkingConfig"],d);let c=tx(e,["enableAffectiveDialog"]);void 0!==t&&null!=c&&t_(t,["setup","generationConfig","enableAffectiveDialog"],c);let h=tx(e,["systemInstruction"]);void 0!==t&&null!=h&&t_(t,["setup","systemInstruction"],function(e){let t={},n=tx(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let n,i,r,l,o,s,a,u,p,d,c,h;return n={},null!=(i=tx(t=e,["mediaResolution"]))&&t_(n,["mediaResolution"],i),null!=(r=tx(t,["codeExecutionResult"]))&&t_(n,["codeExecutionResult"],r),null!=(l=tx(t,["executableCode"]))&&t_(n,["executableCode"],l),null!=(o=tx(t,["fileData"]))&&t_(n,["fileData"],function(e){let t={};if(void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=tx(e,["fileUri"]);null!=n&&t_(t,["fileUri"],n);let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(o)),null!=(s=tx(t,["functionCall"]))&&t_(n,["functionCall"],function(e){let t={},n=tx(e,["id"]);null!=n&&t_(t,["id"],n);let i=tx(e,["args"]);null!=i&&t_(t,["args"],i);let r=tx(e,["name"]);if(null!=r&&t_(t,["name"],r),void 0!==tx(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==tx(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(s)),null!=(a=tx(t,["functionResponse"]))&&t_(n,["functionResponse"],a),null!=(u=tx(t,["inlineData"]))&&t_(n,["inlineData"],function(e){let t={},n=tx(e,["data"]);if(null!=n&&t_(t,["data"],n),void 0!==tx(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let i=tx(e,["mimeType"]);return null!=i&&t_(t,["mimeType"],i),t}(u)),null!=(p=tx(t,["text"]))&&t_(n,["text"],p),null!=(d=tx(t,["thought"]))&&t_(n,["thought"],d),null!=(c=tx(t,["thoughtSignature"]))&&t_(n,["thoughtSignature"],c),null!=(h=tx(t,["videoMetadata"]))&&t_(n,["videoMetadata"],h),n})),t_(t,["parts"],e)}let i=tx(e,["role"]);return null!=i&&t_(t,["role"],i),t}(ne(h)));let m=tx(e,["tools"]);if(void 0!==t&&null!=m){let e=ns(m);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=tx(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["functionDeclarations"],e)}if(void 0!==tx(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let i=tx(e,["googleSearchRetrieval"]);null!=i&&t_(t,["googleSearchRetrieval"],i);let r=tx(e,["computerUse"]);null!=r&&t_(t,["computerUse"],r);let l=tx(e,["fileSearch"]);null!=l&&t_(t,["fileSearch"],l);let o=tx(e,["codeExecution"]);if(null!=o&&t_(t,["codeExecution"],o),void 0!==tx(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=tx(e,["googleMaps"]);null!=s&&t_(t,["googleMaps"],function(e){let t={};if(void 0!==tx(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let n=tx(e,["enableWidget"]);return null!=n&&t_(t,["enableWidget"],n),t}(s));let a=tx(e,["googleSearch"]);null!=a&&t_(t,["googleSearch"],function(e){let t={};if(void 0!==tx(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==tx(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let n=tx(e,["timeRangeFilter"]);return null!=n&&t_(t,["timeRangeFilter"],n),t}(a));let u=tx(e,["urlContext"]);return null!=u&&t_(t,["urlContext"],u),t})(no(e)))),t_(t,["setup","tools"],e)}let f=tx(e,["sessionResumption"]);void 0!==t&&null!=f&&t_(t,["setup","sessionResumption"],function(e){let t={},n=tx(e,["handle"]);if(null!=n&&t_(t,["handle"],n),void 0!==tx(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(f));let g=tx(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&t_(t,["setup","inputAudioTranscription"],g);let y=tx(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&t_(t,["setup","outputAudioTranscription"],y);let v=tx(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&t_(t,["setup","realtimeInputConfig"],v);let b=tx(e,["contextWindowCompression"]);void 0!==t&&null!=b&&t_(t,["setup","contextWindowCompression"],b);let E=tx(e,["proactivity"]);if(void 0!==t&&null!=E&&t_(t,["setup","proactivity"],E),void 0!==tx(e,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(p,a)),a)),y=tx(c,["lockAdditionalFields"]),void 0!==d&&null!=y&&t_(d,["fieldMask"],y),{})),d);o=tE("auth_tokens",v._url),s=v._query,delete v.config,delete v._url,delete v._query;let b=function(e,t){let n=null,i=e.bidiGenerateContentSetup;if("object"==typeof i&&null!==i&&"setup"in i){let t=i.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==i&&delete e.bidiGenerateContentSetup;let r=e.fieldMask;if(n){let i=function(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n];if("object"==typeof i&&null!=i&&Object.keys(i).length>0){let e=Object.keys(i).map(e=>`${n}.${e}`);t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&(null==t?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==r&&Array.isArray(r)&&r.length>0){let t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],n=[];r.length>0&&(n=r.map(e=>t.includes(e)?`generationConfig.${e}`:e));let l=[];i&&l.push(i),n.length>0&&l.push(...n),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==r&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}(v,e.config);return this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}}class ip extends tb{constructor(e){super(),this.apiClient=e,this.list=async e=>new n_(tt.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=tx(e,["name"]))&&t_(l,["_url","name"],o),l);return i=tE("{name}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=tx(e,["name"]))&&t_(l,["_url","name"],o),null!=(s=tx(e,["config"]))&&(a=tx(s,["force"]),void 0!==l&&null!=a&&t_(l,["_query","force"],a)),l);i=tE("{name}",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}}async listInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u,p=(l={},null!=(o=tx(e,["parent"]))&&t_(l,["_url","parent"],o),null!=(s=tx(e,["config"]))&&(a=tx(s,["pageSize"]),void 0!==l&&null!=a&&t_(l,["_query","pageSize"],a),u=tx(s,["pageToken"]),void 0!==l&&null!=u&&t_(l,["_query","pageToken"],u)),l);return i=tE("{parent}/documents",p._url),r=p._query,delete p._url,delete p._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["documents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["documents"],e)}return t}(e),n=new tF;return Object.assign(n,t),n})}}}class id extends tb{constructor(e,t=new ip(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new n_(tt.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a=(l={},null!=(o=tx(e,["config"]))&&(s=tx(o,["displayName"]),void 0!==l&&null!=s&&t_(l,["displayName"],s)),l);return i=tE("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async get(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s=(l={},null!=(o=tx(e,["name"]))&&t_(l,["_url","name"],o),l);return i=tE("{name}",s._url),r=s._query,delete s._url,delete s._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=tx(e,["name"]))&&t_(l,["_url","name"],o),null!=(s=tx(e,["config"]))&&(a=tx(s,["force"]),void 0!==l&&null!=a&&t_(l,["_query","force"],a)),l);i=tE("{name}",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}}async listInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=tx(e,["config"]))&&(s=tx(o,["pageSize"]),void 0!==l&&null!=s&&t_(l,["_query","pageSize"],s),a=tx(o,["pageToken"]),void 0!==l&&null!=a&&t_(l,["_query","pageToken"],a)),l);return i=tE("fileSearchStores",u._url),r=u._query,delete u._url,delete u._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=tx(e,["sdkHttpResponse"]);null!=n&&t_(t,["sdkHttpResponse"],n);let i=tx(e,["nextPageToken"]);null!=i&&t_(t,["nextPageToken"],i);let r=tx(e,["fileSearchStores"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["fileSearchStores"],e)}return t}(e),n=new tV;return Object.assign(n,t),n})}}async uploadToFileSearchStoreInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a=(l={},null!=(o=tx(e,["fileSearchStoreName"]))&&t_(l,["_url","file_search_store_name"],o),null!=(s=tx(e,["config"]))&&nQ(s,l),l);return i=tE("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tB;return Object.assign(r,i),r})}}async importFile(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u=(l={},null!=(o=tx(e,["fileSearchStoreName"]))&&t_(l,["_url","file_search_store_name"],o),null!=(s=tx(e,["fileName"]))&&t_(l,["fileName"],s),null!=(a=tx(e,["config"]))&&function(e,t){let n=tx(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_(t,["customMetadata"],e)}let i=tx(e,["chunkingConfig"]);void 0!==t&&null!=i&&t_(t,["chunkingConfig"],i)}(a,l),l);return i=tE("{file_search_store_name}:importFile",u._url),r=u._query,delete u._url,delete u._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{var t;let n,i,r,l,o,s,a,u,p,d,c=(o={},null!=(s=tx(e,["name"]))&&t_(o,["name"],s),null!=(a=tx(e,["metadata"]))&&t_(o,["metadata"],a),null!=(u=tx(e,["done"]))&&t_(o,["done"],u),null!=(p=tx(e,["error"]))&&t_(o,["error"],p),null!=(d=tx(e,["response"]))&&t_(o,["response"],(n={},null!=(i=tx(t=d,["sdkHttpResponse"]))&&t_(n,["sdkHttpResponse"],i),null!=(r=tx(t,["parent"]))&&t_(n,["parent"],r),null!=(l=tx(t,["documentName"]))&&t_(n,["documentName"],l),n)),o),h=new tJ;return Object.assign(h,c),h})}}}let ic=function(){let{crypto:e}=globalThis;if(null==e?void 0:e.randomUUID)return ic=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^n()&15>>e/4).toString(16))};function ih(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let im=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(e){}try{return Error(JSON.stringify(e))}catch(e){}}return Error(e)};class ig extends Error{}class iy extends ig{constructor(e,t,n,i){super(`${iy.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,n){let i=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){return e&&i?400===e?new i_(e,t,n,i):401===e?new ix(e,t,n,i):403===e?new iI(e,t,n,i):404===e?new iT(e,t,n,i):409===e?new iA(e,t,n,i):422===e?new iS(e,t,n,i):429===e?new iC(e,t,n,i):e>=500?new iO(e,t,n,i):new iy(e,t,n,i):new ib({message:n,cause:im(t)})}}class iv extends iy{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ib extends iy{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class iE extends ib{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class i_ extends iy{}class ix extends iy{}class iI extends iy{}class iT extends iy{}class iA extends iy{}class iS extends iy{}class iC extends iy{}class iO extends iy{}let iN=/^[a-z][a-z0-9+.-]*:/i,iw=e=>(iw=Array.isArray)(e),iR=iw,iP="0.0.1",ij=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",iM=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";function ik(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function iD(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function iU(e){var t,n;if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await (null==(n=(t=e[Symbol.asyncIterator]()).return)?void 0:n.call(t));let i=e.getReader(),r=i.cancel();i.releaseLock(),await r}let iL=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),iq=()=>{var e;if("undefined"==typeof File){let{process:t}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof(null==(e=null==t?void 0:t.versions)?void 0:e.node)&&20>parseInt(t.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function iG(e,t,n){return iq(),new File(e,null!=t?t:"unknown_file",n)}let iH=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function iF(e,t,n){var i;let r,l;if(iq(),null!=(r=e=await e)&&"object"==typeof r&&"string"==typeof r.name&&"number"==typeof r.lastModified&&iH(r))return e instanceof File?e:iG([await e.arrayBuffer()],e.name);if(null!=(l=e)&&"object"==typeof l&&"string"==typeof l.url&&"function"==typeof l.blob){let i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),iG(await iV(i),t,n)}let o=await iV(e);if(t||(t=("object"==typeof(i=e)&&null!==i&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0),!(null==n?void 0:n.type)){let e=o.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n=Object.assign(Object.assign({},n),{type:e}))}return iG(o,t,n)}async function iV(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(iH(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator])try{for(var n,i,r,l,o,s,a=!0,u=nO(e);!(n=(s=await u.next()).done);a=!0)l=s.value,a=!1,t.push(...await iV(l))}catch(e){i={error:e}}finally{try{!a&&!n&&(r=u.return)&&await r.call(u)}finally{if(i)throw i.error}}else{let t=null==(o=null==e?void 0:e.constructor)?void 0:o.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class iB{constructor(e){this._client=e}}function iJ(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}iB._key=[];let i$=Object.freeze(Object.create(null)),iW=((e=iJ)=>function(t,...n){let i;if(1===t.length)return t[0];let r=!1,l=[],o=t.reduce((t,i,o)=>{var s,a,u;/[?#]/.test(i)&&(r=!0);let p=n[o],d=(r?encodeURIComponent:e)(""+p);return o!==n.length&&(null==p||"object"==typeof p&&p.toString===(null==(u=Object.getPrototypeOf(null!=(a=Object.getPrototypeOf(null!=(s=p.hasOwnProperty)?s:i$))?a:i$))?void 0:u.toString))&&(d=p+"",l.push({start:t.length+i.length,length:d.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),t+i+(o===n.length?"":d)},""),s=o.split(/[?#]/,1)[0],a=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(i=a.exec(s));)l.push({start:i.index,length:i[0].length,error:`Value "${i[0]}" can't be safely passed as a path parameter`});if(l.sort((e,t)=>e.start-t.start),l.length>0){let e=0,t=l.reduce((t,n)=>{let i=" ".repeat(n.start-e),r="^".repeat(n.length);return e=n.start+n.length,t+i+r},"");throw new ig(`Path parameters result in path with invalid segments:
${l.map(e=>e.error).join("\n")}
${o}
${t}`)}return o})(iJ);class iY extends iB{create(e,t){var n;let{api_version:i=this._client.apiVersion}=e,r=nA(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new ig("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new ig("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(iW`/${i}/interactions`,Object.assign(Object.assign({body:r},t),{stream:null!=(n=e.stream)&&n}))}delete(e,t={},n){let{api_version:i=this._client.apiVersion}=null!=t?t:{};return this._client.delete(iW`/${i}/interactions/${e}`,n)}cancel(e,t={},n){let{api_version:i=this._client.apiVersion}=null!=t?t:{};return this._client.post(iW`/${i}/interactions/${e}/cancel`,n)}get(e,t={},n){var i;let r=null!=t?t:{},{api_version:l=this._client.apiVersion}=r,o=nA(r,["api_version"]);return this._client.get(iW`/${l}/interactions/${e}`,Object.assign(Object.assign({query:o},n),{stream:null!=(i=null==t?void 0:t.stream)&&i}))}}iY._key=Object.freeze(["interactions"]);class iK extends iY{}function iz(e){let t;return(null!=n?n:n=(t=new globalThis.TextEncoder).encode.bind(t))(e)}function iX(e){let t;return(null!=i?i:i=(t=new globalThis.TextDecoder).decode.bind(t))(e)}class iQ{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){let t;if(null==e)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?iz(e):e;this.buffer=function(e){let t=0;for(let n of e)t+=n.length;let n=new Uint8Array(t),i=0;for(let t of e)n.set(t,i),i+=t.length;return n}([this.buffer,n]);let i=[];for(;null!=(t=function(e,t){for(let n=null!=t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}(this.buffer,this.carriageReturnIndex));){if(t.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=t.index;continue}if(null!=this.carriageReturnIndex&&(t.index!==this.carriageReturnIndex+1||t.carriage)){i.push(iX(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let e=null!==this.carriageReturnIndex?t.preceding-1:t.preceding,n=iX(this.buffer.subarray(0,e));i.push(n),this.buffer=this.buffer.subarray(t.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode("\n"):[]}}iQ.NEWLINE_CHARS=new Set(["\n","\r"]),iQ.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let iZ={off:0,error:200,warn:300,info:400,debug:500},i0=(e,t,n)=>{if(e){if(Object.prototype.hasOwnProperty.call(iZ,e))return e;i3(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(iZ))}`)}};function i1(){}function i2(e,t,n){return!t||iZ[e]>iZ[n]?i1:t[e].bind(t)}let i4={error:i1,warn:i1,info:i1,debug:i1},i5=new WeakMap;function i3(e){var t;let n=e.logger,i=null!=(t=e.logLevel)?t:"off";if(!n)return i4;let r=i5.get(n);if(r&&r[0]===i)return r[1];let l={error:i2("error",n,i),warn:i2("warn",n,i),info:i2("info",n,i),debug:i2("debug",n,i)};return i5.set(n,[i,l]),l}let i6=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-goog-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class i8{constructor(e,t,n){this.iterator=e,this.controller=t,this.client=n}static fromSSEResponse(e,t,n){let i=!1,r=n?i3(n):console;return new i8(function(){return nC(this,arguments,function*(){var n,l,o,s;if(i)throw new ig("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var u,p=!0,d=nO(function(e,t){return nC(this,arguments,function*(){var n,i,r,l;if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new ig("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new ig("Attempted to iterate over a response with no body")}let o=new i7,s=new iQ,a=iD(e.body);try{for(var u,p=!0,d=nO(function(e){return nC(this,arguments,function*(){var t,n,i,r;let l=new Uint8Array;try{for(var o,s=!0,a=nO(e);!(t=(o=yield nS(a.next())).done);s=!0){let e;if(r=o.value,s=!1,null==r)continue;let t=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?iz(r):r,n=new Uint8Array(l.length+t.length);for(n.set(l),n.set(t,l.length),l=n;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(l));)yield yield nS(l.slice(0,e)),l=l.slice(e)}}catch(e){n={error:e}}finally{try{!s&&!t&&(i=a.return)&&(yield nS(i.call(a)))}finally{if(n)throw n.error}}l.length>0&&(yield yield nS(l))})}(a));!(n=(u=yield nS(d.next())).done);p=!0)for(let e of(l=u.value,p=!1,s.decode(l))){let t=o.decode(e);t&&(yield yield nS(t))}}catch(e){i={error:e}}finally{try{!p&&!n&&(r=d.return)&&(yield nS(r.call(d)))}finally{if(i)throw i.error}}for(let e of s.flush()){let t=o.decode(e);t&&(yield yield nS(t))}})}(e,t));!(n=(u=yield nS(d.next())).done);p=!0)if(s=u.value,p=!1,!a)if(s.data.startsWith("[DONE]")){a=!0;continue}else try{yield yield nS(JSON.parse(s.data))}catch(e){throw r.error("Could not parse message into JSON:",s.data),r.error("From chunk:",s.raw),e}}catch(e){l={error:e}}finally{try{!p&&!n&&(o=d.return)&&(yield nS(o.call(d)))}finally{if(l)throw l.error}}a=!0}catch(e){if(ih(e))return yield nS(void 0);throw e}finally{a||t.abort()}})},t,n)}static fromReadableStream(e,t,n){let i=!1;return new i8(function(){return nC(this,arguments,function*(){var n,r,l,o;if(i)throw new ig("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{try{for(var a,u=!0,p=nO(function(){return nC(this,arguments,function*(){var t,n,i,r;let l=new iQ,o=iD(e);try{for(var s,a=!0,u=nO(o);!(t=(s=yield nS(u.next())).done);a=!0)for(let e of(r=s.value,a=!1,l.decode(r)))yield yield nS(e)}catch(e){n={error:e}}finally{try{!a&&!t&&(i=u.return)&&(yield nS(i.call(u)))}finally{if(n)throw n.error}}for(let e of l.flush())yield yield nS(e)})}());!(n=(a=yield nS(p.next())).done);u=!0)o=a.value,u=!1,!s&&o&&(yield yield nS(JSON.parse(o)))}catch(e){r={error:e}}finally{try{!u&&!n&&(l=p.return)&&(yield nS(l.call(p)))}finally{if(r)throw r.error}}s=!0}catch(e){if(ih(e))return yield nS(void 0);throw e}finally{s||t.abort()}})},t,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],n=this.iterator(),i=i=>({next:()=>{if(0===i.length){let i=n.next();e.push(i),t.push(i)}return i.shift()}});return[new i8(()=>i(e),this.controller,this.client),new i8(()=>i(t),this.controller,this.client)]}toReadableStream(){let e,t=this;return ik({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:i}=await e.next();if(i)return t.close();let r=iz(JSON.stringify(n)+"\n");t.enqueue(r)}catch(e){t.error(e)}},async cancel(){var t;await (null==(t=e.return)?void 0:t.call(e))}})}}class i7{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let n;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,r,l]=-1!==(n=(t=e).indexOf(":"))?[t.substring(0,n),":",t.substring(n+1)]:[t,"",""];return l.startsWith(" ")&&(l=l.substring(1)),"event"===i?this.event=l:"data"===i&&this.data.push(l),null}}async function i9(e,t){let{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:l}=t,o=await (async()=>{var i;if(t.options.stream)return(i3(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(n,t.controller,e):i8.fromSSEResponse(n,t.controller,e);if(204===n.status)return null;if(t.options.__binaryResponse)return n;let r=n.headers.get("content-type"),l=null==(i=null==r?void 0:r.split(";")[0])?void 0:i.trim();return(null==l?void 0:l.includes("application/json"))||(null==l?void 0:l.endsWith("+json"))?await n.json():await n.text()})();return i3(e).debug(`[${i}] response parsed`,i6({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-l})),o}class re extends Promise{constructor(e,t,n=i9){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new re(this.client,this.responsePromise,async(t,n)=>e(await this.parseResponse(t,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}let rt=Symbol("brand.privateNullableHeaders"),rn=e=>{let t=new Headers,n=new Set;for(let i of e){let e=new Set;for(let[r,l]of function*(e){let t;if(!e)return;if(rt in e){let{values:t,nulls:n}=e;for(let e of(yield*t.entries(),n))yield[e,null];return}let n=!1;for(let i of(e instanceof Headers?t=e.entries():iR(e)?t=e:(n=!0,t=Object.entries(null!=e?e:{})),t)){let e=i[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=iR(i[1])?i[1]:[i[1]],r=!1;for(let i of t)void 0!==i&&(n&&!r&&(r=!0,yield[e,null]),yield[e,i])}}(i)){let i=r.toLowerCase();e.has(i)||(t.delete(r),e.add(i)),null===l?(t.delete(r),n.add(i)):(t.append(r,l),n.delete(i))}}return{[rt]:!0,values:t,nulls:n}},ri=e=>{var t,n,i,r,l,o;return void 0!==globalThis.process?null!=(i=null==(n=null==(t=globalThis.process.env)?void 0:t[e])?void 0:n.trim())?i:void 0:void 0!==globalThis.Deno?null==(o=null==(l=null==(r=globalThis.Deno.env)?void 0:r.get)?void 0:l.call(r,e))?void 0:o.trim():void 0};class rr{constructor(e){var t,n,i,r,l,o,s,{baseURL:a=ri("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=null!=(t=ri("GEMINI_API_KEY"))?t:null,apiVersion:p="v1beta"}=e;const d=Object.assign(Object.assign({apiKey:u,apiVersion:p},nA(e,["baseURL","apiKey","apiVersion"])),{baseURL:a||"https://generativelanguage.googleapis.com"});this.baseURL=d.baseURL,this.timeout=null!=(n=d.timeout)?n:rr.DEFAULT_TIMEOUT,this.logger=null!=(i=d.logger)?i:console;const c="warn";this.logLevel=c,this.logLevel=null!=(l=null!=(r=i0(d.logLevel,"ClientOptions.logLevel",this))?r:i0(ri("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))?l:c,this.fetchOptions=d.fetchOptions,this.maxRetries=null!=(o=d.maxRetries)?o:2,this.fetch=null!=(s=d.fetch)?s:function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=iL,this._options=d,this.apiKey=u,this.apiVersion=p,this.clientAdapter=d.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key")||this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let t=rn([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return rn([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return rn([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new ig(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${iP}`}defaultIdempotencyKey(){return`stainless-node-retry-${ic()}`}makeStatusError(e,t,n,i){return iy.generate(e,t,n,i)}buildURL(e,t,n){let i=!this.baseURLOverridden()&&n||this.baseURL,r=new URL(iN.test(e)?e:i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(l)&&(t=Object.assign(Object.assign({},l),t)),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>Object.assign({method:e,path:t},n)))}request(e,t=null){return new re(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var i,r,l;let o=await e,s=null!=(i=o.maxRetries)?i:this.maxRetries;null==t&&(t=s),await this.prepareOptions(o);let{req:a,url:u,timeout:p}=await this.buildRequest(o,{retryCount:s-t});await this.prepareRequest(a,{url:u,options:o});let d="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),c=void 0===n?"":`, retryOf: ${n}`,h=Date.now();if(i3(this).debug(`[${d}] sending request`,i6({retryOfRequestLogID:n,method:o.method,url:u,options:o,headers:a.headers})),null==(r=o.signal)?void 0:r.aborted)throw new iv;let m=new AbortController,f=await this.fetchWithTimeout(u,a,p,m).catch(im),g=Date.now();if(f instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(null==(l=o.signal)?void 0:l.aborted)throw new iv;let i=ih(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return i3(this).info(`[${d}] connection ${i?"timed out":"failed"} - ${e}`),i3(this).debug(`[${d}] connection ${i?"timed out":"failed"} (${e})`,i6({retryOfRequestLogID:n,url:u,durationMs:g-h,message:f.message})),this.retryRequest(o,t,null!=n?n:d);if(i3(this).info(`[${d}] connection ${i?"timed out":"failed"} - error; no more retries left`),i3(this).debug(`[${d}] connection ${i?"timed out":"failed"} (error; no more retries left)`,i6({retryOfRequestLogID:n,url:u,durationMs:g-h,message:f.message})),i)throw new iE;throw new ib({cause:f})}let y=`[${d}${c}] ${a.method} ${u} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${g-h}ms`;if(!f.ok){let e=await this.shouldRetry(f);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await iU(f.body),i3(this).info(`${y} - ${e}`),i3(this).debug(`[${d}] response error (${e})`,i6({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:g-h})),this.retryRequest(o,t,null!=n?n:d,f.headers)}let i=e?"error; no more retries left":"error; not retryable";i3(this).info(`${y} - ${i}`);let r=await f.text().catch(e=>im(e).message),l=(e=>{try{return JSON.parse(e)}catch(e){return}})(r),s=l?void 0:r;throw i3(this).debug(`[${d}] response error (${i})`,i6({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:s,durationMs:Date.now()-h})),this.makeStatusError(f.status,l,s,f.headers)}return i3(this).info(y),i3(this).debug(`[${d}] response start`,i6({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:g-h})),{response:f,options:o,controller:m,requestLogID:d,retryOfRequestLogID:n,startTime:h}}async fetchWithTimeout(e,t,n,i){let r=t||{},{signal:l,method:o}=r,s=nA(r,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());let a=setTimeout(()=>i.abort(),n),u=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,p=Object.assign(Object.assign(Object.assign({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),s);o&&(p.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(a)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,n,i){var r;let l,o,s=null==i?void 0:i.get("retry-after-ms");if(s){let e=parseFloat(s);Number.isNaN(e)||(l=e)}let a=null==i?void 0:i.get("retry-after");if(a&&!l){let e=parseFloat(a);l=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(l&&0<=l&&l<6e4)){let n=null!=(r=e.maxRetries)?r:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,n)}return await (o=l,new Promise(e=>setTimeout(e,o))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){var n,i,r;let l=Object.assign({},e),{method:o,path:s,query:a,defaultBaseURL:u}=l,p=this.buildURL(s,a,u);"timeout"in l&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new ig(`${e} must be an integer`);if(t<0)throw new ig(`${e} must be a positive integer`)})("timeout",l.timeout),l.timeout=null!=(n=l.timeout)?n:this.timeout;let{bodyHeaders:d,body:c}=this.buildBody({options:l}),h=await this.buildHeaders({options:e,method:o,bodyHeaders:d,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:o,headers:h},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"}),c&&{body:c}),null!=(i=this.fetchOptions)?i:{}),null!=(r=l.fetchOptions)?r:{}),url:p,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let l={};this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);let o=await this.authHeaders(e),s=rn([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),null!=t?t:t=(()=>{var e,t,n,i,r;let l="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===l)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iP,"X-Stainless-OS":iM(Deno.build.os),"X-Stainless-Arch":ij(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!=(t=null==(e=Deno.version)?void 0:e.deno)?t:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iP,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===l)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iP,"X-Stainless-OS":iM(null!=(n=globalThis.process.platform)?n:"unknown"),"X-Stainless-Arch":ij(null!=(i=globalThis.process.arch)?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!=(r=globalThis.process.version)?r:"unknown"};let o=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let n=t.exec(navigator.userAgent);if(n){let t=n[1]||0,i=n[2]||0,r=n[3]||0;return{browser:e,version:`${t}.${i}.${r}`}}}return null}();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iP,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":iP,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),this._options.defaultHeaders,i,e.headers,o]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:t}}){let n;if(!e)return{bodyHeaders:void 0,body:void 0};let i=rn([t]);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:e};if("object"!=typeof e||!(Symbol.asyncIterator in e)&&(!(Symbol.iterator in e)||!("next"in e)||"function"!=typeof e.next))return this.encoder({body:e,headers:i});return{bodyHeaders:void 0,body:(n=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator](),ik({start(){},async pull(e){let{done:t,value:i}=await n.next();t?e.close():e.enqueue(i)},async cancel(){var e;await (null==(e=n.return)?void 0:e.call(n))}}))}}}rr.DEFAULT_TIMEOUT=6e4;class rl extends rr{constructor(){super(...arguments),this.interactions=new iK(this)}}function ro(e,t){let n,i,r,l={},o=tx(e,["sdkHttpResponse"]);null!=o&&t_(l,["sdkHttpResponse"],o);let s=tx(e,["name"]);null!=s&&t_(l,["name"],s);let a=tx(e,["state"]);null!=a&&t_(l,["state"],nu(a));let u=tx(e,["createTime"]);null!=u&&t_(l,["createTime"],u);let p=tx(e,["tuningTask","startTime"]);null!=p&&t_(l,["startTime"],p);let d=tx(e,["tuningTask","completeTime"]);null!=d&&t_(l,["endTime"],d);let c=tx(e,["updateTime"]);null!=c&&t_(l,["updateTime"],c);let h=tx(e,["description"]);null!=h&&t_(l,["description"],h);let m=tx(e,["baseModel"]);null!=m&&t_(l,["baseModel"],m);let f=tx(e,["_self"]);return null!=f&&t_(l,["tunedModel"],(n={},null!=(i=tx(f,["name"]))&&t_(n,["model"],i),null!=(r=tx(f,["name"]))&&t_(n,["endpoint"],r),n)),l}function rs(e,t){let n={},i=tx(e,["sdkHttpResponse"]);null!=i&&t_(n,["sdkHttpResponse"],i);let r=tx(e,["name"]);null!=r&&t_(n,["name"],r);let l=tx(e,["state"]);null!=l&&t_(n,["state"],nu(l));let o=tx(e,["createTime"]);null!=o&&t_(n,["createTime"],o);let s=tx(e,["startTime"]);null!=s&&t_(n,["startTime"],s);let a=tx(e,["endTime"]);null!=a&&t_(n,["endTime"],a);let u=tx(e,["updateTime"]);null!=u&&t_(n,["updateTime"],u);let p=tx(e,["error"]);null!=p&&t_(n,["error"],p);let d=tx(e,["description"]);null!=d&&t_(n,["description"],d);let c=tx(e,["baseModel"]);null!=c&&t_(n,["baseModel"],c);let h=tx(e,["tunedModel"]);null!=h&&t_(n,["tunedModel"],h);let m=tx(e,["preTunedModel"]);null!=m&&t_(n,["preTunedModel"],m);let f=tx(e,["supervisedTuningSpec"]);null!=f&&t_(n,["supervisedTuningSpec"],f);let g=tx(e,["preferenceOptimizationSpec"]);null!=g&&t_(n,["preferenceOptimizationSpec"],g);let y=tx(e,["tuningDataStats"]);null!=y&&t_(n,["tuningDataStats"],y);let v=tx(e,["encryptionSpec"]);null!=v&&t_(n,["encryptionSpec"],v);let b=tx(e,["partnerModelTuningSpec"]);null!=b&&t_(n,["partnerModelTuningSpec"],b);let E=tx(e,["customBaseModel"]);null!=E&&t_(n,["customBaseModel"],E);let _=tx(e,["experiment"]);null!=_&&t_(n,["experiment"],_);let x=tx(e,["labels"]);null!=x&&t_(n,["labels"],x);let I=tx(e,["outputUri"]);null!=I&&t_(n,["outputUri"],I);let T=tx(e,["pipelineJob"]);null!=T&&t_(n,["pipelineJob"],T);let A=tx(e,["serviceAccount"]);null!=A&&t_(n,["serviceAccount"],A);let S=tx(e,["tunedModelDisplayName"]);null!=S&&t_(n,["tunedModelDisplayName"],S);let C=tx(e,["veoTuningSpec"]);return null!=C&&t_(n,["veoTuningSpec"],C),n}function ra(e,t){let n={},i=tx(e,["gcsUri"]);null!=i&&t_(n,["validationDatasetUri"],i);let r=tx(e,["vertexDatasetResource"]);return null!=r&&t_(n,["validationDatasetUri"],r),n}rl.GeminiNextGenAPIClient=rl,rl.GeminiNextGenAPIClientError=ig,rl.APIError=iy,rl.APIConnectionError=ib,rl.APIConnectionTimeoutError=iE,rl.APIUserAbortError=iv,rl.NotFoundError=iT,rl.ConflictError=iA,rl.RateLimitError=iC,rl.BadRequestError=i_,rl.AuthenticationError=ix,rl.InternalServerError=iO,rl.PermissionDeniedError=iI,rl.UnprocessableEntityError=iS,rl.toFile=iF,rl.Interactions=iK;class ru extends tb{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new n_(tt.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){let n={tunedModelName:e.baseModel};(null==(t=e.config)?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},e),{preTunedModel:n});return i.baseModel=void 0,await this.tuneInternal(i)}else{let t=Object.assign({},e);return await this.tuneInternal(t)}{let t=Object.assign({},e),n=await this.tuneMldevInternal(t),i="";return void 0!==n.metadata&&void 0!==n.metadata.tunedModel?i=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(i=n.name.split("/operations/")[0]),{name:i,state:eP.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s=(i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],r),i);return l=tE("{name}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>rs(e))}{let t,n,s=(t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],n),t);return l=tE("{name}",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>ro(e))}}async listInternal(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s,a,u,p=(i={},null!=(r=tx(e,["config"]))&&(s=tx(r,["pageSize"]),void 0!==i&&null!=s&&t_(i,["_query","pageSize"],s),a=tx(r,["pageToken"]),void 0!==i&&null!=a&&t_(i,["_query","pageToken"],a),u=tx(r,["filter"]),void 0!==i&&null!=u&&t_(i,["_query","filter"],u)),i);return l=tE("tuningJobs",p._url),o=p._query,delete p._url,delete p._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e,t){let n={},i=tx(e,["sdkHttpResponse"]);null!=i&&t_(n,["sdkHttpResponse"],i);let r=tx(e,["nextPageToken"]);null!=r&&t_(n,["nextPageToken"],r);let l=tx(e,["tuningJobs"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>rs(e))),t_(n,["tuningJobs"],e)}return n}(e),n=new tL;return Object.assign(n,t),n})}{let t,n,s,a,u,p=(t={},null!=(n=tx(e,["config"]))&&(s=tx(n,["pageSize"]),void 0!==t&&null!=s&&t_(t,["_query","pageSize"],s),a=tx(n,["pageToken"]),void 0!==t&&null!=a&&t_(t,["_query","pageToken"],a),u=tx(n,["filter"]),void 0!==t&&null!=u&&t_(t,["_query","filter"],u)),t);return l=tE("tunedModels",p._url),o=p._query,delete p._url,delete p._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e,t){let n={},i=tx(e,["sdkHttpResponse"]);null!=i&&t_(n,["sdkHttpResponse"],i);let r=tx(e,["nextPageToken"]);null!=r&&t_(n,["nextPageToken"],r);let l=tx(e,["tunedModels"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>ro(e))),t_(n,["tuningJobs"],e)}return n}(e),n=new tL;return Object.assign(n,t),n})}}async cancel(e){var t,n,i,r;let l="",o={};if(this.apiClient.isVertexAI()){let i,r,s=(i={},null!=(r=tx(e,["name"]))&&t_(i,["_url","name"],r),i);return l=tE("{name}:cancel",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tq;return Object.assign(r,i),r})}{let t,n,s=(t={},null!=(n=tx(e,["name"]))&&t_(t,["_url","name"],n),t);return l=tE("{name}:cancel",s._url),o=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(i=e.config)?void 0:i.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i=(t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),t),r=new tq;return Object.assign(r,i),r})}}async tuneInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI()){let l,o,s,a,u,p=(l={},null!=(o=tx(e,["baseModel"]))&&t_(l,["baseModel"],o),null!=(s=tx(e,["preTunedModel"]))&&t_(l,["preTunedModel"],s),null!=(a=tx(e,["trainingDataset"]))&&function(e,t,n){let i=tx(n,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let n=tx(e,["gcsUri"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){let n=tx(e,["gcsUri"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let r=tx(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){let n=tx(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===r){let n=tx(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==tx(e,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(a,l,e),null!=(u=tx(e,["config"]))&&function(e,t,n){let i=tx(n,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let n=tx(e,["validationDataset"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec"],ra(n))}else if("PREFERENCE_TUNING"===i){let n=tx(e,["validationDataset"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec"],ra(n))}let r=tx(e,["tunedModelDisplayName"]);void 0!==t&&null!=r&&t_(t,["tunedModelDisplayName"],r);let l=tx(e,["description"]);void 0!==t&&null!=l&&t_(t,["description"],l);let o=tx(n,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){let n=tx(e,["epochCount"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===o){let n=tx(e,["epochCount"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let s=tx(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){let n=tx(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===s){let n=tx(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let a=tx(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){let n=tx(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===a){let n=tx(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let u=tx(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){let n=tx(e,["adapterSize"]);void 0!==t&&null!=n&&t_(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===u){let n=tx(e,["adapterSize"]);void 0!==t&&null!=n&&t_(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==tx(e,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==tx(e,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let p=tx(e,["labels"]);void 0!==t&&null!=p&&t_(t,["labels"],p);let d=tx(e,["beta"]);void 0!==t&&null!=d&&t_(t,["preferenceOptimizationSpec","hyperParameters","beta"],d)}(u,l,e),l);return i=tE("tuningJobs",p._url),r=p._query,delete p._url,delete p._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(p),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>rs(e))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let i="",r={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,o,s,a,u,p=(l={},null!=(o=tx(e,["baseModel"]))&&t_(l,["baseModel"],o),null!=(s=tx(e,["preTunedModel"]))&&t_(l,["preTunedModel"],s),null!=(a=tx(e,["trainingDataset"]))&&function(e,t){if(void 0!==tx(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==tx(e,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=tx(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),t_({},["examples","examples"],e)}}(a),null!=(u=tx(e,["config"]))&&function(e,t,n){if(void 0!==tx(e,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let i=tx(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=i&&t_(t,["displayName"],i),void 0!==tx(e,["description"]))throw Error("description parameter is not supported in Gemini API.");let r=tx(e,["epochCount"]);void 0!==t&&null!=r&&t_(t,["tuningTask","hyperparameters","epochCount"],r);let l=tx(e,["learningRateMultiplier"]);if(null!=l&&t_({},["tuningTask","hyperparameters","learningRateMultiplier"],l),void 0!==tx(e,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==tx(e,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==tx(e,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let o=tx(e,["batchSize"]);void 0!==t&&null!=o&&t_(t,["tuningTask","hyperparameters","batchSize"],o);let s=tx(e,["learningRate"]);if(void 0!==t&&null!=s&&t_(t,["tuningTask","hyperparameters","learningRate"],s),void 0!==tx(e,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==tx(e,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(u,l),l);return i=tE("tunedModels",p._url),r=p._query,delete p._url,delete p._query,this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(p),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,n,i,r,l,o;return t={},null!=(n=tx(e,["sdkHttpResponse"]))&&t_(t,["sdkHttpResponse"],n),null!=(i=tx(e,["name"]))&&t_(t,["name"],i),null!=(r=tx(e,["metadata"]))&&t_(t,["metadata"],r),null!=(l=tx(e,["done"]))&&t_(t,["done"],l),null!=(o=tx(e,["error"]))&&t_(t,["error"],o),t})}}}class rp{async download(e,t){throw Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}let rd="x-goog-upload-status";async function rc(e,t,n){var i;let r=await rm(e,t,n),l=await (null==r?void 0:r.json());if((null==(i=null==r?void 0:r.headers)?void 0:i[rd])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return l.file}async function rh(e,t,n){var i;let r=await rm(e,t,n),l=await (null==r?void 0:r.json());if((null==(i=null==r?void 0:r.headers)?void 0:i[rd])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let o=tT(l),s=new tQ;return Object.assign(s,o),s}async function rm(e,t,n){var i,r;let l=0,o=0,s=new tA(new Response),a="upload";for(l=e.size;o<l;){let u=Math.min(8388608,l-o),p=e.slice(o,o+u);o+u>=l&&(a+=", finalize");let d=0,c=1e3;for(;d<3&&(null==(i=null==(s=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":a,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}))?void 0:s.headers)||!i[rd]);)d++,await function(e){return new Promise(t=>setTimeout(t,e))}(c),c*=2;if(o+=u,(null==(r=null==s?void 0:s.headers)?void 0:r[rd])!=="active")break;if(l<=o)throw Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function rf(e){return{size:e.size,type:e.type}}class rg{async upload(e,t,n){if("string"==typeof e)throw Error("File path is not supported in browser uploader.");return await rc(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"==typeof e)throw Error("File path is not supported in browser uploader.");return await rh(e,t,n)}async stat(e){if("string"!=typeof e)return await rf(e);throw Error("File path is not supported in browser uploader.")}}class ry{create(e,t,n){return new rv(e,t,n)}}class rv{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}let rb="x-goog-api-key";class rE{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(rb)){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw Error("API key is missing. Please provide a valid API key.");e.append(rb,this.apiKey)}}}class r_{get interactions(){if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;(null==e?void 0:e.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let t=new rl({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==e?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(null==e.apiKey)throw Error("An API Key must be set when running in a browser");if(e.project||e.location)throw Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!=(t=e.vertexai)&&t,this.apiKey=e.apiKey;const n=function(e,t,n,i){return(null==e?void 0:e.baseUrl)?e.baseUrl:t?null!=l?l:n:null!=r?r:i}(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new rE(this.apiKey);this.apiClient=new n0({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new rg,downloader:new rp}),this.models=new is(this.apiClient),this.live=new n9(this.apiClient,i,new ry),this.batches=new nx(this.apiClient),this.chats=new nR(this.models,this.apiClient),this.caches=new nT(this.apiClient),this.files=new nM(this.apiClient),this.operations=new ia(this.apiClient),this.authTokens=new iu(this.apiClient),this.tunings=new ru(this.apiClient),this.fileSearchStores=new id(this.apiClient)}}let rx=[{id:"family",label:"Family Health",x:20,y:30,color:"text-sage",icon:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},{id:"education",label:"Child Literacy",x:80,y:35,color:"text-terracotta",icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:"economy",label:"Local Market",x:25,y:75,color:"text-vibrant-gold",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},{id:"policy",label:"Village Governance",x:75,y:70,color:"text-deep-purple",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}],rI=()=>{let[e,t]=(0,ta.useState)(null),[n,i]=(0,ta.useState)(""),[r,l]=(0,ta.useState)(!1),o=async(e,n)=>{t(e),l(!0),i("");try{let e=new r_({apiKey:tv.default.env.API_KEY}),t=await e.models.generateContent({model:"gemini-3-flash-preview",contents:`Explain the 10-year societal ripple effect when a rural woman in Sarlahi, Nepal gains leadership in the sector of "${n}". Be specific about generational impact. Keep it under 60 words, inspiring and professional.`,config:{temperature:.8}});i(t.text||"Impact data being calculated...")}catch(e){i("Empowerment creates waves that reach further than we can measure. (AI connection temporarily paused)")}finally{l(!1)}};return(0,tn.jsxs)("section",{className:"py-32 bg-stone-950 text-white overflow-hidden relative",children:[(0,tn.jsx)("div",{className:"container mx-auto px-8 md:px-16 lg:px-24",children:(0,tn.jsxs)("div",{className:"grid lg:grid-cols-2 gap-20 items-center",children:[(0,tn.jsxs)("div",{className:"relative order-2 lg:order-1",children:[(0,tn.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,tn.jsx)("span",{className:"w-10 h-[1px] bg-terracotta"}),(0,tn.jsx)("span",{className:"text-terracotta font-black uppercase tracking-[0.4em] text-[10px]",children:"Impact Simulator"})]}),(0,tn.jsxs)("h2",{className:"text-5xl lg:text-7xl font-serif-impact mb-10 leading-tight",children:["The Ripple ",(0,tn.jsx)("br",{}),(0,tn.jsx)("span",{className:"italic text-vibrant-gold",children:"Effect"}),"."]}),(0,tn.jsx)("div",{className:"min-h-[220px] bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 relative",children:e||r?r?(0,tn.jsxs)("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[(0,tn.jsx)("div",{className:"w-8 h-8 border-2 border-vibrant-gold border-t-transparent rounded-full animate-spin"}),(0,tn.jsx)("p",{className:"text-xs font-black uppercase tracking-widest text-vibrant-gold animate-pulse",children:"Calculating Generational Shift..."})]}):(0,tn.jsxs)("div",{className:"animate-in fade-in slide-in-from-left-4 duration-700",children:[(0,tn.jsxs)("h4",{className:"text-vibrant-gold font-black uppercase tracking-widest text-xs mb-4",children:[rx.find(t=>t.id===e)?.label," Forecast"]}),(0,tn.jsxs)("p",{className:"text-xl lg:text-2xl leading-relaxed text-stone-200 font-medium italic",children:['"',n,'"']})]}):(0,tn.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center text-stone-500 italic",children:(0,tn.jsx)("p",{className:"text-lg",children:"Click a sector on the map to visualize the transformation."})})})]}),(0,tn.jsxs)("div",{className:"relative order-1 lg:order-2 aspect-square max-w-[600px] mx-auto w-full",children:[(0,tn.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,tn.jsxs)("div",{className:"relative z-20 group",children:[(0,tn.jsx)("div",{className:"w-32 h-32 rounded-full bg-deep-purple flex items-center justify-center border-4 border-white/10 shadow-[0_0_50px_rgba(76,29,149,0.3)] transition-all duration-700 group-hover:scale-110",children:(0,tn.jsx)("svg",{className:"w-16 h-16 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,tn.jsx)("div",{className:`absolute inset-0 rounded-full border border-vibrant-gold/40 animate-[ping_3s_linear_infinite] ${e?"opacity-100":"opacity-0"}`}),(0,tn.jsx)("div",{className:`absolute inset-0 rounded-full border border-terracotta/40 animate-[ping_4s_linear_infinite_reverse] ${e?"opacity-100":"opacity-0"}`})]})}),(0,tn.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-10",children:rx.map(t=>(0,tn.jsx)("line",{x1:"50%",y1:"50%",x2:`${t.x}%`,y2:`${t.y}%`,className:`stroke-white/10 transition-all duration-1000 ${e===t.id?"stroke-vibrant-gold/40 stroke-[2px]":"stroke-dasharray-[5,5]"}`},`line-${t.id}`))}),rx.map(t=>(0,tn.jsxs)("button",{onClick:()=>o(t.id,t.label),className:`absolute w-20 h-20 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10 flex flex-col items-center justify-center transition-all duration-500 transform hover:scale-110 hover:bg-white/10 group z-20 ${e===t.id?"border-vibrant-gold shadow-[0_0_30px_rgba(217,119,6,0.2)]":""}`,style:{left:`${t.x}%`,top:`${t.y}%`,transform:"translate(-50%, -50%)"},children:[(0,tn.jsx)("svg",{className:`w-8 h-8 mb-2 transition-colors ${t.color} ${e===t.id?"opacity-100":"opacity-60"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:t.icon})}),(0,tn.jsx)("span",{className:"text-[8px] font-black uppercase tracking-tighter text-white/50 text-center px-2 group-hover:text-white transition-colors",children:t.label})]},t.id))]})]})}),(0,tn.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-deep-purple/20 rounded-full blur-[160px] pointer-events-none"})]})},rT=()=>{let[e,t]=(0,ta.useState)(0),n=(0,ta.useRef)(null);return(0,ta.useEffect)(()=>{let e=()=>{if(!n.current)return;let e=n.current.getBoundingClientRect(),i=window.innerHeight;e.top<i&&e.bottom>0&&t(Math.min(Math.max((i-e.top)/(i+e.height),0),1))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,tn.jsxs)("div",{ref:n,className:"relative w-full h-64 overflow-hidden z-20",style:{marginBottom:"-1px",marginTop:"-1px"},children:[(0,tn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-deep-purple via-deep-purple to-[#F9F8F6]"}),(0,tn.jsxs)("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 1440 200",preserveAspectRatio:"none",fill:"none",children:[(0,tn.jsx)("path",{d:"M0,160 C240,190 480,130 720,160 S1200,190 1440,160 V200 H0 Z",fill:"#4C1D95",fillOpacity:"0.1",style:{transform:`translateX(${-30*e}px)`},className:"transition-transform duration-1000 ease-out"}),(0,tn.jsx)("path",{d:"M0,60 C480,10 960,110 1440,60",stroke:"#D97706",strokeWidth:"3",strokeOpacity:"0.4",strokeDasharray:"2000",strokeDashoffset:2e3*(1-e),className:"transition-all duration-[2.5s] ease-out"})]}),(0,tn.jsx)("div",{className:"absolute top-1/4 left-[20%] w-4 h-4 bg-vibrant-gold rounded-full shadow-[0_0_25px_rgba(217,119,6,0.6)] animate-pulse",style:{transform:`translateY(${-60*e}px)`}})]})};function rA(){return(0,tn.jsxs)("div",{className:"bg-white",children:[(0,tn.jsx)(ts,{}),(0,tn.jsx)(tp,{}),(0,tn.jsx)(tc,{}),(0,tn.jsx)(th,{}),(0,tn.jsx)(rT,{}),(0,tn.jsx)(tf,{}),(0,tn.jsx)(rI,{}),(0,tn.jsx)(tm,{}),(0,tn.jsx)(ty,{})]})}e.s(["default",()=>rA],31713)}]);